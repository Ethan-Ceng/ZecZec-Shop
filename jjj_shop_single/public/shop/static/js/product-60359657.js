import{s as e,t as a,e as t,d as l,f as s,c as o,x as i,y as r,l as n,i as d,p as c,v as u}from"./element-plus-84a27f94.js";import{F as p}from"./fullreduce-dc8ae2e3.js";import m from"./Settings-c9c9059d.js";import{_ as g}from"./index-5ae5860a.js";import{ae as _,ap as h,o as b,c as v,a as y,P as f,S as j,Q as C,a9 as k,T as w,W as z,$ as D,Y as S,X as F}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const x={components:{Settings:m},data:()=>({activeName:"-1",activeIndex:"0",loading:!0,pageSize:10,totalDataNumber:0,curPage:1,searchForm:{product_name:"",category_id:""},tableData:[],categoryList:[],product_count:{},open_settings:!1,productModel:{}}),created(){this.getData()},methods:{handleCurrentChange(e){let a=this;a.loading=!0,a.curPage=e,a.getData()},handleSizeChange(e){this.pageSize=e,this.getData()},handleClick(e,a){let t=this;t.activeName=e,t.curPage=1,t.getData()},getData(){let e=this,a=e.searchForm;a.page=e.curPage,a.list_rows=e.pageSize,a.is_join=e.activeName,e.loading=!0,p.product(a,!0).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.categoryList=a.data.category,e.totalDataNumber=a.data.list.total,e.product_count=a.data.product_count})).catch((a=>{e.loading=!1}))},onSubmit(){this.curPage=1,this.getData()},reset(){this.curPage=1,this.searchForm={product_name:"",category_id:""},this.getData()},settingsClick(e){this.productModel={product_id:e.product_id,product_name:e.product_name,reduce_pid:e.reduce_pid,reduce_list:e.reduce_list},this.open_settings=!0},closeDialogFunc(e,a){this.open_settings=e.openDialog,"success"==e.type&&this.getData()}}},N={class:"product-list"},V={class:"common-seach-wrap"},P={class:"product-content"},M=y("span",null,"全部",-1),T=y("span",null,"參與",-1),L=y("span",null,"不參與",-1),U={class:"table-wrap"},Y={class:"product-info"},q={key:0,class:"pic"},A={alt:""},I={class:"info"},Q={class:"name"},W={class:"gray3"},X={key:0,class:"green"},$={key:1,class:"gray3"},B={key:0},E=["label","value"],G={key:0},H={key:1},J={key:2},K={key:3},O={class:"table-btn-column"},R={class:"pagination"};const Z=g(x,[["render",function(p,m,g,x,Z,ee){const ae=e,te=a,le=t,se=l,oe=s,ie=o,re=i,ne=r,de=n,ce=d,ue=c,pe=_("Settings"),me=h("img-url"),ge=u;return b(),v("div",N,[y("div",V,[f(ie,{size:"small",inline:!0,model:Z.searchForm,class:"demo-form-inline"},{default:j((()=>[f(le,{label:"商品分類"},{default:j((()=>[f(te,{size:"small",modelValue:Z.searchForm.category_id,"onUpdate:modelValue":m[0]||(m[0]=e=>Z.searchForm.category_id=e),placeholder:"所有分類"},{default:j((()=>[f(ae,{label:"全部",value:"0"}),(b(!0),v(C,null,k(Z.categoryList,((e,a)=>(b(),w(ae,{key:a,label:e.name,value:e.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(le,{label:"商品名稱"},{default:j((()=>[f(se,{size:"small",modelValue:Z.searchForm.product_name,"onUpdate:modelValue":m[1]||(m[1]=e=>Z.searchForm.product_name=e),placeholder:"請輸入商品名稱"},null,8,["modelValue"])])),_:1}),f(le,null,{default:j((()=>[f(oe,{size:"small",type:"primary",icon:"Search",onClick:ee.onSubmit},{default:j((()=>[z("查詢")])),_:1},8,["onClick"])])),_:1}),f(le,null,{default:j((()=>[f(oe,{size:"small",type:"success",onClick:ee.reset},{default:j((()=>[z("重置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),y("div",P,[f(ne,{modelValue:Z.activeName,"onUpdate:modelValue":m[2]||(m[2]=e=>Z.activeName=e),onTabChange:ee.handleClick},{default:j((()=>[f(re,{label:"全部",name:"-1"},{label:j((()=>[M])),_:1}),f(re,{label:"參與",name:"1"},{label:j((()=>[T])),_:1}),f(re,{label:"不參與",name:"0"},{label:j((()=>[L])),_:1})])),_:1},8,["modelValue","onTabChange"]),y("div",U,[D((b(),w(ce,{size:"small",data:Z.tableData,border:"",style:{width:"100%"},ref:"multipleTable"},{default:j((()=>[f(de,{type:"selection",width:"55"}),f(de,{prop:"product_name",label:"產品",width:"300px"},{default:j((e=>[y("div",Y,[e.row.image?(b(),v("div",q,[D(y("img",A,null,512),[[me,e.row.image&&e.row.image[0]&&e.row.image[0].file_path]])])):S("",!0),y("div",I,[y("div",Q,F(e.row.product_name),1)])])])),_:1}),f(de,{prop:"product_price",label:"價格"},{default:j((e=>[y("div",W,"￥"+F(e.row.product_price),1)])),_:1}),f(de,{prop:"product_stock",label:"庫存"}),f(de,{prop:"sales_actual",label:"實際銷量"}),f(de,{prop:"is_agent",label:"是否滿減"},{default:j((e=>[null!=e.row.reduce_pid?(b(),v("div",X,"是")):(b(),v("div",$,"否"))])),_:1}),f(de,{label:"滿減活動"},{default:j((e=>[null!=e.row.reduce_pid?(b(),v("div",B,[(b(!0),v(C,null,k(e.row.reduce_list,((e,a)=>(b(),v("div",{key:a,label:e,value:a},[1==e.full_type?(b(),v("span",G,"滿"+F(e.full_value)+"元",1)):S("",!0),2==e.full_type?(b(),v("span",H,"滿"+F(e.full_value)+"件",1)):S("",!0),1==e.reduce_type?(b(),v("span",J,"減"+F(e.reduce_value)+"元",1)):S("",!0),2==e.reduce_type?(b(),v("span",K,"折扣"+F(100-e.reduce_value)+"%",1)):S("",!0)],8,E)))),128))])):S("",!0)])),_:1}),f(de,{fixed:"right",label:"操作",width:"80"},{default:j((e=>[y("div",O,[f(oe,{onClick:a=>ee.settingsClick(e.row),type:"text",size:"small"},{default:j((()=>[z("設定")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])),[[ge,Z.loading]])])]),y("div",R,[f(ue,{onSizeChange:ee.handleSizeChange,onCurrentChange:ee.handleCurrentChange,background:"","current-page":Z.curPage,"page-size":Z.pageSize,layout:"total, prev, pager, next, jumper",total:Z.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),Z.open_settings?(b(),w(pe,{key:0,open_settings:Z.open_settings,productModel:Z.productModel,onCloseDialog:m[3]||(m[3]=e=>ee.closeDialogFunc(e,"settings"))},null,8,["open_settings","productModel"])):S("",!0)])}]]);export{Z as default};
