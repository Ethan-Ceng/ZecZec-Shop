import{l as e,f as a,i as t,p as l,q as s,v as o}from"./element-plus-84a27f94.js";import{C as i}from"./coupon-7cc893e2.js";import{_ as r}from"./index-5ae5860a.js";import{o as n,T as g,S as p,a as d,$ as u,P as c,c as m,X as h,W as b}from"./@vue-8fe4574d.js";const C={class:"product-content"},f={class:"table-wrap"},_={key:0},z={key:1},D={class:"pagination"};const S=r({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{name:""},tableData:[],formRules:{name:[{required:!0,message:"請輸入等級名稱",trigger:"blur"},{min:3,max:5,message:"長度在 3 到 5 個字元",trigger:"blur"}]},multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1}),props:["open_add"],created(){this.dialogVisible=this.open_add,this.getTableList()},methods:{handleCurrentChange(e){this.curPage=e,this.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,a={};a.page=e.curPage,a.list_rows=e.pageSize,i.couponList(a,!0).then((a=>{1==a.code?(e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total,e.gradeList=a.data.grade):e.$message.error("錯了哦，這是一條錯誤訊息")})).catch((e=>{}))},selectUser(e){let a=e;this.$emit("closeDialog",{type:"success",openDialog:!1,params:a})},dialogFormVisible(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},[["render",function(i,r,S,y,V,w){const L=e,k=a,v=t,x=l,P=s,j=o;return n(),g(P,{title:"選擇優惠券",modelValue:V.dialogVisible,"onUpdate:modelValue":r[0]||(r[0]=e=>V.dialogVisible=e),onClose:w.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"},{default:p((()=>[d("div",C,[d("div",f,[u((n(),g(v,{data:V.tableData,border:"",style:{width:"100%"}},{default:p((()=>[c(L,{prop:"name",label:"名稱"}),c(L,{prop:"min_price",label:"最低消費"}),c(L,{prop:"total_num",label:"數量"},{default:p((e=>[e.row.total_num>0?(n(),m("span",_,h(e.row.total_num),1)):(n(),m("span",z,"無限制"))])),_:1}),c(L,{label:"操作",width:"80"},{default:p((e=>[c(k,{type:"primary",size:"small",onClick:a=>w.selectUser(e.row)},{default:p((()=>[b("選擇")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[j,V.loading]])]),d("div",D,[c(x,{onSizeChange:w.handleSizeChange,onCurrentChange:w.handleCurrentChange,background:"","current-page":V.curPage,"page-sizes":[2,10,20,50,100],"page-size":V.pageSize,layout:"total, prev, pager, next, jumper",total:V.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]);export{S as _};
