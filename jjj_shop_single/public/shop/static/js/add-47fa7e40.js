import{E as e,f as r,e as l,d as o,m as s,g as t,c as a,q as i}from"./element-plus-84a27f94.js";import{P as p}from"./Product-14aa5af4.js";import{_ as u}from"./Upload-71ca9325.js";import{L as d}from"./live-bc011905.js";import{_ as m}from"./index-5ae5860a.js";import{o as c,T as n,S as _,a as g,P as h,W as F,X as f,Y as y,c as b,bb as j,b9 as V}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./product-6ff3546d.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const v={components:{Upload:u,Product:p},data:()=>({isupload:!1,productName:"",product_img:"",ruleForm:{name:"",cover_img:"",price_type:1,price:"",price2:"",product_id:"",shop_supplier_id:0},rules:{name:[{required:!0,message:"請輸入商品名稱",trigger:"blur"},{min:3,max:17,message:"長度在 3 到 17 個字元",trigger:"blur"}],price:[{required:!0,message:"請輸入價格",trigger:"change"}]},loading:!1,isproduct:!1,exclude_ids:[],imageType:"",formLabelWidth:"120px",dialogVisible:!1,product_type:0}),props:["open_add"],watch:{open_add:function(e,r){e!=r&&(this.dialogVisible=e)}},created(){},methods:{closeFunc(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1}),this.$refs.ruleForm.resetFields()},getData(){d.toEditProduct({live_product_id:this.productId}).then((e=>{this.ruleForm=e.data,this.product_img=e.data.product.product_image}))},submitForm(r){let l=this;l.loading=!0,l.$refs[r].validate((r=>{if(!r)return l.loading=!1,!1;{let r=l.ruleForm;d.addProduct(r,!0).then((r=>{l.loading=!1,e({message:"建立成功",type:"success"}),this.dialogVisible=!1})).catch((e=>{l.loading=!1}))}}))},resetForm(e){this.$refs[e].resetFields(),this.productName="",this.product_img=""},openUpload(e){this.imageType=e,this.isupload=!0},closeProductFunc(e){"success"==e.type&&(this.ruleForm.product_id=e.params.product_id,this.product_img=e.params.product_image,this.productName=e.params.product_name,this.ruleForm.name=e.params.product_name,this.ruleForm.shop_supplier_id=e.params.shop_supplier_id,this.ruleForm.cover_img=e.params.product_image),this.isproduct=!1},cancelFunc(e){this.$emit("close",{type:"error"})},openProduct(){this.product_type=0,this.isproduct=!0},returnImgsFunc(e){null!=e&&e.length>0&&(this.ruleForm.cover_img=e[0].file_path),this.isupload=!1}}},x=["src"],k=["src"],w=(e=>(j("data-v-2bfd831e"),e=e(),V(),e))((()=>g("div",{class:"gray9"},"建議尺寸300*300,大小不超過2M",-1))),U={class:"dialog-footer"};const q=m(v,[["render",function(e,d,m,j,V,v){const q=r,P=l,C=o,I=u,D=s,$=t,z=a,N=p,T=i;return c(),n(T,{title:"新增商品","modal-append-to-body":!1,"before-close":v.closeFunc,modelValue:V.dialogVisible,"onUpdate:modelValue":d[12]||(d[12]=e=>V.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:_((()=>[g("div",U,[h(q,{size:"small",onClick:d[9]||(d[9]=e=>v.closeFunc())},{default:_((()=>[F("取 消")])),_:1}),h(q,{onClick:d[10]||(d[10]=e=>v.resetForm("ruleForm"))},{default:_((()=>[F("重置")])),_:1}),h(q,{type:"primary",onClick:d[11]||(d[11]=e=>v.submitForm("ruleForm")),loading:V.loading},{default:_((()=>[F("立即提交")])),_:1},8,["loading"])])])),default:_((()=>[h(z,{size:"small",model:V.ruleForm,rules:V.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:_((()=>[h(P,{prop:"product_id",label:"選擇商品",rules:[{required:!0,message:"請繫結商品"}]},{default:_((()=>[h(q,{onClick:d[0]||(d[0]=e=>v.openProduct())},{default:_((()=>[F("選擇商品")])),_:1})])),_:1}),""!=V.ruleForm.product_id?(c(),n(P,{key:0},{default:_((()=>[F(f(V.productName),1)])),_:1})):y("",!0),h(P,null,{default:_((()=>[""!=V.product_img?(c(),b("img",{key:0,src:V.product_img,class:"mt10",width:120},null,8,x)):y("",!0)])),_:1}),h(P,{label:"商品名稱",prop:"name"},{default:_((()=>[h(C,{modelValue:V.ruleForm.name,"onUpdate:modelValue":d[1]||(d[1]=e=>V.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),h(P,{label:"商品封面圖",prop:"cover_img",rules:[{required:!0,message:"請上傳商品封面圖"}]},{default:_((()=>[g("div",null,[h(q,{type:"primary",onClick:d[2]||(d[2]=e=>v.openUpload("cover"))},{default:_((()=>[F("上傳圖片")])),_:1}),""!=V.ruleForm.cover_img?(c(),b("img",{key:0,src:V.ruleForm.cover_img,class:"mt10",width:120},null,8,k)):y("",!0),w,V.isupload?(c(),n(I,{key:1,isupload:V.isupload,onReturnImgs:v.returnImgsFunc},{default:_((()=>[F("上傳圖片")])),_:1},8,["isupload","onReturnImgs"])):y("",!0)])])),_:1}),h(P,{label:"價格型別",prop:"type"},{default:_((()=>[h($,{modelValue:V.ruleForm.price_type,"onUpdate:modelValue":d[3]||(d[3]=e=>V.ruleForm.price_type=e)},{default:_((()=>[h(D,{label:1},{default:_((()=>[F("一口價")])),_:1}),h(D,{label:2},{default:_((()=>[F("價格區間")])),_:1}),h(D,{label:3},{default:_((()=>[F("折扣價")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==V.ruleForm.price_type?(c(),n(P,{key:1,label:"價格：",prop:"price",rules:[{required:!0,message:"請輸入最低價格",trigger:"change"}]},{default:_((()=>[h(C,{type:"text",min:"0",modelValue:V.ruleForm.price,"onUpdate:modelValue":d[4]||(d[4]=e=>V.ruleForm.price=e),class:"mb16 max-w460",placeholder:"請輸入價格"},null,8,["modelValue"])])),_:1})):y("",!0),2==V.ruleForm.price_type?(c(),n(P,{key:2,label:"價格：",prop:"price",rules:[{required:!0,message:"請輸入最低價格",trigger:"change"}]},{default:_((()=>[h(C,{type:"text",min:"0",modelValue:V.ruleForm.price,"onUpdate:modelValue":d[5]||(d[5]=e=>V.ruleForm.price=e),class:"mb16 max-w460",placeholder:"請輸入最低價格"},null,8,["modelValue"])])),_:1})):y("",!0),2==V.ruleForm.price_type?(c(),n(P,{key:3,label:"價格：",prop:"price2",rules:[{required:!0,message:"請輸入最高價格",trigger:"change"}]},{default:_((()=>[h(C,{type:"text",min:"0",modelValue:V.ruleForm.price2,"onUpdate:modelValue":d[6]||(d[6]=e=>V.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"請輸入最高價格"},null,8,["modelValue"])])),_:1})):y("",!0),3==V.ruleForm.price_type?(c(),n(P,{key:4,prop:"price",rules:[{required:!0,message:"請輸入原價",trigger:"change"}],label:"價格："},{default:_((()=>[h(C,{type:"text",min:"0",modelValue:V.ruleForm.price,"onUpdate:modelValue":d[7]||(d[7]=e=>V.ruleForm.price=e),class:"mb16 max-w460",placeholder:"請輸入原價"},null,8,["modelValue"])])),_:1})):y("",!0),3==V.ruleForm.price_type?(c(),n(P,{key:5,prop:"price2",rules:[{required:!0,message:"請輸入現價",trigger:"change"}],label:"價格："},{default:_((()=>[h(C,{type:"text",min:"0",modelValue:V.ruleForm.price2,"onUpdate:modelValue":d[8]||(d[8]=e=>V.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"請輸入現價"},null,8,["modelValue"])])),_:1})):y("",!0)])),_:1},8,["model","rules"]),h(N,{isproduct:V.isproduct,excludeIds:V.exclude_ids,islist:!1,product_type:V.product_type,onCloseDialog:v.closeProductFunc},null,8,["isproduct","excludeIds","product_type","onCloseDialog"])])),_:1},8,["before-close","modelValue"])}],["__scopeId","data-v-2bfd831e"]]);export{q as default};
