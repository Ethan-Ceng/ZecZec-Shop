import{E as e,d as a,e as l,f as o,s as t,t as r,m as d,g as s,c as i}from"./element-plus-84a27f94.js";import{_ as m}from"./Upload-71ca9325.js";import{C as u}from"./card-8cac6905.js";import{_ as p}from"./index-5ae5860a.js";import{o as c,c as n,P as _,S as f,a as g,W as h,Y as y,T as j,Q as b,a9 as V}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const v={components:{Upload:m},data:()=>({isupload:!1,isImg:!1,path:"",form:{card_title:"",category_id:"",image_id:"",card_sort:100,card_status:10,card_content:"",stock_num:"",product_id:"",card_price:"",sell_price:"",product_attr:""},category:[],product:[],loading:!1}),created(){this.getCategoryList()},methods:{openUpload(){this.isupload=!0},returnImgsFunc(e){null!=e&&(this.form.image_id=e[0].file_id,this.path=e[0].file_path,this.isImg=!0),this.isupload=!1},getCategoryList(){let e=this;u.toAddCard({},!0).then((a=>{e.category=a.data.category,e.category.length>0&&(e.form.category_id=e.category[0].category_id),e.product=a.data.product,e.product.length>0&&(e.form.product_id=e.product[0].product_id)})).catch((e=>{}))},onSubmit(){let a=this,l=a.form;a.$refs.form.validate((o=>{o&&(a.loading=!0,u.addCard(l,!0).then((l=>{a.loading=!1,e({message:l.msg,type:"success"}),a.cancelFunc()})).catch((e=>{a.loading=!1})))}))},cancelFunc(){this.$router.back(-1)}}},w={class:"product-add pb50"},x=g("div",{class:"common-form"},"新增卡券",-1),U=["src","isImg"],k=g("div",{class:"tips"},"數字小的排前面",-1),C={class:"common-button-wrapper"};const I=p(v,[["render",function(e,u,p,v,I,z){const q=a,F=l,A=o,S=m,L=t,R=r,T=d,$=s,E=i;return c(),n("div",w,[_(E,{size:"small",model:I.form,ref:"form","label-width":"100px"},{default:f((()=>[x,_(F,{label:"卡券標題",prop:"card_title",rules:[{required:!0,message:" "}]},{default:f((()=>[_(q,{modelValue:I.form.card_title,"onUpdate:modelValue":u[0]||(u[0]=e=>I.form.card_title=e),placeholder:"",class:"max-w460"},null,8,["modelValue"])])),_:1}),_(F,{label:"卡券描述",prop:"card_content",rules:[{required:!0,message:" "}]},{default:f((()=>[_(q,{modelValue:I.form.card_content,"onUpdate:modelValue":u[1]||(u[1]=e=>I.form.card_content=e),placeholder:"",class:"max-w460"},null,8,["modelValue"])])),_:1}),_(F,{label:"卡券售價：",prop:"sell_price",rules:[{required:!0,message:" "}]},{default:f((()=>[_(q,{modelValue:I.form.sell_price,"onUpdate:modelValue":u[2]||(u[2]=e=>I.form.sell_price=e),type:"number",class:"max-w460"},null,8,["modelValue"])])),_:1}),_(F,{label:"市場價格：",prop:"card_price",rules:[{required:!0,message:" "}]},{default:f((()=>[_(q,{modelValue:I.form.card_price,"onUpdate:modelValue":u[3]||(u[3]=e=>I.form.card_price=e),type:"number",class:"max-w460"},null,8,["modelValue"])])),_:1}),_(F,{label:"卡券封面"},{default:f((()=>[g("div",null,[_(A,{type:"primary",onClick:z.openUpload},{default:f((()=>[h("上傳圖片")])),_:1},8,["onClick"]),I.isImg?(c(),n("img",{key:0,src:I.path,class:"mt10",width:120,isImg:I.isImg},null,8,U)):y("",!0),I.isupload?(c(),j(S,{key:1,isupload:I.isupload,onReturnImgs:z.returnImgsFunc},{default:f((()=>[h("上傳圖片")])),_:1},8,["isupload","onReturnImgs"])):y("",!0)])])),_:1}),_(F,{label:"卡券分類"},{default:f((()=>[_(R,{modelValue:I.form.category_id,"onUpdate:modelValue":u[4]||(u[4]=e=>I.form.category_id=e),placeholder:"請選擇",style:{width:"460px"}},{default:f((()=>[(c(!0),n(b,null,V(I.category,((e,a)=>(c(),j(L,{key:a,label:e.name,value:e.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),_(F,{label:"關聯商品"},{default:f((()=>[_(R,{modelValue:I.form.product_id,"onUpdate:modelValue":u[5]||(u[5]=e=>I.form.product_id=e),filterable:"",placeholder:"請選擇",style:{width:"460px"}},{default:f((()=>[(c(!0),n(b,null,V(I.product,((e,a)=>(c(),j(L,{key:a,label:e.product_name,value:e.product_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),_(F,{label:"商品規格",prop:"product_attr"},{default:f((()=>[_(q,{modelValue:I.form.product_attr,"onUpdate:modelValue":u[6]||(u[6]=e=>I.form.product_attr=e),placeholder:"",class:"max-w460"},null,8,["modelValue"])])),_:1}),_(F,{label:"卡券狀態"},{default:f((()=>[_($,{modelValue:I.form.card_status,"onUpdate:modelValue":u[7]||(u[7]=e=>I.form.card_status=e)},{default:f((()=>[_(T,{label:10},{default:f((()=>[h("上架")])),_:1}),_(T,{label:20},{default:f((()=>[h("下架")])),_:1})])),_:1},8,["modelValue"])])),_:1}),_(F,{label:"排序"},{default:f((()=>[_(q,{type:"number",modelValue:I.form.card_sort,"onUpdate:modelValue":u[8]||(u[8]=e=>I.form.card_sort=e),class:"max-w460"},null,8,["modelValue"]),k])),_:1}),g("div",C,[_(A,{size:"small",type:"info",onClick:z.cancelFunc},{default:f((()=>[h("取消")])),_:1},8,["onClick"]),_(A,{size:"small",type:"primary",onClick:z.onSubmit,loading:I.loading},{default:f((()=>[h("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"])])}]]);export{I as default};
