import{a as e,E as a,d as t,e as s,f as l,c as i,l as o,i as n,p as r,v as d}from"./element-plus-84a27f94.js";import{_ as p,d as u}from"./index-5ae5860a.js";import{P as c}from"./plus-c5329662.js";import m from"./SubUser-c6bee448.js";import g from"./Edit-742e19ab.js";import h from"./Add-21bf1e41.js";import{ae as _,ap as b,o as f,c as C,a as k,P as j,S as y,W as w,$ as v,T as S,Y as z,X as x,bb as D,b9 as P}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";import"./GetUser-4ce5b94f.js";import"./data-05520354.js";const M={components:{SubUser:m,Edit:g,Add:h},data:()=>({loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,formInline:{nick_name:""},open_dialog:!1,basicSetting:[],userModel:{},open_edit:!1,open_add:!1,gradeList:[]}),created(){this.getData()},methods:{handleCurrentChange(e){let a=this;a.curPage=e,a.loading=!0,a.getData()},getData(){let e=this,a={};a.page=e.curPage,a.list_rows=e.pageSize,""!=e.formInline.nick_name&&(a.nick_name=e.formInline.nick_name),c.agentList(a,!0).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total,e.basicSetting=a.data.basicSetting,e.gradeList=a.data.gradeList})).catch((a=>{e.loading=!1}))},onSubmit(){this.curPage=1,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},saleClick(e){this.$router.push({path:"/plus/agent/index",query:{type:"order",user_id:e.user_id}}),this.$emit("chang-active","order")},detailedClick(e){this.$router.push({path:"/plus/agent/index",query:{type:"cash",user_id:e.user_id}}),this.$emit("chang-active","cash")},delClick(t){let s=this;e.confirm("此操作將永久刪除該記錄, 是否繼續?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((()=>{s.loading=!0,c.deleteagent({user_id:t.user_id},!0).then((e=>{s.loading=!1,a({message:e.msg,type:"success"}),s.getData()})).catch((e=>{s.loading=!1}))})).catch((()=>{s.loading=!1}))},openSubUser(e){this.userModel=e,this.open_dialog=!0},closeFunc(){this.open_dialog=!1},EditClick(e){this.userModel=u(e),this.open_edit=!0},closeEditFunc(e){this.open_edit=!1,e&&"success"==e.type&&this.getData()},addClick(){this.open_add=!0},closeAddFunc(e){this.open_add=!1,"success"==e.type&&this.getData()}}},U=e=>(D("data-v-895e76e4"),e=e(),P(),e),E={class:"user"},I={class:"common-seach-wrap"},L={class:"product-content"},N={class:"table-wrap"},A={class:"radius",width:30,height:30},F={key:0},$={key:1},T={class:"orange"},q={class:"orange"},V=U((()=>k("span",{class:"gray9"},"一級：",-1))),B={key:0},G=U((()=>k("span",{class:"gray9"},"二級：",-1))),W={key:1},X=U((()=>k("span",{class:"gray9"},"三級：",-1))),Y={class:"pagination"};const H=p(M,[["render",function(e,a,p,u,c,m){const g=t,h=s,D=l,P=i,M=o,U=n,H=r,J=_("SubUser"),K=_("Edit"),O=_("Add"),Q=b("auth"),R=b("img-url"),Z=d;return f(),C("div",E,[k("div",I,[j(P,{size:"small",inline:!0,model:c.formInline,class:"demo-form-inline"},{default:y((()=>[j(h,{label:""},{default:y((()=>[j(g,{modelValue:c.formInline.nick_name,"onUpdate:modelValue":a[0]||(a[0]=e=>c.formInline.nick_name=e),placeholder:"請輸入暱稱/姓名/手機號"},null,8,["modelValue"])])),_:1}),j(h,null,{default:y((()=>[j(D,{type:"primary",onClick:m.onSubmit},{default:y((()=>[w("查詢")])),_:1},8,["onClick"])])),_:1}),j(h,null,{default:y((()=>[v((f(),S(D,{size:"small",type:"primary",icon:"Plus",onClick:m.addClick},{default:y((()=>[w("新增")])),_:1},8,["onClick"])),[[Q,"/plus/agent/user/add"]])])),_:1})])),_:1},8,["model"])]),k("div",L,[k("div",N,[v((f(),S(U,{size:"small",data:c.tableData,border:"",style:{width:"100%"}},{default:y((()=>[j(M,{prop:"user_id",label:"使用者ID",width:"70"}),j(M,{prop:"nickName",label:"微信頭像",width:"90"},{default:y((e=>[v(k("img",A,null,512),[[R,e.row.avatarUrl]])])),_:1}),j(M,{prop:"nickName",label:"\t微信暱稱"}),j(M,{label:"分銷等級"},{default:y((e=>[e.row.grade?z("",!0):(f(),C("span",F,"預設等級")),e.row.grade?(f(),C("span",$,x(e.row.grade.name),1)):z("",!0)])),_:1}),j(M,{prop:"real_name",label:"姓名"}),j(M,{prop:"mobile",label:"手機號"}),j(M,{prop:"total_money",label:"累計佣金"},{default:y((e=>[k("span",T,x(e.row.total_money),1)])),_:1}),j(M,{prop:"money",label:"可提現佣金"},{default:y((e=>[k("span",q,x(e.row.money),1)])),_:1}),j(M,{prop:"referee.nickName",label:"推薦人"}),j(M,{prop:"first_num",label:"下級使用者"},{default:y((e=>[k("p",null,[V,w(" "+x(e.row.first_num),1)]),c.basicSetting.level>=2?(f(),C("p",B,[G,w(" "+x(e.row.second_num),1)])):z("",!0),3==c.basicSetting.level?(f(),C("p",W,[X,w(" "+x(e.row.third_num),1)])):z("",!0)])),_:1}),j(M,{prop:"create_time",label:"成為時間",width:"140"}),j(M,{fixed:"right",label:"操作",width:"260"},{default:y((e=>[k("div",null,[v((f(),S(D,{onClick:a=>m.saleClick(e.row),type:"text",size:"small"},{default:y((()=>[w("訂單")])),_:2},1032,["onClick"])),[[Q,"/plus/agent/order/index"]]),v((f(),S(D,{onClick:a=>m.detailedClick(e.row),type:"text",size:"small"},{default:y((()=>[w("提現")])),_:2},1032,["onClick"])),[[Q,"/plus/agent/cash/index"]]),v((f(),S(D,{onClick:a=>m.openSubUser(e.row),type:"text",size:"small"},{default:y((()=>[w("下級")])),_:2},1032,["onClick"])),[[Q,"/plus/agent/user/fans"]]),v((f(),S(D,{onClick:a=>m.EditClick(e.row),type:"text",size:"small"},{default:y((()=>[w("修改")])),_:2},1032,["onClick"])),[[Q,"/plus/agent/user/edit"]]),v((f(),S(D,{onClick:a=>m.delClick(e.row),type:"text",size:"small"},{default:y((()=>[w("刪除")])),_:2},1032,["onClick"])),[[Q,"/plus/agent/user/delete"]])])])),_:1})])),_:1},8,["data"])),[[Z,c.loading]])]),k("div",Y,[j(H,{onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange,background:"","current-page":c.curPage,"page-size":c.pageSize,layout:"total, prev, pager, next, jumper",total:c.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),j(J,{open_dialog:c.open_dialog,userModel:c.userModel,onClose:m.closeFunc},null,8,["open_dialog","userModel","onClose"]),j(K,{open_edit:c.open_edit,userModel:c.userModel,gradeList:c.gradeList,onClose:m.closeEditFunc},null,8,["open_edit","userModel","gradeList","onClose"]),j(O,{open_add:c.open_add,onClose:m.closeAddFunc},null,8,["open_add","onClose"])])}],["__scopeId","data-v-895e76e4"]]);export{H as default};
