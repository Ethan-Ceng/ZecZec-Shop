import{a as e,E as a,d as t,e as l,f as o,c as s,l as i,i as r,p as n,q as d,v as m}from"./element-plus-84a27f94.js";import{P as u}from"./product-6ff3546d.js";import{_ as p}from"./index-5ae5860a.js";import{o as c,c as h,a as g,P as f,S as b,W as j,$ as C,T as S}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const _={class:"product"},q={class:"common-seach-wrap"},V={class:"product-content"},w={class:"table-wrap"},z={class:"pagination"},v={class:"dialog-footer"};const k=p({components:{},data:()=>({loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,searchForm:{question:""},dialogVisible:!1,formState:{faq_id:null,question:"",answer:"",sort:100}}),created(){this.getData()},methods:{handleCurrentChange(e){let a=this;a.curPage=e,a.loading=!0;let t=a.searchForm;a.getData(t)},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(e=""){let a=this,t={};t.status=a.status,t.page=a.curPage,t.list_rows=a.pageSize,""!=e&&(t.question=e.question),u.getFaqList(t,!0).then((e=>{a.loading=!1,a.tableData=e.data.list.data,a.totalDataNumber=e.data.list.total})).catch((e=>{a.loading=!1}))},delClick:function(t){let l=this;e.confirm("刪除後不可恢復，確認刪除該記錄嗎?","提示",{type:"warning"}).then((()=>{u.delFaq({comment_id:t.comment_id}).then((e=>{a({message:"刪除成功",type:"success"}),l.getData()}))}))},onSubmit(){let e=this;e.loading=!0;let a=e.searchForm;a.page=e.curPage,a.list_rows=e.pageSize,a.status=e.status,u.getFaqList(a,!0).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total})).catch((a=>{e.loading=!1}))},handleOpen(e){e.faq_id&&(this.formState={...e}),this.dialogVisible=!0},handleClose(e){this.formState={id:null,question:"",answer:"",sort:100},e(),this.dialogVisible=!1},handleSubmit(){let e=this;this.$refs.refFormState&&this.$refs.refFormState.validate(((a,t)=>{a&&(e.loading=!0,this.formState.faq_id?u.editFaq(this.formState,!0).then((a=>{e.loading=!1,e.handleClose()})).catch((a=>{e.loading=!1})):u.addFaq(this.formState,!0).then((a=>{e.loading=!1,e.handleClose()})).catch((a=>{e.loading=!1})))}))}}},[["render",function(e,a,u,p,k,y){const F=t,D=l,x=o,P=s,U=i,N=r,O=n,$=d,L=m;return c(),h("div",_,[g("div",q,[f(P,{size:"small",inline:!0,model:k.searchForm,class:"demo-form-inline"},{default:b((()=>[f(D,{label:"問題"},{default:b((()=>[f(F,{size:"small",modelValue:k.searchForm.question,"onUpdate:modelValue":a[0]||(a[0]=e=>k.searchForm.question=e),placeholder:"請輸入問題搜尋"},null,8,["modelValue"])])),_:1}),f(D,null,{default:b((()=>[f(x,{size:"small",type:"primary",icon:"Search",onClick:y.onSubmit},{default:b((()=>[j("查詢")])),_:1},8,["onClick"]),f(x,{plain:"",onClick:y.handleOpen},{default:b((()=>[j(" 新增 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),g("div",V,[g("div",w,[C((c(),S(N,{size:"small",data:k.tableData,border:"",style:{width:"100%"}},{default:b((()=>[f(U,{label:"問題",prop:"question"}),f(U,{prop:"answer",label:"回答"}),f(U,{prop:"sort",label:"排序"}),f(U,{prop:"update_time",label:"更新時間"}),f(U,{fixed:"right",label:"操作",width:"110"},{default:b((e=>[f(x,{onClick:a=>y.handleOpen(e.row),type:"text",size:"small"},{default:b((()=>[j("編輯")])),_:2},1032,["onClick"]),f(x,{onClick:a=>y.delClick(e.row),type:"text",size:"small"},{default:b((()=>[j("刪除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[L,k.loading]])]),g("div",z,[f(O,{"onSizeC`han`ge":y.handleSizeChange,onCurrentChange:y.handleCurrentChange,background:"","current-page":k.curPage,"page-size":k.pageSize,layout:"total, prev, pager, next, jumper",total:k.totalDataNumber},null,8,["onSizeC`han`ge","onCurrentChange","current-page","page-size","total"])])]),f($,{modelValue:k.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>k.dialogVisible=e),title:"常見問題",width:"500","before-close":y.handleClose},{footer:b((()=>[g("div",v,[f(x,{onClick:y.handleClose},{default:b((()=>[j("取消")])),_:1},8,["onClick"]),f(x,{loading:k.loading,type:"primary",onClick:y.handleSubmit},{default:b((()=>[j(" 確認 ")])),_:1},8,["loading","onClick"])])])),default:b((()=>[f(P,{model:k.formState,ref:"refFormState","label-width":"auto"},{default:b((()=>[f(D,{label:"常見問題",prop:"question",rules:[{required:!0,message:"請輸入常見問題",trigger:"blur"}]},{default:b((()=>[f(F,{modelValue:k.formState.question,"onUpdate:modelValue":a[1]||(a[1]=e=>k.formState.question=e),placeholder:"請輸入常見問題",clearable:""},null,8,["modelValue"])])),_:1}),f(D,{label:"解答",prop:"answer",rules:[{required:!0,message:"請輸入解答",trigger:"blur"}]},{default:b((()=>[f(F,{modelValue:k.formState.answer,"onUpdate:modelValue":a[2]||(a[2]=e=>k.formState.answer=e),type:"textarea",placeholder:"請輸入解答",clearable:""},null,8,["modelValue"])])),_:1}),f(D,{label:"排序",prop:"sort",rules:[{required:!0,message:"請輸入排序",trigger:"blur"}]},{default:b((()=>[f(F,{modelValue:k.formState.sort,"onUpdate:modelValue":a[3]||(a[3]=e=>k.formState.sort=e),type:"number",placeholder:"數字越小越靠前"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"])])}]]);export{k as default};
