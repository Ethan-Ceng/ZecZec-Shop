import{E as e,a as t,K as a,x as l,y as o,s,t as i,e as r,d as c,f as d,c as p,l as u,i as n,p as m,v as h}from"./element-plus-84a27f94.js";import{P as _}from"./product-6ff3546d.js";import{_ as g}from"./index-5ae5860a.js";import{ap as y,o as b,c as C,a as v,P as f,S as k,W as j,X as w,Q as z,a9 as x,T as S,$ as D,Y as N}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const P={class:"product-list"},V={class:"common-seach-wrap"},F={class:"common-level-rail"},$={class:"product-content"},L={class:"table-wrap"},T={class:"product-info"},q={class:"pic"},U={alt:""},A={class:"info"},E={class:"name"},I={class:"price"},K={key:0},Q={key:1,class:"green"},W={class:"pagination"};const X=g({components:{},data:()=>({activeName:"sell",activeIndex:"0",loading:!0,pageSize:10,totalDataNumber:0,curPage:1,searchForm:{product_name:"",category_id:""},tableData:[],categoryList:[],product_count:{}}),created(){this.getData()},methods:{handleCurrentChange(e){let t=this;t.loading=!0,t.curPage=e,t.getData()},handleSizeChange(e){this.pageSize=e,this.getData()},handleClick(e,t){let a=this;a.curPage=1,a.activeName=e,a.getData()},getData(){let e=this,t=e.searchForm;t.page=e.curPage,t.list_rows=e.pageSize,t.type=e.activeName,e.loading=!0,_.productList(t,!0).then((t=>{e.loading=!1,e.tableData=t.data.list.data,e.categoryList=t.data.category,e.totalDataNumber=t.data.list.total,e.product_count=t.data.product_count})).catch((t=>{e.loading=!1}))},onSubmit(){this.curPage=1,this.getData()},addClick(){this.$router.push("/product/product/add")},editClick(e){this.$router.push({path:"/product/product/edit",query:{product_id:e.product_id,scene:"edit"}})},linkClick:function(t){let a="pages/product/detail/detail?product_id="+t;this.$copyText(a).then((function(t){e({showClose:!0,message:"複製成功",type:"success"})}),(function(t){e({showClose:!0,message:"複製失敗",type:"error"})}))},copyClick(e){this.$router.push({path:"/product/product/edit",query:{product_id:e.product_id,scene:"copy"}})},delClick:function(a){let l=this,o="";o=30==a.product_status?"刪除後不可恢復，確認刪除該記錄嗎?":"刪除後將移動到回收站，確定刪除該記錄嗎?",t.confirm(o,"提示",{type:"warning"}).then((()=>{_.delProduct({product_id:a.product_id}).then((t=>{e({message:"刪除成功",type:"success"}),l.getData()}))}))},changeStatus(a,l){let o=this,s="";10==l?s="確認要上架該商品嗎?":(s="確認要下架該商品嗎?","recovery"==o.activeName&&(s="確認要移動該商品到倉庫嗎?")),t.confirm(s,"提示",{type:"warning"}).then((()=>{_.changeStatus({product_id:a.product_id,state:l}).then((t=>{e({message:"操作成功",type:"success"}),o.getData()}))}))}}},[["render",function(e,t,_,g,X,Y){const B=a,G=l,H=o,J=s,M=i,O=r,R=c,Z=d,ee=p,te=u,ae=n,le=m,oe=y("auth"),se=y("img-url"),ie=h;return b(),C("div",P,[v("div",V,[f(H,{modelValue:X.activeName,"onUpdate:modelValue":t[0]||(t[0]=e=>X.activeName=e),onTabChange:Y.handleClick},{default:k((()=>[f(G,{label:"出售中",name:"sell"},{label:k((()=>[j(" 出售中 "),f(B,{size:"small"},{default:k((()=>[j(w(X.product_count.sell),1)])),_:1})])),_:1}),f(G,{label:"倉庫中",name:"lower"},{label:k((()=>[j(" 倉庫中 "),f(B,{size:"small"},{default:k((()=>[j(w(X.product_count.lower),1)])),_:1})])),_:1}),f(G,{label:"回收站",name:"recovery"},{label:k((()=>[j(" 回收站 "),f(B,{size:"small"},{default:k((()=>[j(w(X.product_count.recovery),1)])),_:1})])),_:1}),f(G,{label:"庫存緊張",name:"stock"},{label:k((()=>[j(" 庫存緊張 "),f(B,{size:"small"},{default:k((()=>[j(w(X.product_count.stock),1)])),_:1})])),_:1}),f(G,{label:"已售罄",name:"over"},{label:k((()=>[j(" 已售罄 "),f(B,{size:"small"},{default:k((()=>[j(w(X.product_count.over),1)])),_:1})])),_:1})])),_:1},8,["modelValue","onTabChange"]),f(ee,{size:"small",inline:!0,model:X.searchForm,class:"demo-form-inline"},{default:k((()=>[f(O,{label:"商品分類"},{default:k((()=>[f(M,{size:"small",modelValue:X.searchForm.category_id,"onUpdate:modelValue":t[1]||(t[1]=e=>X.searchForm.category_id=e),placeholder:"所有分類"},{default:k((()=>[f(J,{label:"全部",value:"0"}),(b(!0),C(z,null,x(X.categoryList,((e,t)=>(b(),S(J,{key:t,label:e.name,value:e.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(O,{label:"商品名稱"},{default:k((()=>[f(R,{size:"small",modelValue:X.searchForm.product_name,"onUpdate:modelValue":t[2]||(t[2]=e=>X.searchForm.product_name=e),placeholder:"請輸入商品名稱"},null,8,["modelValue"])])),_:1}),f(O,null,{default:k((()=>[f(Z,{size:"small",type:"primary",icon:"Search",onClick:Y.onSubmit},{default:k((()=>[j("查詢")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),v("div",F,[D((b(),S(Z,{size:"small",type:"primary",icon:"Plus",onClick:Y.addClick},{default:k((()=>[j("新增產品")])),_:1},8,["onClick"])),[[oe,"/product/product/add"]])]),v("div",$,[v("div",L,[D((b(),S(ae,{size:"small",data:X.tableData,border:"",style:{width:"100%"}},{default:k((()=>[f(te,{prop:"product_name",label:"產品",width:"400px"},{default:k((e=>[v("div",T,[v("div",q,[D(v("img",U,null,512),[[se,e.row.image[0].file_path]])]),v("div",A,[v("div",E,w(e.row.product_name),1),v("div",I,"￥"+w(e.row.product_price),1)])])])),_:1}),f(te,{prop:"category.name",label:"分類"}),f(te,{prop:"type_text",label:"商品大分類"}),f(te,{label:"商品起始時間",width:"290"},{default:k((e=>[j(w(e.row.active_time.join(" 至 ")),1)])),_:1}),f(te,{prop:"target_money",label:"目標金額"}),f(te,{prop:"total_money",label:"計劃內訂單總金額"}),f(te,{prop:"sales_actual",label:"實際銷量"}),f(te,{prop:"product_stock",label:"庫存"}),f(te,{prop:"view_times",label:"點選數"}),f(te,{prop:"product_status.text",label:"商品屬性"},{default:k((e=>[0==e.row.is_virtual?(b(),C("span",K,"實物商品")):N("",!0),1==e.row.is_virtual?(b(),C("span",Q,"虛擬商品")):N("",!0)])),_:1}),f(te,{prop:"create_time",label:"釋出時間"}),f(te,{prop:"product_sort",label:"排序"}),f(te,{fixed:"right",label:"操作",width:"210"},{default:k((e=>[D((b(),S(Z,{onClick:t=>Y.editClick(e.row),type:"text",size:"small"},{default:k((()=>[j("編輯")])),_:2},1032,["onClick"])),[[oe,"/product/product/edit"]]),"sell"==X.activeName?D((b(),S(Z,{key:0,onClick:t=>Y.changeStatus(e.row,20),type:"text",size:"small"},{default:k((()=>[j("下架")])),_:2},1032,["onClick"])),[[oe,"/product/product/edit"]]):N("",!0),"lower"==X.activeName?D((b(),S(Z,{key:1,onClick:t=>Y.changeStatus(e.row,10),type:"text",size:"small"},{default:k((()=>[j("上架")])),_:2},1032,["onClick"])),[[oe,"/product/product/edit"]]):N("",!0),"recovery"==X.activeName?D((b(),S(Z,{key:2,onClick:t=>Y.changeStatus(e.row,20),type:"text",size:"small"},{default:k((()=>[j("恢復")])),_:2},1032,["onClick"])),[[oe,"/product/product/edit"]]):N("",!0),D((b(),S(Z,{onClick:t=>Y.delClick(e.row),type:"text",size:"small"},{default:k((()=>[j("刪除")])),_:2},1032,["onClick"])),[[oe,"/product/product/delete"]]),D((b(),S(Z,{onClick:t=>Y.copyClick(e.row),type:"text",size:"small"},{default:k((()=>[j("複製")])),_:2},1032,["onClick"])),[[oe,"/product/product/copy"]]),f(Z,{onClick:t=>Y.linkClick(e.row.product_id),type:"text",size:"small"},{default:k((()=>[j("連結")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[ie,X.loading]])])]),v("div",W,[f(le,{onSizeChange:Y.handleSizeChange,onCurrentChange:Y.handleCurrentChange,background:"","current-page":X.curPage,"page-size":X.pageSize,layout:"total, prev, pager, next, jumper",total:X.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])}]]);export{X as default};
