import{d as e,s as a,t as l,f as t,q as s,E as d,l as i,i as r,p as o,v as u,a as n,B as c,C as p,m as _,e as m,c as y,D as v,x as f,y as g,g as b,k as h,F as k,G as x}from"./element-plus-84a27f94.js";import{D as V}from"./data-05520354.js";import{_ as C,d as w}from"./index-5ae5860a.js";import{o as D,T as z,S as j,P as L,W as S,c as U,Q as P,a9 as N,Y as E,ap as $,a as F,$ as I,ae as O,X as A,M as R}from"./@vue-8fe4574d.js";import{O as q}from"./order-10f620ac.js";import J from"./Add-d4592e76.js";import{L as M}from"./viewLogistics-484ccb9e.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const Q=C({data:()=>({dialogVisible:!1,type:"error",params:null,reverse:!1,order_id:0,activities:[],areaList:[],address:{name:"",phone:"",region:{province:"",province_id:"",city:"",city_id:"",region:"",region_id:"",detail:""}}}),props:["isChange","addressData"],watch:{isChange:function(e,a){e!=a&&(this.dialogVisible=e,this.type="error")}},mounted(){this.getData()},methods:{getData(){let e=this;V.getRegion({},!0).then((a=>{e.areaList=a.data.regionData})).catch((e=>{}))},initCity(){this.addressData.city_id=""},initRegion(){this.addressData.region_id=""},dialogFormVisible(e){e?this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.addressData}):this.$emit("closeDialog",!1)}}},[["render",function(d,i,r,o,u,n){const c=e,p=a,_=l,m=t,y=s;return D(),z(y,{title:"修改地址",modelValue:u.dialogVisible,"onUpdate:modelValue":i[8]||(i[8]=e=>u.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:j((()=>[L(m,{size:"small",onClick:i[6]||(i[6]=e=>n.dialogFormVisible(!1))},{default:j((()=>[S("取 消")])),_:1}),L(m,{size:"small",type:"primary",onClick:i[7]||(i[7]=e=>n.dialogFormVisible(!0))},{default:j((()=>[S("確 定")])),_:1})])),default:j((()=>[L(c,{class:"mb16",size:"small",modelValue:r.addressData.name,"onUpdate:modelValue":i[0]||(i[0]=e=>r.addressData.name=e),placeholder:"請輸入收貨人"},null,8,["modelValue"]),L(c,{class:"mb16",size:"small",modelValue:r.addressData.phone,"onUpdate:modelValue":i[1]||(i[1]=e=>r.addressData.phone=e),placeholder:"請輸入收貨電話"},null,8,["modelValue"]),L(_,{class:"mb16",modelValue:r.addressData.province_id,"onUpdate:modelValue":i[2]||(i[2]=e=>r.addressData.province_id=e),placeholder:"省",onChange:n.initCity},{default:j((()=>[(D(!0),U(P,null,N(u.areaList,((e,a)=>(D(),z(p,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),""!=r.addressData.province_id?(D(),z(_,{key:0,class:"mb16 ml10",modelValue:r.addressData.city_id,"onUpdate:modelValue":i[3]||(i[3]=e=>r.addressData.city_id=e),placeholder:"市",onChange:n.initRegion},{default:j((()=>[(D(!0),U(P,null,N(u.areaList[r.addressData.province_id].city,((e,a)=>(D(),z(p,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):E("",!0),""!=r.addressData.city_id?(D(),z(_,{key:1,class:"mb16 ml10",modelValue:r.addressData.region_id,"onUpdate:modelValue":i[4]||(i[4]=e=>r.addressData.region_id=e),placeholder:"區"},{default:j((()=>[(D(!0),U(P,null,N(u.areaList[r.addressData.province_id].city[r.addressData.city_id].region,((e,a)=>(D(),z(p,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):E("",!0),L(c,{class:"mb16",size:"small",modelValue:r.addressData.detail,"onUpdate:modelValue":i[5]||(i[5]=e=>r.addressData.detail=e),placeholder:"請輸入詳細地址"},null,8,["modelValue"])])),_:1},8,["modelValue"])}]]),T={class:"product-content"},W={class:"table-wrap"},B={key:0,width:30,height:30},G={class:"pagination"},K={class:"dialog-footer"};const X={components:{Add:J,changeAddress:Q,ProductSelect:C({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},categoryList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null,check_ds:null,product_arr:[],beforeDeliveryNumIds:[]}),props:["is_product","exclude_ids","islist","product_list"],created(){},methods:{open(e){this.beforeDeliveryNumIds=e,this.type="error",this.dialogVisible=!0,this.loading=!1,this.$refs.tableRef&&this.$refs.tableRef.clearSelection(),this.$nextTick((()=>{this.getData()}))},selectableFunc:e=>"boolean"!=typeof e.no_choose||e.no_choose,closeCheck(){this.dialogVisible=!1},getData(){let e=this,a=this.$props.exclude_ids,l=JSON.parse(JSON.stringify(this.$props.product_list));e.islist?l.forEach((l=>{a&&a.length>0&&(a.indexOf(l.product_id)>-1?l.no_choose=!1:l.no_choose=!0),(l.total_num==l.delivery_num||l.delivery_num>l.total_num)&&(l.no_choose=!1),e.beforeDeliveryNumIds&&e.beforeDeliveryNumIds.length>0&&e.beforeDeliveryNumIds.forEach((e=>{if(e.product_id==l.product_id){let a=Number(e.delivery_num);l.delivery_num=a}}))})):e.islist||l.forEach((e=>{e.no_choose=!0})),this.product_arr=l},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let e=this,a=null;if(e.multipleSelection.length<1)return void d({message:"請至少選擇一件產品商品！",type:"error"});let l=[],t=[];e.multipleSelection.forEach((e=>{let a={order_product_id:e.order_product_id,maxDeliveryNum:Number(e.total_num)-Number(e.delivery_num||0),total_num:e.total_num,delivery_num:Number(e.total_num)-Number(e.delivery_num||0),image_path:e.image?e.image.file_path:e.image_path,product_name:e.product_name,product_id:e.product_id};l.push(a),t.push(e.product_id)})),a=l,e.params=a,e.check_ds=t,e.type="success",this.$emit("closeDialog",{params:this.params,check_ds:this.check_ds}),e.dialogVisible=!1},tableCurrentChange(e){let a=this.$props.exclude_ids,l=[];e&&e.length>0&&e.forEach((e=>{a.includes(e.product_id)||l.push(e)})),this.multipleSelection=l}}},[["render",function(e,a,l,d,n,c){const p=i,_=t,m=r,y=o,v=s,f=$("img-url"),g=u;return D(),z(v,{title:"選擇商品","modal-append-to-body":!0,"append-to-body":!0,modelValue:n.dialogVisible,"onUpdate:modelValue":a[0]||(a[0]=e=>n.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:j((()=>[F("div",K,[L(_,{size:"small",onClick:c.closeCheck},{default:j((()=>[S("取 消")])),_:1},8,["onClick"]),l.islist?(D(),z(_,{key:0,size:"small",type:"primary",onClick:c.addClerk},{default:j((()=>[S("確 定")])),_:1},8,["onClick"])):E("",!0)])])),default:j((()=>[F("div",T,[F("div",W,[I((D(),z(m,{size:"small",data:n.product_arr,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:c.tableCurrentChange,ref:"tableRef"},{default:j((()=>[L(p,{width:"70",label:"商品圖片"},{default:j((e=>[e.row.image?I((D(),U("img",B,null,512)),[[f,e.row.image.file_path]]):E("",!0)])),_:1}),L(p,{prop:"product_name",label:"商品名稱"}),L(p,{prop:"total_num",width:"100",label:"商品數量"}),L(p,{prop:"create_time",width:"140",label:"新增時間"}),l.islist?(D(),z(p,{key:0,type:"selection",selectable:c.selectableFunc,width:"44"},null,8,["selectable"])):E("",!0),l.islist?E("",!0):(D(),z(p,{key:1,width:"80",label:"單選"},{default:j((e=>[e.row.no_choose?(D(),z(_,{key:0,size:"small",onClick:a=>c.SingleFunc(e.row)},{default:j((()=>[S("選擇")])),_:2},1032,["onClick"])):(D(),z(_,{key:1,size:"small",disabled:""},{default:j((()=>[S("已選")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[g,n.loading]])]),F("div",G,[L(y,{background:"","current-page":n.curPage,"page-sizes":[2,10,20,50,100],"page-size":n.pageSize,layout:"total, prev, pager, next, jumper",total:n.totalDataNumber},null,8,["current-page","page-size","total"])])])])),_:1},8,["modelValue"])}],["__scopeId","data-v-1ebdf6a3"]]),Logistics:M},data:()=>({active:0,loading:!0,detail:{pay_status:[],pay_type:[],delivery_type:[],user:{},address:[],product:[],order_status:[],extract:[],extract_store:[],express:[],delivery_status:[],extractClerk:[]},open_add:!1,pageSize:20,totalDataNumber:0,curPage:1,form:{express_id:null,express_no:"",is_single:1,delivery_list:[],is_label:0},forms:{is_cancel:1,is_single:1},extract_form:{order:{extract_status:1}},virtual_form:{virtual_content:""},order:{},delivery_type:0,exStyle:[],shopList:[],userModel:{},create_time:"",expressList:[],shopClerkList:[],open_edit:!1,isChange:!1,addressData:null,current_index:0,template_list:[],address_list:[],label_list:[],product_list:[],exclude_ids:[],isLogistics:!1,logisticsData:{},custom_form:[]}),created(){this.getParams()},methods:{getLogistics(e){let a=this,l={order_id:e.order_id,express_id:e.express_id,express_no:e.express_no};a.loading=!0,q.orderExpress(l,!0).then((e=>{a.loading=!1,a.logisticsData=e.data.express.list,a.openLogistics()})).catch((e=>{a.loading=!1}))},openLogistics(){this.isLogistics=!0},closeLogistics(){this.isLogistics=!1},addPackage(){this.form.delivery_list=this.form.delivery_list||[],this.form.delivery_list.push({express_id:"",express_no:"",delivery_data:[]})},delPackage(e){let a=this.form.delivery_list[e].delivery_data,l=[];a.forEach((e=>{l.push(e.product_id)})),this.filterExcludeIds(l),this.form.delivery_list.splice(e,1)},addProduct(e){let a=[],l=[],t=[];this.form.delivery_list.forEach((e=>{e.delivery_data.forEach((e=>{if(l.includes(e.product_id)){let l=a.findIndex((a=>a.product_id==e.product_id));if(-1!=l){let s=a[l],d=Number(s.delivery_num)+Number(e.delivery_num);a[l].delivery_num=d,(e.total_num==d||e.total_num<d)&&t.push(e.product_id)}}else l.push(e.product_id),a.push({product_id:e.product_id,delivery_num:e.delivery_num}),(e.total_num==e.delivery_num||e.total_num<e.delivery_num)&&t.push(e.product_id)}))})),this.current_index=e,this.exclude_ids=t,this.$refs.ProductSelectRef.open(a)},delProduct(e,a){this.filterExcludeIds([e[a].product_id]),e.splice(a,1)},labelCancel(e){let a=this,l=e.order_id,t=0;e.order_delivery_id&&e.order_delivery_id>0&&(l=e.order_delivery_id,t=1),n.confirm("確定取消嗎?","提示",{type:"warning"}).then((()=>{q.labelCancel({order_id:l,is_multi:t},!0).then((e=>{a.loading=!1,d({message:"取消成功",type:"success"}),a.getParams()})).catch((e=>{a.loading=!1}))})).catch((()=>{d({type:"info",message:"取消失敗"})}))},printOld(e){let a=this,l=e.order_id,t=0;e.order_delivery_id&&e.order_delivery_id>0&&(l=e.order_delivery_id,t=1),n.confirm("最多可復打10次,確定復打嗎?","提示",{type:"warning"}).then((()=>{q.printOld({order_id:l,is_multi:t},!0).then((e=>{a.loading=!1,d({message:"復打成功",type:"success"}),a.getParams()})).catch((e=>{a.loading=!1}))})).catch((()=>{d({type:"info",message:"復打失敗"})}))},filterExcludeIds(e){e.forEach((e=>{let a=this.exclude_ids.indexOf(e);a>-1&&this.exclude_ids.splice(a,1)}))},closeProductDialogFunc(e){let a=this.form.delivery_list[this.current_index].delivery_data||[],l=e.params||[],t=a.concat(l),s=[],d=[];t.forEach((e=>{if(d.includes(e.product_id)){let a=s.findIndex((a=>a.product_id==e.product_id));-1!=a&&(s[a].delivery_num=Number(s[a].delivery_num)+Number(e.delivery_num))}else d.push(e.product_id),s.push(e)})),this.exclude_ids=this.exclude_ids.concat(e.checkIds),this.form.delivery_list[this.current_index].delivery_data=s},next(){this.active++>4&&(this.active=0)},getParams(){let e=this;const a=this.$route.query.order_id;q.orderdetail({order_id:a},!0).then((a=>{e.loading=!1,e.detail=a.data.detail,e.expressList=a.data.expressList,e.shopClerkList=a.data.shopClerkList,e.addressData=e.detail.address,e.product_list=a.data.detail.product,e.template_list=a.data.template_list,e.address_list=a.data.address_list,e.custom_form=e.detail.custom_form,e.label_list=a.data.label_list,30==e.detail.delivery_status.value&&(e.form.is_single=0)})).catch((a=>{e.loading=!1}))},onSubmit(){let e=this,a=JSON.parse(JSON.stringify(e.form)),l=this.$route.query.order_id,t=[],s=[],i=[],r=[],o=!0,u=!1;return!a.is_single||!a.is_label||a.setting_id&&a.template_id&&a.address_id?(a.is_single||a.delivery_list.forEach(((e,a)=>{if(e.delivery_data&&e.delivery_data.length>0){let a=[];e.delivery_data.forEach((e=>{s.includes(e.product_id)?t.forEach((a=>{if(a.product_id==e.product_id){let l=Number(e.delivery_num)+Number(a.delivery_num);a.delivery_num=l}a.delivery_num>e.total_num&&a.product_id==e.product_id&&(o=!1,r.includes(e.product_id)||(r.push(e.product_id),i.push({product_id:e.product_id,product_name:e.product_name,total_num:e.total_num})))})):(s.push(e.product_id),t.push({product_id:e.product_id,delivery_num:e.delivery_num,product_name:e.product_name}),e.delivery_num>e.total_num&&(i.push({product_id:e.product_id,product_name:e.product_name,total_num:e.total_num}),r.push(e.product_id),o=!1)),a.push({order_product_id:e.order_product_id,delivery_num:e.delivery_num,image_path:e.image_path,product_name:e.product_name})})),e.delivery_data=a}else o=!1,u=!0})),o?(a.order_id=l,void q.delivery(a,!0).then((a=>{e.loading=!1,d({message:"恭喜你，發貨成功",type:"success"}),e.form={},e.getParams()})).catch((a=>{e.loading=!1}))):u?void d.error("無法新增空包裹，請選擇商品"):void(i&&i.length>0&&i.forEach((e=>{d.error(`${e.product_name}最多隻能選擇${e.total_num}個`)})))):d.error("電子面單相關資訊請填寫完整")},closeAddress(e){let a=this;if(0==e)return a.isChange=!1,!1;let l=e.params;l.order_id=a.$route.query.order_id,q.updateAddress(l,!0).then((e=>{a.getParams(),d({message:"修改成功",type:"success"})})).catch((e=>{})),a.isChange=!1},confirmCancel(){let e=this,a=this.$route.query.order_id,l=e.forms.is_cancel;q.confirm({order_id:a,is_cancel:l},!0).then((a=>{e.loading=!1,d({message:"恭喜你，稽核成功",type:"success"}),e.getParams()})).catch((a=>{e.loading=!1}))},onExtract(e){let a=this,l=a.extract_form;l.order_id=e,q.extract({extract_form:l},!0).then((e=>{a.loading=!1,d({message:"恭喜你，操作成功",type:"success"}),a.getParams()})).catch((e=>{a.loading=!1}))},onVirtual(e){let a=this,l=a.virtual_form;""!=l.virtual_content?(l.order_id=e,q.virtual({order_id:l.order_id,virtual_content:l.virtual_content},!0).then((e=>{a.loading=!1,d({message:"恭喜你，操作成功",type:"success"}),a.getParams()})).catch((e=>{a.loading=!1}))):d.error("請填寫發貨資訊")},editClick(e){this.userModel=w(e),this.open_edit=!0},closeDialogFunc(e,a){e&&"edit"==a&&(this.open_edit=e.openDialog,this.getParams())},cancelFunc(){this.$router.back(-1)},changeAdd(){this.isChange=!0}}},Y={class:"pb100",style:{"padding-bottom":"100px"}},H={class:"product-content"},Z=F("div",{class:"common-form"},"基本資訊",-1),ee={class:"table-wrap"},ae={class:"pb16"},le=F("span",{class:"gray9"},"訂單號：",-1),te={class:"pb16"},se=F("span",{class:"gray9"},"買家：",-1),de={class:"pb16"},ie=F("span",{class:"gray9"},"訂單金額 (元)：",-1),re={class:"pb16"},oe=F("span",{class:"gray9"},"運費金額 (元)：",-1),ue={class:"pb16"},ne=F("span",{class:"gray9"},"優惠券抵扣 (元)：",-1),ce={class:"pb16"},pe=F("span",{class:"gray9"},"積分抵扣 (元)：",-1),_e={class:"pb16"},me=F("span",{class:"gray9"},"滿減金額 (元)：",-1),ye={class:"pb16"},ve=F("span",{class:"gray9"},"定金：",-1),fe={class:"pb16"},ge=F("span",{class:"gray9"},"尾款：",-1),be={class:"pb16"},he=F("span",{class:"gray9"},"尾款立減：",-1),ke={class:"pb16"},xe=F("span",{class:"gray9"},"實付款金額 (元)：",-1),Ve={key:0},Ce={key:0,class:"pb16"},we=F("span",{class:"gray9"},"支付方式：",-1),De={key:1},ze=F("span",{class:"gray9"},"支付方式：",-1),je={key:1},Le=F("span",{class:"gray9"},"支付方式：",-1),Se={class:"pb16"},Ue=F("span",{class:"gray9"},"配送方式：",-1),Pe={class:"pb16"},Ne=F("span",{class:"gray9"},"下單時間：",-1),Ee={class:"pb16"},$e=F("span",{class:"gray9"},"完成時間：",-1),Fe={class:"pb16"},Ie=F("span",{class:"gray9"},"交易狀態：",-1),Oe=F("div",{class:"common-form mt16"},"商品資訊",-1),Ae={class:"table-wrap"},Re={class:"product-info"},qe={class:"pic"},Je={class:"info"},Me={class:"name"},Qe={key:0,class:"red"},Te={key:0,class:"gray9"},We={key:1,class:"orange"},Be={class:"price"},Ge={key:0,class:"ml10"},Ke={key:0},Xe={key:1},Ye=F("div",{class:"common-form mt16"},"收貨資訊",-1),He={class:"table-wrap"},Ze={class:"pb16"},ea=F("span",{class:"gray9"},"收貨人：",-1),aa={class:"pb16"},la=F("span",{class:"gray9"},"收貨電話：",-1),ta={class:"pb16"},sa=F("span",{class:"gray9"},"收貨地址：",-1),da={class:"pb16"},ia={class:"pb16"},ra=F("span",{class:"gray9"},"備註：",-1),oa=F("div",{class:"common-form mt16"},"自提使用者資訊",-1),ua={key:0,class:"table-wrap"},na={class:"pb16"},ca=F("span",{class:"gray9"},"聯絡人：",-1),pa={class:"pb16"},_a=F("span",{class:"gray9"},"聯絡電話：",-1),ma={class:"pb16"},ya=F("span",{class:"gray9"},"備註：",-1),va=F("div",{class:"common-form mt16"},"自提資訊",-1),fa={key:1,class:"table-wrap"},ga={class:"pb16"},ba=F("span",{class:"gray9"},"門店ID：",-1),ha={class:"pb16"},ka=F("span",{class:"gray9"},"門店名稱：",-1),xa={class:"pb16"},Va=F("span",{class:"gray9"},"聯絡人：",-1),Ca={class:"pb16"},wa=F("span",{class:"gray9"},"聯絡電話：",-1),Da={class:"pb16"},za=F("span",{class:"gray9"},"門店地址：",-1),ja=F("div",{class:"common-form mt16"},"使用者資訊",-1),La={class:"table-wrap"},Sa={class:"pb16"},Ua=F("span",{class:"gray9"},"聯絡手機：",-1),Pa={class:"pb16"},Na=F("span",{class:"gray9"},"備註：",-1),Ea={key:4},$a=F("div",{class:"common-form mt16"},"付款資訊",-1),Fa={class:"table-wrap"},Ia={class:"pb16"},Oa=F("span",{class:"gray9"},"應付款金額：",-1),Aa={class:"pb16"},Ra=F("span",{class:"gray9"},"支付方式：",-1),qa={class:"pb16"},Ja=F("span",{class:"gray9"},"支付流水號：",-1),Ma={class:"pb16"},Qa=F("span",{class:"gray9"},"付款狀態：",-1),Ta={class:"pb16"},Wa=F("span",{class:"gray9"},"付款時間：",-1),Ba={key:5},Ga=F("div",{class:"common-form mt16"},"使用者取消訂單",-1),Ka=F("p",{class:"red pb16"},"當前買家已付款並申請取消訂單，請稽核是否同意，如同意則自動退回付款金額（微信支付原路退款）並關閉訂單。",-1),Xa={key:6},Ya={key:0},Ha=F("div",{class:"common-form mt16"},"發貨資訊",-1),Za={class:"table-wrap"},el={key:0},al={class:"pb16"},ll=F("span",{class:"gray9"},"物流公司：",-1),tl={class:"pb16"},sl=F("span",{class:"gray9"},"物流單號：",-1),dl={class:"pb16"},il=F("span",{class:"gray9"},"發貨狀態：",-1),rl={class:"pb16"},ol=F("span",{class:"gray9"},"發貨時間：",-1),ul={class:"pb16 d-s-s"},nl=F("div",{class:"gray9"},"電子面單：",-1),cl={key:1},pl={class:"pic"},_l={class:"info d-b-s d-c"},ml={class:"name"},yl={class:"price"},vl={key:1,class:"pb50"},fl=F("div",{class:"common-form mt16"},"去發貨",-1),gl={class:"d-s-c mb16"},bl={class:"ml10"},hl={class:"d-s-c"},kl=F("div",null,"多運單發貨",-1),xl={class:"d-s-s mt16"},Vl={class:"package-pre"},Cl={class:"flex-1"},wl={class:"ww100"},Dl={class:"d-s-c"},zl=["onClick"],jl={width:60},Ll=["onClick"],Sl=F("div",{class:"common-form mt16"},"表單資訊",-1),Ul={class:"table-wrap"},Pl={class:"table-wrap"},Nl={class:"list"},El=["span"],$l={key:8,class:"table-wrap"},Fl=F("div",{class:"common-form mt16"},"取消資訊",-1),Il={class:"table-wrap"},Ol={class:"pb16"},Al=F("span",{class:"gray9"},"商家備註：",-1),Rl={key:9},ql=F("div",{class:"common-form mt16"},"門店自提核銷",-1),Jl={key:0},Ml={key:1,class:"table-wrap"},Ql={class:"pb16"},Tl=F("span",{class:"gray9"},"自提門店名稱：",-1),Wl={class:"pb16"},Bl=F("span",{class:"gray9"},"核銷員：",-1),Gl={class:"pb16"},Kl=F("span",{class:"gray9"},"核銷狀態：",-1),Xl={class:"pb16"},Yl=F("span",{class:"gray9"},"核銷時間：",-1),Hl={key:10},Zl=F("div",{class:"common-form mt16"},"虛擬商品發貨",-1),et={key:0},at={key:1,class:"table-wrap"},lt={class:"pb16"},tt=F("span",{class:"gray9"},"發貨資訊：",-1),st={class:"pb16"},dt=F("span",{class:"gray9"},"發貨狀態：",-1),it={class:"pb16"},rt=F("span",{class:"gray9"},"發貨時間：",-1),ot={class:"common-button-wrapper"};const ut=C(X,[["render",function(s,d,o,n,V,C){const w=c,q=t,J=p,M=O("Add"),T=i,W=r,B=_,G=m,K=y,X=v,ut=f,nt=g,ct=b,pt=a,_t=l,mt=e,yt=O("QuestionFilled"),vt=h,ft=k,gt=x,bt=Q,ht=O("ProductSelect"),kt=O("Logistics"),xt=$("auth"),Vt=$("img-url"),Ct=u;return I((D(),U("div",Y,[F("div",H,[Z,F("div",ee,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",ae,[le,S(" "+A(V.detail.order_no),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",te,[se,S(" "+A(V.detail.user.nickName)+" ",1),F("span",null,"使用者ID：("+A(V.detail.user.user_id)+")",1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",de,[ie,S(" "+A(V.detail.order_price),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",re,[oe,S(" "+A(V.detail.express_price),1)])])),_:1}),V.detail.coupon_money>0?(D(),z(w,{key:0,span:5},{default:j((()=>[F("div",ue,[ne,S(" "+A(V.detail.coupon_money),1)])])),_:1})):E("",!0),V.detail.points_money>0?(D(),z(w,{key:1,span:5},{default:j((()=>[F("div",ce,[pe,S(" "+A(V.detail.points_money),1)])])),_:1})):E("",!0),V.detail.fullreduce_money>0?(D(),z(w,{key:2,span:5},{default:j((()=>[F("div",_e,[me,S(" "+A(V.detail.fullreduce_money),1)])])),_:1})):E("",!0),80==V.detail.order_source?(D(),z(w,{key:3,span:5},{default:j((()=>[F("div",ye,[ve,S(" "+A(V.detail.advance.pay_price),1)])])),_:1})):E("",!0),80==V.detail.order_source?(D(),z(w,{key:4,span:5},{default:j((()=>[F("div",fe,[ge,S(" "+A(V.detail.total_price),1)])])),_:1})):E("",!0),80==V.detail.order_source&&V.detail.advance.reduce_money?(D(),z(w,{key:5,span:5},{default:j((()=>[F("div",be,[he,S(" "+A(V.detail.advance.reduce_money),1)])])),_:1})):E("",!0),L(w,{span:5},{default:j((()=>[F("div",ke,[xe,S(" "+A(V.detail.pay_price),1)])])),_:1}),L(w,{span:5},{default:j((()=>[20==V.detail.pay_status.value?(D(),U("div",Ve,[10!=V.detail.pay_type.value&&V.detail.balance>0?(D(),U("div",Ce,[we,S(" "+A(V.detail.pay_type.text)+"("+A(V.detail.online_money)+")+ 餘額支付("+A(V.detail.balance)+") ",1)])):(D(),U("div",De,[ze,S(A(V.detail.pay_type.text),1)]))])):(D(),U("div",je,[Le,S(A(V.detail.pay_type.text),1)]))])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Se,[Ue,S(" "+A(V.detail.delivery_type.text),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Pe,[Ne,S(" "+A(V.detail.create_time),1)])])),_:1}),V.detail.receipt_time?(D(),z(w,{key:6,span:5},{default:j((()=>[F("div",Ee,[$e,S(" "+A(V.detail.receipt_time),1)])])),_:1})):E("",!0),L(w,{span:5},{default:j((()=>[F("div",Fe,[Ie,S(" "+A(V.detail.order_status.text),1)])])),_:1}),10==V.detail.pay_status.value&&10==V.detail.order_status.value&&10==V.detail.order_source?I((D(),z(w,{key:7,span:5},{default:j((()=>[L(q,{onClick:d[0]||(d[0]=e=>C.editClick(V.detail)),size:"small"},{default:j((()=>[S("修改價格")])),_:1})])),_:1})),[[xt,"/order/order/updatePrice"]]):E("",!0)])),_:1})]),V.open_edit?(D(),z(M,{key:0,open_edit:V.open_edit,order:V.userModel,onClose:d[1]||(d[1]=e=>C.closeDialogFunc(e,"edit"))},null,8,["open_edit","order"])):E("",!0),Oe,F("div",Ae,[L(W,{size:"small",data:V.detail.product,border:"",style:{width:"100%"}},{default:j((()=>[L(T,{prop:"product_name",label:"商品",width:"400"},{default:j((e=>[F("div",Re,[F("div",qe,[I(F("img",null,null,512),[[Vt,e.row.image.file_path]])]),F("div",Je,[F("div",Me,[S(A(e.row.product_name)+" ",1),1==e.row.is_gift?(D(),U("span",Qe,"贈品")):E("",!0)]),""!=e.row.product_attr?(D(),U("div",Te,A(e.row.product_attr),1)):E("",!0),e.row.refund?(D(),U("div",We,A(e.row.refund.type.text)+"-"+A(e.row.refund.status.text),1)):E("",!0),F("div",Be,[F("span",{class:R({"text-d-line":1==e.row.is_user_grade,gray6:1!=e.row.is_user_grade})},"￥ "+A(e.row.product_price),3),1==e.row.is_user_grade?(D(),U("span",Ge," 會員折扣價：￥ "+A(e.row.grade_product_price),1)):E("",!0)])])])])),_:1}),L(T,{prop:"product_no",label:"商品編碼"}),L(T,{prop:"product_weight",label:"重量 (Kg)"}),L(T,{prop:"total_num",label:"購買數量"},{default:j((e=>[F("p",null,"x "+A(e.row.total_num),1)])),_:1}),L(T,{prop:"total_price",label:"商品總價(元)"},{default:j((e=>[F("p",null,"￥ "+A(e.row.total_price),1)])),_:1}),L(T,{label:"表單資訊"},{default:j((e=>[e.row.table_record_id>0?(D(),U("div",Ke,[(D(!0),U(P,null,N(e.row.tableData,((e,a)=>(D(),U("div",{key:a},A(e.name)+":"+A(e.value),1)))),128))])):E("",!0)])),_:1})])),_:1},8,["data"])]),10==V.detail.delivery_type.value?(D(),U("div",Xe,[Ye,F("div",He,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",Ze,[ea,S(" "+A(V.detail.address.name),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",aa,[la,S(" "+A(V.detail.address.phone),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",ta,[sa,S(" "+A(V.detail.address.region.province)+" "+A(V.detail.address.region.city)+" "+A(V.detail.address.region.region)+" "+A(V.detail.address.detail),1)])])),_:1}),20!=V.detail.delivery_status.value&&10==V.detail.order_status.value?(D(),z(w,{key:0,span:5},{default:j((()=>[F("div",da,[L(q,{type:"primary",link:"",size:"small",onClick:C.changeAdd},{default:j((()=>[S(" 修改地址")])),_:1},8,["onClick"])])])),_:1})):E("",!0)])),_:1}),L(J,null,{default:j((()=>[L(w,{span:25},{default:j((()=>[F("div",ia,[ra,S(" "+A(V.detail.buyer_remark),1)])])),_:1})])),_:1})])])):E("",!0),20==V.detail.delivery_type.value?(D(),U(P,{key:2},[oa,V.detail.extract?(D(),U("div",ua,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",na,[ca,S(" "+A(V.detail.extract.linkman),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",pa,[_a,S(" "+A(V.detail.extract.phone),1)])])),_:1})])),_:1}),L(J,null,{default:j((()=>[L(w,{span:25},{default:j((()=>[F("div",ma,[ya,S(" "+A(V.detail.buyer_remark),1)])])),_:1})])),_:1})])):E("",!0),va,V.detail.extract?(D(),U("div",fa,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",ga,[ba,S(" "+A(V.detail.extractStore.store_id),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",ha,[ka,S(" "+A(V.detail.extractStore.store_name),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",xa,[Va,S(" "+A(V.detail.extractStore.linkman),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Ca,[wa,S(" "+A(V.detail.extractStore.phone),1)])])),_:1}),L(w,{span:15},{default:j((()=>[F("div",Da,[za,S(" "+A(V.detail.extractStore.region.province)+"- "+A(V.detail.extractStore.region.city)+"- "+A(V.detail.extractStore.region.region)+"- "+A(V.detail.extractStore.address),1)])])),_:1})])),_:1})])):E("",!0)],64)):E("",!0),30==V.detail.delivery_type.value?(D(),U(P,{key:3},[ja,F("div",La,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",Sa,[Ua,S(" "+A(V.detail.user.mobile),1)])])),_:1})])),_:1}),L(J,null,{default:j((()=>[L(w,{span:25},{default:j((()=>[F("div",Pa,[Na,S(" "+A(V.detail.buyer_remark),1)])])),_:1})])),_:1})])],64)):E("",!0),20==V.detail.pay_status.value?(D(),U("div",Ea,[$a,F("div",Fa,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",Ia,[Oa,S(" "+A(V.detail.pay_price),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Aa,[Ra,S(" "+A(V.detail.pay_type.text),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",qa,[Ja,S(" "+A(V.detail.transaction_id),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Ma,[Qa,S(" "+A(V.detail.pay_status.text),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Ta,[Wa,S(" "+A(V.detail.pay_time),1)])])),_:1})])),_:1})])])):E("",!0),20==V.detail.pay_status.value&&21==V.detail.order_status.value?I((D(),U("div",Ba,[Ga,Ka,L(K,{size:"small",ref:"forms",model:V.forms},{default:j((()=>[L(G,{label:"稽核狀態"},{default:j((()=>[F("div",null,[L(B,{modelValue:V.forms.is_cancel,"onUpdate:modelValue":d[2]||(d[2]=e=>V.forms.is_cancel=e),label:1},{default:j((()=>[S("同意")])),_:1},8,["modelValue"]),L(B,{modelValue:V.forms.is_cancel,"onUpdate:modelValue":d[3]||(d[3]=e=>V.forms.is_cancel=e),label:0},{default:j((()=>[S("拒絕")])),_:1},8,["modelValue"])])])),_:1})])),_:1},8,["model"])])),[[xt,"/order/operate/confirmCancel"]]):E("",!0),20!=V.detail.pay_status.value||10!=V.detail.delivery_type.value||-1!==[20,21].indexOf(V.detail.order_status.value)||V.detail.assemble_status&&20!=V.detail.assemble_status?E("",!0):I((D(),U("div",Xa,[20==V.detail.delivery_status.value||30==V.detail.delivery_status.value?(D(),U("div",Ya,[Ha,F("div",Za,[10==V.detail.delivery_type.value&&0==V.detail.is_single?(D(),U("div",el,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",al,[ll,S(" "+A(V.detail.express.express_name),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",tl,[sl,S(" "+A(V.detail.express_no),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",dl,[il,S(" "+A(V.detail.delivery_status.text),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",rl,[ol,S(" "+A(V.detail.delivery_time),1)])])),_:1}),V.detail.is_label?(D(),z(w,{key:0,span:5},{default:j((()=>[F("div",ul,[nl,L(X,{style:{width:"100px"},src:V.detail.label,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[V.detail.label],"initial-index":0,fit:"cover"},null,8,["src","zoom-rate","min-scale","preview-src-list"])])])),_:1})):E("",!0),20==V.detail.pay_status.value&&10!=V.detail.delivery_status.value&&10==V.detail.order_status.value&&1==V.detail.label_print_type&&10==V.detail.delivery_type.value&&1==V.detail.is_label&&10==V.detail.receipt_status.value?I((D(),z(w,{key:1,span:5},{default:j((()=>[L(q,{onClick:d[4]||(d[4]=e=>C.printOld(V.detail)),type:"text",size:"small"},{default:j((()=>[S("電子面單復打 ")])),_:1})])),_:1})),[[xt,"/order/order/printRepeate"]]):E("",!0),20==V.detail.pay_status.value&&10!=V.detail.delivery_status.value&&10==V.detail.order_status.value&&10==V.detail.delivery_type.value&&1==V.detail.is_label&&10==V.detail.receipt_status.value?I((D(),z(w,{key:2,span:5},{default:j((()=>[L(q,{onClick:d[5]||(d[5]=e=>C.labelCancel(V.detail)),type:"text",size:"small"},{default:j((()=>[S("電子面單取消 ")])),_:1})])),_:1})),[[xt,"/order/order/labelCancel"]]):E("",!0)])),_:1})])):10==V.detail.delivery_type.value&&1==V.detail.is_single?(D(),U("div",cl,[L(W,{size:"small",data:V.detail.orderDeliverList,border:"",style:{width:"100%"}},{default:j((()=>[L(T,{prop:"product_name",label:"#",width:"100"},{default:j((({$index:e})=>[S(" 包裹"+A(e+1),1)])),_:1}),L(T,{prop:"product_name",label:"商品"},{default:j((({row:e})=>[(D(!0),U(P,null,N(e.product_list,(e=>(D(),U("div",{key:e,class:"product-info pb16"},[F("div",pl,[I(F("img",null,null,512),[[Vt,e.image_path]])]),F("div",_l,[F("div",ml,A(e.product_name),1),F("div",yl,"發貨數："+A(e.delivery_num),1)])])))),128))])),_:1}),L(T,{label:"電子面單"},{default:j((({row:e})=>[e.label?(D(),z(X,{key:0,style:{width:"100px",height:"100px"},src:e.label,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[e.label],"initial-index":0,fit:"cover"},null,8,["src","zoom-rate","min-scale","preview-src-list"])):E("",!0)])),_:1}),L(T,{prop:"express_name",label:"快遞型別"}),L(T,{prop:"express_no",label:"快遞單號"}),L(T,{prop:"create_time",label:"發貨時間"}),L(T,{prop:"remark",label:"備註"}),L(T,{fixed:"right",label:"操作"},{default:j((e=>[20==V.detail.pay_status.value&&10!=V.detail.delivery_status.value&&10==V.detail.order_status.value&&1==V.detail.is_single&&1==e.row.is_label&&10==V.detail.receipt_status.value?I((D(),z(q,{key:0,onClick:a=>C.labelCancel(e.row),type:"text",size:"small"},{default:j((()=>[S("電子面單取消 ")])),_:2},1032,["onClick"])),[[xt,"/order/order/labelCancel"]]):E("",!0),20==V.detail.pay_status.value&&10!=V.detail.delivery_status.value&&10==V.detail.order_status.value&&1==e.row.label_print_type&&1==V.detail.is_single&&1==e.row.is_label&&10==V.detail.receipt_status.value?I((D(),z(q,{key:1,onClick:a=>C.printOld(e.row),type:"text",size:"small"},{default:j((()=>[S("電子面單復打 ")])),_:2},1032,["onClick"])),[[xt,"/order/order/printRepeate"]]):E("",!0),I((D(),z(q,{type:"text",size:"small",onClick:a=>C.getLogistics(e.row)},{default:j((()=>[S("物流查詢 ")])),_:2},1032,["onClick"])),[[xt,"/order/order/express"]])])),_:1})])),_:1},8,["data"])])):E("",!0)])])):E("",!0),10==V.detail.delivery_status.value||30==V.detail.delivery_status.value?(D(),U("div",vl,[fl,10==V.detail.delivery_status.value?(D(),z(nt,{key:0,modelValue:V.form.is_single,"onUpdate:modelValue":d[6]||(d[6]=e=>V.form.is_single=e)},{default:j((()=>[L(ut,{label:"單包裹發貨",name:1}),L(ut,{label:"多包裹發貨",name:0})])),_:1},8,["modelValue"])):E("",!0),L(K,{size:"small",ref:"form",model:V.form,"label-width":"100px"},{default:j((()=>[V.form.is_single&&10==V.detail.delivery_status.value?(D(),U(P,{key:0},[L(G,{label:"發貨型別"},{default:j((()=>[L(ct,{modelValue:V.form.is_label,"onUpdate:modelValue":d[7]||(d[7]=e=>V.form.is_label=e)},{default:j((()=>[L(B,{label:0},{default:j((()=>[S("手動填寫")])),_:1}),L(B,{label:1},{default:j((()=>[S("電子面單列印")])),_:1})])),_:1},8,["modelValue"])])),_:1}),V.form.is_label?(D(),U(P,{key:0},[L(G,{label:"電子面單配置"},{default:j((()=>[L(_t,{size:"small",modelValue:V.form.setting_id,"onUpdate:modelValue":d[8]||(d[8]=e=>V.form.setting_id=e),placeholder:"請選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.label_list,((e,a)=>(D(),z(pt,{key:a,label:e.setting_name,value:e.setting_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),L(G,{label:"電子面單模板"},{default:j((()=>[L(_t,{size:"small",modelValue:V.form.template_id,"onUpdate:modelValue":d[9]||(d[9]=e=>V.form.template_id=e),placeholder:"請選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.template_list,((e,a)=>(D(),z(pt,{key:a,label:e.template_name,value:e.template_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),L(G,{label:"寄件人資訊"},{default:j((()=>[L(_t,{size:"small",modelValue:V.form.address_id,"onUpdate:modelValue":d[10]||(d[10]=e=>V.form.address_id=e),placeholder:"請選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.address_list,((e,a)=>(D(),z(pt,{key:a,label:e.detail,value:e.address_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})],64)):(D(),U(P,{key:1},[L(G,{label:"物流公司"},{default:j((()=>[L(_t,{modelValue:V.form.express_id,"onUpdate:modelValue":d[11]||(d[11]=e=>V.form.express_id=e),placeholder:"請選擇快遞公司"},{default:j((()=>[(D(!0),U(P,null,N(V.expressList,((e,a)=>(D(),z(pt,{label:e.express_name,key:a,value:e.express_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),L(G,{label:"物流單號"},{default:j((()=>[L(mt,{modelValue:V.form.express_no,"onUpdate:modelValue":d[12]||(d[12]=e=>V.form.express_no=e),class:"max-w460"},null,8,["modelValue"])])),_:1})],64))],64)):(D(),U(P,{key:1},[F("div",gl,[L(q,{size:"small",type:"primary",onClick:C.addPackage},{default:j((()=>[S(" + 新增物流單號 ")])),_:1},8,["onClick"]),F("div",bl,[F("div",hl,[kl,L(ft,{content:"發貨提示",placement:"top"},{default:j((()=>[L(vt,{class:"ml4"},{default:j((()=>[L(yt)])),_:1})])),_:1})])])]),L(G,{label:"發貨型別"},{default:j((()=>[L(ct,{modelValue:V.form.is_label,"onUpdate:modelValue":d[13]||(d[13]=e=>V.form.is_label=e)},{default:j((()=>[L(B,{label:0},{default:j((()=>[S("手動填寫")])),_:1}),L(B,{label:1},{default:j((()=>[S("電子面單列印")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(D(!0),U(P,null,N(V.form.delivery_list,((e,a)=>(D(),U(P,{key:e},[F("div",xl,[F("div",Vl,"包裹"+A(a+1)+"：",1),F("div",Cl,[V.form.is_label?(D(),U(P,{key:0},[L(G,{label:"電子面單配置"},{default:j((()=>[L(_t,{size:"small",modelValue:e.setting_id,"onUpdate:modelValue":a=>e.setting_id=a,placeholder:"請選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.label_list,((e,a)=>(D(),z(pt,{key:a,label:e.setting_name,value:e.setting_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),L(G,{label:"電子面單模板"},{default:j((()=>[L(_t,{size:"small",modelValue:e.template_id,"onUpdate:modelValue":a=>e.template_id=a,placeholder:"請選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.template_list,((e,a)=>(D(),z(pt,{key:a,label:e.template_name,value:e.template_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),L(G,{label:"寄件人資訊"},{default:j((()=>[L(_t,{size:"small",modelValue:e.address_id,"onUpdate:modelValue":a=>e.address_id=a,placeholder:"請選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.address_list,((e,a)=>(D(),z(pt,{key:a,label:e.detail,value:e.address_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)],64)):(D(),U(P,{key:1},[F("div",wl,[L(G,{label:"物流公司"},{default:j((()=>[F("div",Dl,[L(_t,{modelValue:e.express_id,"onUpdate:modelValue":a=>e.express_id=a,placeholder:"請選擇快遞公司"},{default:j((()=>[(D(!0),U(P,null,N(V.expressList,((e,a)=>(D(),z(pt,{label:e.express_name,key:a,value:e.express_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),F("div",{class:"iconfont icon-shanchu1 ml10 delete-icon",style:{cursor:"pointer"},onClick:e=>C.delPackage(a)},null,8,zl),L(q,{class:"ml10",size:"small",type:"primary",round:"",onClick:C.addPackage},{default:j((()=>[S("+ 新增包裹")])),_:1},8,["onClick"])])])),_:2},1024)]),L(G,{label:"物流單號"},{default:j((()=>[L(mt,{modelValue:e.express_no,"onUpdate:modelValue":a=>e.express_no=a,class:"max-w460"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),L(G,{label:"備註"},{default:j((()=>[L(mt,{modelValue:e.remark,"onUpdate:modelValue":a=>e.remark=a,class:"max-w460"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)],64))])]),L(q,{icon:"Plus",class:"mb16",onClick:e=>C.addProduct(a)},{default:j((()=>[S("新增關聯商品")])),_:2},1032,["onClick"]),L(W,{data:e.delivery_data,border:""},{default:j((()=>[L(T,{label:"商品圖片"},{default:j((e=>[I(F("img",jl,null,512),[[Vt,e.row.image_path]])])),_:1}),L(T,{prop:"product_name",label:"商品名稱"}),L(T,{prop:"delivery_num",label:"商品數量"},{default:j((e=>[L(gt,{modelValue:e.row.delivery_num,"onUpdate:modelValue":a=>e.row.delivery_num=a,min:1,max:100},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),L(T,{prop:"name",label:"操作",width:"60"},{default:j((({$index:a})=>[F("div",{class:"iconfont icon-shanchu delete-icon",style:{cursor:"pointer"},onClick:l=>C.delProduct(e.delivery_data,a)},null,8,Ll)])),_:2},1024)])),_:2},1032,["data"])],64)))),128))],64))])),_:1},8,["model"])])):E("",!0)])),[[xt,"/order/order/delivery"]]),V.custom_form&&V.custom_form.length>0?(D(),U(P,{key:7},[Sl,F("div",Ul,[F("div",Pl,[F("ul",Nl,[(D(!0),U(P,null,N(V.custom_form,((e,a)=>(D(),U("li",{class:"item",span:"text"!==e.label?12:24,key:a},[F("div",null,A(e.title)+"："+A(e.value),1)],8,El)))),128))])])])],64)):E("",!0),20==V.detail.order_status.value&&""!=V.detail.cancel_remark?(D(),U("div",$l,[Fl,F("div",Il,[L(J,null,{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",Ol,[Al,S(" "+A(V.detail.cancel_remark),1)])])),_:1})])),_:1})])])):E("",!0),20==V.detail.delivery_type.value&&20==V.detail.pay_status.value&&21!=V.detail.order_status.value&&20!=V.detail.order_status.value?I((D(),U("div",Rl,[ql,10==V.detail.delivery_status.value?(D(),U("div",Jl,[L(K,{size:"small",ref:"extract_form",model:V.extract_form,"label-width":"100px"},{default:j((()=>[L(G,{label:"門店核銷員"},{default:j((()=>[L(_t,{modelValue:V.extract_form.order.extract_clerk_id,"onUpdate:modelValue":d[14]||(d[14]=e=>V.extract_form.order.extract_clerk_id=e),placeholder:"點選選擇"},{default:j((()=>[(D(!0),U(P,null,N(V.shopClerkList,((e,a)=>(D(),z(pt,{label:e.real_name,key:a,value:e.clerk_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),L(G,{label:"買家取貨狀態 "},{default:j((()=>[L(B,{modelValue:V.extract_form.order.extract_status,"onUpdate:modelValue":d[15]||(d[15]=e=>V.extract_form.order.extract_status=e),label:1},{default:j((()=>[S("已取貨")])),_:1},8,["modelValue"])])),_:1}),L(G,null,{default:j((()=>[L(q,{type:"primary",onClick:d[16]||(d[16]=e=>C.onExtract(V.detail.order_id))},{default:j((()=>[S("確認核銷")])),_:1})])),_:1})])),_:1},8,["model"])])):(D(),U("div",Ml,[V.detail.extractClerk?(D(),z(J,{key:0},{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",Ql,[Tl,S(" "+A(V.detail.extractStore.store_name),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Wl,[Bl,S(" "+A(V.detail.extractClerk.real_name),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Gl,[Kl,20==V.detail.delivery_status.value?(D(),U(P,{key:0},[S(" 已核銷 ")],64)):E("",!0)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",Xl,[Yl,S(" "+A(V.detail.delivery_time),1)])])),_:1})])),_:1})):E("",!0)]))])),[[xt,"/order/operate/extract"]]):E("",!0),30==V.detail.delivery_type.value&&20==V.detail.pay_status.value&&21!=V.detail.order_status.value&&20!=V.detail.order_status.value?I((D(),U("div",Hl,[Zl,10==V.detail.delivery_status.value?(D(),U("div",et,[L(K,{size:"small",ref:"virtual_form",model:V.virtual_form,"label-width":"100px"},{default:j((()=>[L(G,{label:"發貨資訊"},{default:j((()=>[L(mt,{modelValue:V.virtual_form.virtual_content,"onUpdate:modelValue":d[17]||(d[17]=e=>V.virtual_form.virtual_content=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),L(G,null,{default:j((()=>[L(q,{type:"primary",onClick:d[18]||(d[18]=e=>C.onVirtual(V.detail.order_id))},{default:j((()=>[S("確認發貨")])),_:1})])),_:1})])),_:1},8,["model"])])):(D(),U("div",at,[V.detail.virtual_content?(D(),z(J,{key:0},{default:j((()=>[L(w,{span:5},{default:j((()=>[F("div",lt,[tt,S(" "+A(V.detail.virtual_content),1)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",st,[dt,20==V.detail.delivery_status.value?(D(),U(P,{key:0},[S(" 已發貨 ")],64)):E("",!0)])])),_:1}),L(w,{span:5},{default:j((()=>[F("div",it,[rt,S(" "+A(V.detail.delivery_time),1)])])),_:1})])),_:1})):E("",!0)]))])),[[xt,"/order/order/delivery"]]):E("",!0)]),F("div",ot,[L(q,{size:"small",type:"info",onClick:C.cancelFunc},{default:j((()=>[S("返回上一頁")])),_:1},8,["onClick"]),20!=V.detail.pay_status.value||10!=V.detail.delivery_type.value||-1!==[20,21].indexOf(V.detail.order_status.value)||V.detail.assemble_status&&20!=V.detail.assemble_status?E("",!0):(D(),U(P,{key:0},[10==V.detail.delivery_status.value?(D(),z(q,{key:0,size:"small",type:"primary",onClick:C.onSubmit},{default:j((()=>[S("確認發貨")])),_:1},8,["onClick"])):1==V.detail.is_single&&20!=V.detail.delivery_status.value?(D(),z(q,{key:1,size:"small",type:"primary",onClick:C.onSubmit},{default:j((()=>[S("繼續發貨")])),_:1},8,["onClick"])):E("",!0)],64)),20==V.detail.pay_status.value&&21==V.detail.order_status.value?(D(),z(q,{key:1,size:"small",type:"primary",onClick:d[19]||(d[19]=e=>C.confirmCancel())},{default:j((()=>[S("確認稽核")])),_:1})):E("",!0)]),null!=V.addressData?(D(),z(bt,{key:0,isChange:V.isChange,addressData:V.addressData,onCloseDialog:C.closeAddress},null,8,["isChange","addressData","onCloseDialog"])):E("",!0),L(ht,{ref:"ProductSelectRef",product_list:V.product_list,exclude_ids:V.exclude_ids,islist:!0,onCloseDialog:C.closeProductDialogFunc},{default:j((()=>[S("產品列表彈出層")])),_:1},8,["product_list","exclude_ids","onCloseDialog"]),V.isLogistics?(D(),z(kt,{key:1,logisticsData:V.logisticsData,isLogistics:V.isLogistics,onCloseDialog:C.closeLogistics},null,8,["logisticsData","isLogistics","onCloseDialog"])):E("",!0)])),[[Ct,V.loading]])}]]);export{ut as default};
