System.register(["./element-plus-legacy-4010b94c.js","./Agent-legacy-8ee4e4d8.js","./index-legacy-a1d733aa.js","./@vue-legacy-a5eb5da2.js","./@vueuse-legacy-7e5b8ef2.js","./lodash-es-legacy-93596df5.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-4687536e.js","./call-bind-legacy-b90429f9.js","./get-intrinsic-legacy-4f34f38e.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-f19c70ad.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-b3eb717b.js","./pinia-legacy-9406b588.js","./vue-demi-legacy-97cfbb01.js","./axios-legacy-3cda2001.js","./qs-legacy-5fc46ed9.js","./side-channel-legacy-8f83241e.js","./object-inspect-legacy-2e2b0934.js","./vue-clipboard2-legacy-b2d9783e.js","./clipboard-legacy-b868140c.js","./vue-ueditor-wrap-legacy-53d1452b.js"],(function(e,n){"use strict";var t,a,l,c,u,o,i,r,s,d,g,p,m,f,h,y,_,v,b,C,j,k,z,S,A,D,V,w,N,x,F,P;return{setters:[function(e){t=e.E,a=e.s,l=e.t,c=e.e,u=e.d,o=e.f,i=e.c,r=e.x,s=e.y,d=e.n,g=e.C,p=e.l,m=e.i,f=e.p,h=e.v},function(e){y=e.A,_=e.a},function(e){v=e._},function(e){b=e.ae,C=e.ap,j=e.o,k=e.c,z=e.a,S=e.P,A=e.S,D=e.Q,V=e.a9,w=e.T,N=e.W,x=e.Y,F=e.$,P=e.X},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var n={components:{Agent:y},data:function(){return{activeName:"-1",activeIndex:"0",loading:!0,pageSize:10,totalDataNumber:0,curPage:1,searchForm:{product_name:"",category_id:""},tableData:[],categoryList:[],product_count:{},open_agent:!1,productModel:{},selectAll:!1,checkList:[]}},created:function(){this.getData()},methods:{changSelection:function(e){this.checkList=e},handleCurrentChange:function(e){var n=this;n.loading=!0,n.curPage=e,n.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleClick:function(e,n){var t=this;t.curPage=1,t.activeName=e,t.getData()},getData:function(){var e=this,n=e.searchForm;n.page=e.curPage,n.list_rows=e.pageSize,n.is_agent=e.activeName,e.loading=!0,_.getList(n,!0).then((function(n){e.loading=!1,e.selectAll=!1,e.tableData=n.data.list.data,e.categoryList=n.data.category,e.totalDataNumber=n.data.list.total,e.product_count=n.data.product_count})).catch((function(n){e.loading=!1}))},onSubmit:function(){this.curPage=1,this.getData()},reset:function(){this.curPage=1,this.searchForm={product_name:"",category_id:""},this.getData()},agentClick:function(e){this.productModel={product_id:e.product_id,product_name:e.product_name,is_agent:e.is_agent,is_ind_agent:e.is_ind_agent},this.open_agent=!0},closeDialogFunc:function(e,n){"Agent"==n&&(this.open_agent=e.openDialog,"success"==e.type&&this.getData())},allSelection:function(e){this.$refs.multipleTable.toggleAllSelection()},changeAgent:function(e){var n=this,a=this.checkList;if(!(a.length<=0)){var l=[];a.forEach((function(e,n){l.push(e.product_id)})),_.setAgent({productIds:l.join(","),is_agent:e},!0).then((function(e){n.loading=!1,t({message:e.msg,type:"success"}),n.getData()})).catch((function(e){n.loading=!1}))}}}},L={class:"product-list"},M={class:"common-seach-wrap"},T={class:"product-content"},U=z("span",null,"全部",-1),E=z("span",null,"參與",-1),I=z("span",null,"不參與",-1),$={class:"table-wrap"},q=z("span",{class:"mr10 ml4"},"當頁全選",-1),H={class:"product-info"},Q={class:"pic"},W={alt:""},X={class:"info"},Y={class:"name"},B={class:"gray3"},G={key:0,class:"green"},J={key:1,class:"gray3"},K={class:"table-btn-column"},O=z("span",{class:"mr10 ml4"},"當頁全選",-1),R={class:"pagination"};e("default",v(n,[["render",function(e,n,t,y,_,v){var Z=a,ee=l,ne=c,te=u,ae=o,le=i,ce=r,ue=s,oe=d,ie=g,re=p,se=m,de=f,ge=b("Agent"),pe=C("img-url"),me=h;return j(),k("div",L,[z("div",M,[S(le,{size:"small",inline:!0,model:_.searchForm,class:"demo-form-inline"},{default:A((function(){return[S(ne,{label:"商品分類"},{default:A((function(){return[S(ee,{size:"small",modelValue:_.searchForm.category_id,"onUpdate:modelValue":n[0]||(n[0]=function(e){return _.searchForm.category_id=e}),placeholder:"所有分類"},{default:A((function(){return[S(Z,{label:"全部",value:"0"}),(j(!0),k(D,null,V(_.categoryList,(function(e,n){return j(),w(Z,{key:n,label:e.name,value:e.category_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),S(ne,{label:"商品名稱"},{default:A((function(){return[S(te,{size:"small",modelValue:_.searchForm.product_name,"onUpdate:modelValue":n[1]||(n[1]=function(e){return _.searchForm.product_name=e}),placeholder:"請輸入商品名稱"},null,8,["modelValue"])]})),_:1}),S(ne,null,{default:A((function(){return[S(ae,{size:"small",type:"primary",icon:"Search",onClick:v.onSubmit},{default:A((function(){return[N("查詢")]})),_:1},8,["onClick"])]})),_:1}),S(ne,null,{default:A((function(){return[S(ae,{size:"small",type:"success",onClick:v.reset},{default:A((function(){return[N("重置")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]),z("div",T,[S(ue,{modelValue:_.activeName,"onUpdate:modelValue":n[2]||(n[2]=function(e){return _.activeName=e}),onTabChange:v.handleClick},{default:A((function(){return[S(ce,{label:"全部",name:"-1"},{label:A((function(){return[U]})),_:1}),S(ce,{label:"參與",name:"1"},{label:A((function(){return[E]})),_:1}),S(ce,{label:"不參與",name:"0"},{label:A((function(){return[I]})),_:1})]})),_:1},8,["modelValue","onTabChange"]),z("div",$,[S(ie,{align:"middle",style:{"margin-bottom":"20px"}},{default:A((function(){return[S(oe,{modelValue:_.selectAll,"onUpdate:modelValue":n[3]||(n[3]=function(e){return _.selectAll=e}),onChange:v.allSelection},null,8,["modelValue","onChange"]),q,1!=_.activeName?(j(),w(ae,{key:0,size:"small",type:"primary",onClick:n[4]||(n[4]=function(e){return v.changeAgent(1)})},{default:A((function(){return[N("參與推廣")]})),_:1})):x("",!0),0!=_.activeName?(j(),w(ae,{key:1,size:"small",onClick:n[5]||(n[5]=function(e){return v.changeAgent(0)})},{default:A((function(){return[N("不參與推廣")]})),_:1})):x("",!0)]})),_:1}),F((j(),w(se,{size:"small",data:_.tableData,border:"",style:{width:"100%"},ref:"multipleTable",onSelectionChange:v.changSelection},{default:A((function(){return[S(re,{type:"selection",width:"55"}),S(re,{prop:"product_name",label:"產品",width:"300px"},{default:A((function(e){return[z("div",H,[z("div",Q,[F(z("img",W,null,512),[[pe,e.row.image[0].file_path]])]),z("div",X,[z("div",Y,P(e.row.product_name),1)])])]})),_:1}),S(re,{prop:"product_price",label:"價格"},{default:A((function(e){return[z("div",B,"￥"+P(e.row.product_price),1)]})),_:1}),S(re,{prop:"product_stock",label:"庫存"}),S(re,{prop:"sales_actual",label:"實際銷量"}),S(re,{prop:"is_agent",label:"是否參與推廣"},{default:A((function(e){return[1==e.row.is_agent?(j(),k("div",G,"是")):(j(),k("div",J,"否"))]})),_:1}),S(re,{fixed:"right",label:"操作",width:"80"},{default:A((function(e){return[z("div",K,[S(ae,{onClick:function(n){return v.agentClick(e.row)},type:"text",size:"small"},{default:A((function(){return[N("設定")]})),_:2},1032,["onClick"])])]})),_:1})]})),_:1},8,["data","onSelectionChange"])),[[me,_.loading]]),S(ie,{align:"middle",style:{"margin-top":"20px"}},{default:A((function(){return[S(oe,{modelValue:_.selectAll,"onUpdate:modelValue":n[6]||(n[6]=function(e){return _.selectAll=e}),onChange:v.allSelection},null,8,["modelValue","onChange"]),O,1!=_.activeName?(j(),w(ae,{key:0,size:"small",type:"primary",onClick:n[7]||(n[7]=function(e){return v.changeAgent(1)})},{default:A((function(){return[N("參與推廣")]})),_:1})):x("",!0),0!=_.activeName?(j(),w(ae,{key:1,size:"small",onClick:n[8]||(n[8]=function(e){return v.changeAgent(0)})},{default:A((function(){return[N("不參與推廣")]})),_:1})):x("",!0)]})),_:1})])]),z("div",R,[S(de,{onSizeChange:v.handleSizeChange,onCurrentChange:v.handleCurrentChange,background:"","current-page":_.curPage,"page-size":_.pageSize,layout:"total, prev, pager, next, jumper",total:_.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_.open_agent?(j(),w(ge,{key:0,open_agent:_.open_agent,productModel:_.productModel,onCloseDialog:n[9]||(n[9]=function(e){return v.closeDialogFunc(e,"Agent")})},null,8,["open_agent","productModel"])):x("",!0)])}]]))}}}));
