import{E as e,d as a,e as l,f as o,s as t,t as r,m as d,g as s,c as i,v as m}from"./element-plus-84a27f94.js";import{_ as u}from"./Upload-71ca9325.js";import{C as p}from"./card-8cac6905.js";import{_ as c}from"./index-5ae5860a.js";import{ap as n,$ as _,o as f,c as g,P as j,S as b,a as h,W as y,T as V,Y as v,Q as w,a9 as x}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const U={components:{Upload:u},data:()=>({loading:!0,isupload:!1,form:{card_id:0,card_title:"",category_id:"",image_id:"",card_sort:100,card_status:10,card_content:"",stock_num:"",product_id:"",card_price:"",sell_price:"",product_attr:""},category:[],product:[]}),created(){this.getDetail()},methods:{openUpload(){this.isupload=!0},returnImgsFunc(e){null!=e&&(this.form.image_id=e[0].file_id,this.form.image.file_path=e[0].file_path),this.isupload=!1},getDetail(){let e=this;const a=e.$route.query.card_id;p.toEditCard({card_id:a},!0).then((a=>{e.form=a.data.model,e.form.image||(e.form.image={}),e.category=a.data.category,e.product=a.data.product,e.loading=!1})).catch((e=>{}))},onSubmit(){let a=this,l=a.form;l.card_id=a.$route.query.card_id,p.editCard(l,!0).then((l=>{e({message:l.msg,type:"success"}),a.cancelFunc()})).catch((e=>{}))},cancelFunc(){this.$router.back(-1)}}},k={class:"product-add pb50"},C=h("div",{class:"common-form"},"編輯卡券",-1),q={class:"mt10",width:120,alt:""},z=h("div",{class:"tips"},"數字小的排前面",-1),F={class:"common-button-wrapper"};const I=c(U,[["render",function(e,p,c,U,I,$){const S=a,A=l,D=o,E=u,R=t,T=r,P=d,Q=s,W=i,Y=n("img-url"),B=m;return _((f(),g("div",k,[j(W,{size:"small",model:I.form,ref:"form","label-width":"100px"},{default:b((()=>[C,j(A,{label:"卡券標題",prop:"card_title"},{default:b((()=>[j(S,{modelValue:I.form.card_title,"onUpdate:modelValue":p[0]||(p[0]=e=>I.form.card_title=e),placeholder:"",class:"max-w460"},null,8,["modelValue"])])),_:1}),j(A,{label:"卡券描述",prop:"card_content",rules:[{required:!0,message:" "}]},{default:b((()=>[j(S,{modelValue:I.form.card_content,"onUpdate:modelValue":p[1]||(p[1]=e=>I.form.card_content=e),placeholder:"",class:"max-w460"},null,8,["modelValue"])])),_:1}),j(A,{label:"卡券售價：",prop:"sell_price",rules:[{required:!0,message:" "}]},{default:b((()=>[j(S,{modelValue:I.form.sell_price,"onUpdate:modelValue":p[2]||(p[2]=e=>I.form.sell_price=e),type:"number",class:"max-w460"},null,8,["modelValue"])])),_:1}),j(A,{label:"市場價格：",prop:"card_price",rules:[{required:!0,message:" "}]},{default:b((()=>[j(S,{modelValue:I.form.card_price,"onUpdate:modelValue":p[3]||(p[3]=e=>I.form.card_price=e),type:"number",class:"max-w460"},null,8,["modelValue"])])),_:1}),j(A,{label:"卡券封面"},{default:b((()=>[h("div",null,[j(D,{type:"primary",onClick:$.openUpload},{default:b((()=>[y("上傳圖片")])),_:1},8,["onClick"]),_(h("img",q,null,512),[[Y,I.form.image&&I.form.image.file_path]]),I.isupload?(f(),V(E,{key:0,isupload:I.isupload,onReturnImgs:$.returnImgsFunc},{default:b((()=>[y("上傳圖片")])),_:1},8,["isupload","onReturnImgs"])):v("",!0)])])),_:1}),j(A,{label:"卡券分類"},{default:b((()=>[j(T,{modelValue:I.form.category_id,"onUpdate:modelValue":p[4]||(p[4]=e=>I.form.category_id=e),placeholder:"請選擇",style:{width:"460px"}},{default:b((()=>[(f(!0),g(w,null,x(I.category,((e,a)=>(f(),V(R,{key:a,label:e.name,value:e.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),j(A,{label:"關聯商品"},{default:b((()=>[j(T,{modelValue:I.form.product_id,"onUpdate:modelValue":p[5]||(p[5]=e=>I.form.product_id=e),filterable:"",placeholder:"請選擇",style:{width:"460px"}},{default:b((()=>[(f(!0),g(w,null,x(I.product,((e,a)=>(f(),V(R,{key:a,label:e.product_name,value:e.product_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),j(A,{label:"商品規格",prop:"product_attr"},{default:b((()=>[j(S,{modelValue:I.form.product_attr,"onUpdate:modelValue":p[6]||(p[6]=e=>I.form.product_attr=e),placeholder:"",class:"max-w460"},null,8,["modelValue"])])),_:1}),j(A,{label:"卡券狀態"},{default:b((()=>[j(Q,{modelValue:I.form.card_status,"onUpdate:modelValue":p[7]||(p[7]=e=>I.form.card_status=e)},{default:b((()=>[j(P,{label:10},{default:b((()=>[y("上架")])),_:1}),j(P,{label:20},{default:b((()=>[y("下架")])),_:1})])),_:1},8,["modelValue"])])),_:1}),j(A,{label:"排序"},{default:b((()=>[j(S,{type:"number",modelValue:I.form.card_sort,"onUpdate:modelValue":p[8]||(p[8]=e=>I.form.card_sort=e),class:"max-w460"},null,8,["modelValue"]),z])),_:1}),h("div",F,[j(D,{size:"small",type:"info",onClick:$.cancelFunc,loading:I.loading},{default:b((()=>[y("取消")])),_:1},8,["onClick","loading"]),j(D,{size:"small",type:"primary",onClick:$.onSubmit,loading:I.loading},{default:b((()=>[y("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"])])),[[B,I.loading]])}]]);export{I as default};
