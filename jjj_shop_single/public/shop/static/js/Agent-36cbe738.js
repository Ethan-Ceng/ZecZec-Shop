import{E as e,e as l,m as a,g as t,d as o,c as d,f as i,q as n}from"./element-plus-84a27f94.js";import{r as s,_ as m}from"./index-5ae5860a.js";import{o as r,T as u,S as p,a as _,P as g,W as c,X as f,Y as b,c as h,Q as y}from"./@vue-8fe4574d.js";let V={toEditProduct:(e,l)=>s._get("/shop/plus.agent.product/edit",e,l),editProduct:(e,l)=>s._post("/shop/plus.agent.product/edit",e,l),getList:(e,l)=>s._get("/shop/plus.agent.product/index",e,l),setAgent:(e,l)=>s._post("/shop/plus.agent.product/setAgent",e,l)};const w={class:"dialog-footer"};const L=m({data:()=>({form:{is_ind_agent:0},unit:"%",is_agent:0,basicSetting:{},formLabelWidth:"120px",dialogVisible:!1,loading:!1}),props:["open_agent","productModel"],created(){this.is_agent=this.productModel.is_agent,this.dialogVisible=this.open_agent,this.getData()},methods:{getData(){let e=this;V.toEditProduct({product_id:e.productModel.product_id}).then((l=>{e.form=l.data.agent_product,null==e.form&&(e.form={is_ind_agent:0,agent_money_type:10}),e.basicSetting=l.data.basicSetting})).catch((e=>{}))},changeMoneyType:function(e){this.unit="10"==e?"%":"元"},saveProduct(){let l=this,a=l.form;a.product_id=l.productModel.product_id,a.is_agent=l.is_agent,l.loading=!0,V.editProduct(a).then((a=>{l.loading=!1,e({message:a.msg,type:"success"}),l.dialogFormVisible(!0)})).catch((e=>{l.loading=!1}))},dialogFormVisible(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},[["render",function(e,s,m,V,L,W){const k=l,v=a,x=t,M=o,P=d,S=i,C=n;return r(),u(C,{title:"商品規則",modelValue:L.dialogVisible,"onUpdate:modelValue":s[7]||(s[7]=e=>L.dialogVisible=e),onClose:W.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"},{footer:p((()=>[_("div",w,[g(S,{onClick:s[6]||(s[6]=e=>W.dialogFormVisible(!1))},{default:p((()=>[c("取 消")])),_:1}),g(S,{type:"primary",onClick:W.saveProduct,loading:L.loading},{default:p((()=>[c("確 定")])),_:1},8,["onClick","loading"])])])),default:p((()=>[g(P,{size:"small",model:L.form,ref:"form"},{default:p((()=>[g(k,{label:"商品名稱","label-width":L.formLabelWidth},{default:p((()=>[_("span",null,f(m.productModel.product_name),1)])),_:1},8,["label-width"]),g(k,{label:"是否參與推廣","label-width":L.formLabelWidth},{default:p((()=>[g(x,{modelValue:L.is_agent,"onUpdate:modelValue":s[0]||(s[0]=e=>L.is_agent=e)},{default:p((()=>[g(v,{label:1},{default:p((()=>[c("參與")])),_:1}),g(v,{label:0},{default:p((()=>[c("不參與")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),L.is_agent?(r(),u(k,{key:0,label:"是否開啟單獨分銷：","label-width":L.formLabelWidth},{default:p((()=>[g(x,{modelValue:L.form.is_ind_agent,"onUpdate:modelValue":s[1]||(s[1]=e=>L.form.is_ind_agent=e)},{default:p((()=>[g(v,{label:1},{default:p((()=>[c("開啟")])),_:1}),g(v,{label:0},{default:p((()=>[c("關閉")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"])):b("",!0),1==L.form.is_ind_agent&&1==L.is_agent?(r(),h(y,{key:1},[g(k,{label:"分銷佣金型別：","label-width":L.formLabelWidth},{default:p((()=>[g(x,{modelValue:L.form.agent_money_type,"onUpdate:modelValue":s[2]||(s[2]=e=>L.form.agent_money_type=e),onChange:W.changeMoneyType},{default:p((()=>[g(v,{label:10},{default:p((()=>[c("百分比")])),_:1}),g(v,{label:20},{default:p((()=>[c("固定金額")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1},8,["label-width"]),g(k,{label:"單獨分銷設定：","label-width":L.formLabelWidth},{default:p((()=>[g(M,{type:"number",min:"0",modelValue:L.form.first_money,"onUpdate:modelValue":s[3]||(s[3]=e=>L.form.first_money=e),class:"max-w460"},{prepend:p((()=>[c(" 一級佣金： ")])),append:p((()=>[c(f(L.unit),1)])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),L.basicSetting.level>=2?(r(),u(k,{key:0,label:"","label-width":L.formLabelWidth},{default:p((()=>[g(M,{type:"number",min:"0",modelValue:L.form.second_money,"onUpdate:modelValue":s[4]||(s[4]=e=>L.form.second_money=e),class:"max-w460"},{prepend:p((()=>[c(" 二級佣金： ")])),append:p((()=>[c(f(L.unit),1)])),_:1},8,["modelValue"])])),_:1},8,["label-width"])):b("",!0),L.basicSetting.level>=3?(r(),u(k,{key:1,label:"","label-width":L.formLabelWidth},{default:p((()=>[g(M,{type:"number",min:"0",modelValue:L.form.third_money,"onUpdate:modelValue":s[5]||(s[5]=e=>L.form.third_money=e),class:"max-w460"},{prepend:p((()=>[c(" 三級佣金： ")])),append:p((()=>[c(f(L.unit),1)])),_:1},8,["modelValue"])])),_:1},8,["label-width"])):b("",!0)],64)):b("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}],["__scopeId","data-v-87bde13b"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));export{L as A,V as a,W as b};
