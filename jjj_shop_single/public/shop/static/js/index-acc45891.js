import{E as e,c as s,d as o,e as a,f as t}from"./element-plus-84a27f94.js";import{I as r}from"./index-3c91ce9e.js";import{_ as i,u as l,b as m}from"./index-5ae5860a.js";import{U as n}from"./user-4135dd62.js";import{c as u,P as p,S as c,V as d,o as g,a as h,X as j,a1 as f,W as b}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const{afterLogin:_}=l(),y={class:"title",style:{"margin-bottom":"20px"}};const v=i({data:()=>({loading:!0,bgimg_url:"",logining:!1,ruleForm:{account:"",checkPass:""},rules:{account:[{required:!0,message:"請輸入使用者名稱",trigger:"blur"}],checkPass:[{required:!0,message:"請輸入密碼",trigger:"blur"}]},baseData:{},shop_name:""}),created(){this.getData(),this.$route.query.from&&"admin"==this.$route.query.from&&this.saasLogin()},methods:{getData(){let e=this;r.base(!0).then((s=>{e.loading=!1;const{data:{settings:{shop_bg_img:o,shop_name:a}}}=s;e.shop_name=a,e.bgimg_url=o||m})).catch((s=>{e.loading=!1}))},SubmitFunc(e){var s=this;this.$refs.ruleForm.validate((async e=>{if(e){this.logining=!0;var o={username:this.ruleForm.account,password:this.ruleForm.checkPass};n.login(o,!0).then((async e=>{await _(e),s.logining=!1,s.$router.push({path:"/home"})})).catch((e=>{s.logining=!1}))}}))},saasLogin(){n.saasLogin({},!0).then((async s=>{1==res.code?(await _(res.data),delCookie("baseInfo"),setCookie("userinfo",res.data),setCookie("isLogin_single",!0),this.$router.push({path:"/"})):e({message:"登入失敗",type:"error"})})).catch((e=>{}))}}},[["render",function(e,r,i,l,m,n){const _=o,v=a,k=t,F=s;return g(),u("div",{class:"login-bg",style:d("background-image:url("+m.bgimg_url+");")},[p(F,{model:m.ruleForm,rules:m.rules,ref:"ruleForm","label-position":"left","label-width":"0px",class:"demo-ruleForm login-container"},{default:c((()=>[h("h3",y,j(m.shop_name||""),1),p(v,{prop:"account"},{default:c((()=>[p(_,{type:"text",modelValue:m.ruleForm.account,"onUpdate:modelValue":r[0]||(r[0]=e=>m.ruleForm.account=e),"auto-complete":"off",placeholder:"賬號"},null,8,["modelValue"])])),_:1}),p(v,{prop:"checkPass"},{default:c((()=>[p(_,{type:"password",modelValue:m.ruleForm.checkPass,"onUpdate:modelValue":r[1]||(r[1]=e=>m.ruleForm.checkPass=e),"auto-complete":"off",placeholder:"密碼"},null,8,["modelValue"])])),_:1}),p(v,null,{default:c((()=>[p(k,{type:"primary",style:{width:"100%"},onClick:f(n.SubmitFunc,["prevent"]),loading:m.logining},{default:c((()=>[b("登入")])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])],4)}],["__scopeId","data-v-3d08f44d"]]);export{v as default};
