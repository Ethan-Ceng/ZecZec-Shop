System.register(["./element-plus-legacy-4010b94c.js","./setting-legacy-cd098a7e.js","./Area-legacy-f1e8a1e2.js","./index-legacy-a1d733aa.js","./@vue-legacy-a5eb5da2.js","./@vueuse-legacy-7e5b8ef2.js","./lodash-es-legacy-93596df5.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-4687536e.js","./call-bind-legacy-b90429f9.js","./get-intrinsic-legacy-4f34f38e.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-f19c70ad.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-b3eb717b.js","./pinia-legacy-9406b588.js","./vue-demi-legacy-97cfbb01.js","./axios-legacy-3cda2001.js","./qs-legacy-5fc46ed9.js","./side-channel-legacy-8f83241e.js","./object-inspect-legacy-2e2b0934.js","./vue-clipboard2-legacy-b2d9783e.js","./clipboard-legacy-b868140c.js","./vue-ueditor-wrap-legacy-53d1452b.js"],(function(e,a){"use strict";var l,t,n,r,i,o,u,d,s,c,f,m,p,h,y,g,v,b,_,w,j,x,k,V,C,M,A=document.createElement("style");return A.textContent=".el-table__header-wrapper[data-v-b09196c3]{line-height:23px}.el-table .area-list[data-v-b09196c3]{font-size:12px}.el-table .area-list .province[data-v-b09196c3]{padding-right:10px;font-weight:700}.el-table .area-list .city[data-v-b09196c3]{display:inline-block;white-space:nowrap;padding-right:4px;color:#999}\n",document.head.appendChild(A),{setters:[function(e){l=e.E,t=e.d,n=e.e,r=e.m,i=e.l,o=e.i,u=e.f,d=e.c},function(e){s=e.S},function(e){c=e.default},function(e){f=e._,m=e.d},function(e){p=e.ae,h=e.o,y=e.c,g=e.P,v=e.S,b=e.a,_=e.W,w=e.Q,j=e.a9,x=e.X,k=e.Y,V=e.T,C=e.bb,M=e.b9},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var a={components:{Areas:c},data:function(){return{form:{method:"10",name:"",sort:1,radio:"10",rule:[]},formRules:{name:[{required:!0,message:" ",trigger:"blur"}]},loading:!1,options:[],optionsMap:{},areaModel:{index:0},show_area:!1,tableHeadName:{first:"首件(個)",first_fee:"運費(元)",additional:"續件(個)",additional_fee:"續費(元)"},cityCount:0,formData:[]}},watch:{"form.radio":function(e,a){this.tableHeadName="10"==e?{first:"首件(個)",first_fee:"運費(元)",additional:"續件(個)",additional_fee:"續費(元)"}:{first:"首重(Kg)",first_fee:"運費(元)",additional:"續重(Kg)",additional_fee:"續費(元)"}},"form.rule":{handler:function(e,a){},deep:!0}},created:function(){this.getData()},methods:{getData:function(){var e=this;s.toaddDelivery({},!0).then((function(a){e.options=a.data.arr,e.cityCount=a.data.cityCount,e.options.forEach((function(a){e.optionsMap[a.value]=a}))})).catch((function(e){}))},getShowData:function(e){var a=this,l={};return e.province.forEach((function(t){var n=a.optionsMap[t],r=[],i=0;for(var o in n.children)if(n.children.hasOwnProperty(o)){var u=n.children[o];a.inArray(u.value,e.citys)&&r.push({id:u.value,name:u.label}),i++}l[n.value]={id:n.value,name:n.label,citys:r,isAllCitys:r.length===i}})),l},inArray:function(e,a){return a.indexOf(e)>-1},addAreaClick:function(e){this.areaModel.index=this.form.rule.length,this.areaModel.type="add",this.show_area=!0},editAreaClick:function(e){this.areaModel.index=e,this.areaModel.type="edit",this.show_area=!0},closeAreaFunc:function(e){var a=this;if(this.show_area=e.statu,"confirm"==e.type){this.options=e.this_area;var l=[],t=[];e.this_area.forEach((function(e,n){1!=e.checked&&1!=e.indeterminate||-1==e.index.indexOf(a.areaModel.index)||(l.push(e.value),e.children.forEach((function(e){1==e.checked&&e.index==a.areaModel.index&&t.push(e.value)})))})),""==l&&""==t||("add"==this.areaModel.type&&this.form.rule.push({first:"",first_fee:"",additional:"",additional_fee:"",citys:t,showData:this.getShowData({province:l,citys:t})}),"edit"==this.areaModel.type&&(this.form.rule[this.areaModel.index].showData=this.getShowData({province:l,citys:t}),this.form.rule[this.areaModel.index].citys=t),this.form.rule.push([]),this.form.rule.pop())}},deleteAreaClick:function(e){var a=this;a.options.forEach((function(l){a.form.rule[e].province&&a.inArray(l.value,a.form.rule[e].province)&&(l.checked=!1,l.index=null),l.children.forEach((function(l){a.inArray(l.value,a.form.rule[e].citys)&&(l.checked=!1,l.index=null)}))})),a.form.rule.splice(e,1)},onSubmit:function(){var e=this,a=m(e.form);a.rule.forEach((function(e){delete e.showData})),e.$refs.form.validate((function(t){if(t){if(0==a.rule.length)return l({message:"請新增配送區域和運費",type:"error"}),!1;for(var n in a.rule){if(!(a.rule[n].hasOwnProperty("first")&&a.rule[n].first>0))return l({message:"首件/首重不能為空",type:"error"}),!1;if(!a.rule[n].hasOwnProperty("first_fee")||""==a.rule[n].first_fee)return l({message:"運費不能為空",type:"error"}),!1;if(!(a.rule[n].hasOwnProperty("additional")&&a.rule[n].additional>0))return l({message:"續件/續重不能為空",type:"error"}),!1;if(!a.rule[n].hasOwnProperty("additional_fee")||""==a.rule[n].additional_fee)return l({message:"續費不能為空",type:"error"}),!1}e.loading=!0,s.addDelivery(a,!0).then((function(a){e.loading=!1,l({message:"恭喜你，新增成功",type:"success"}),e.$router.push("/setting/delivery/index")})).catch((function(a){e.loading=!1}))}}))},cancelFunc:function(){this.$router.back(-1)}}},A=function(e){return C("data-v-b09196c3"),e=e(),M(),e},D={class:"product-add"},U=A((function(){return b("div",{class:"common-form"},"新增運費模版",-1)})),E={class:"area-list"},S={key:0},O={class:"am-link-muted gray9"},z={key:0},H=["onClick"],N=["onClick"],P=A((function(){return b("div",{class:"tips"},"數字越小越靠前",-1)})),$={class:"common-button-wrapper"};e("default",f(a,[["render",function(e,a,l,s,c,f){var m=t,C=n,M=r,A=i,F=o,q=u,K=d,R=p("Areas");return h(),y("div",D,[g(K,{size:"small",ref:"form",model:c.form,rules:c.formRules,"label-width":"200px"},{default:v((function(){return[U,g(C,{label:"模版名稱",prop:"name"},{default:v((function(){return[g(m,{modelValue:c.form.name,"onUpdate:modelValue":a[0]||(a[0]=function(e){return c.form.name=e}),modelModifiers:{trim:!0},class:"max-w460"},null,8,["modelValue"])]})),_:1}),g(C,{label:"計費方式"},{default:v((function(){return[b("div",null,[g(M,{modelValue:c.form.radio,"onUpdate:modelValue":a[1]||(a[1]=function(e){return c.form.radio=e}),label:"10"},{default:v((function(){return[_("按件數")]})),_:1},8,["modelValue"]),g(M,{modelValue:c.form.radio,"onUpdate:modelValue":a[2]||(a[2]=function(e){return c.form.radio=e}),label:"20"},{default:v((function(){return[_("按重量")]})),_:1},8,["modelValue"])])]})),_:1}),g(C,{label:"配送區域及運費"},{default:v((function(){return[g(F,{data:c.form.rule,border:"",style:{width:"100%"}},{default:v((function(){return[g(A,{label:"可配送區域"},{default:v((function(a){return[b("div",E,[a.row.citys.length==c.cityCount?(h(),y("span",S,"全國")):(h(!0),y(w,{key:1},j(a.row.showData,(function(e,a){return h(),y("span",{key:a,class:"pr16"},[_(x(e.name)+" ",1),e.isAllCitys?k("",!0):(h(),y(w,{key:0},[_(" ( "),b("span",O,[(h(!0),y(w,null,j(e.citys,(function(a,l){return h(),y("em",{key:l},[b("span",null,x(a.name),1),l+1<e.citys.length?(h(),y("span",z,"、")):k("",!0)])})),128))]),_(" ) ")],64))])})),128))]),b("a",{href:"javascript:void(0);",onClick:function(l){return e.el=f.editAreaClick(a.$index)}},"編輯",8,H)]})),_:1}),g(A,{prop:"first",label:c.tableHeadName.first,width:"100px"},{default:v((function(e){return[g(m,{modelValue:e.row.first,"onUpdate:modelValue":function(a){return e.row.first=a},modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1},8,["label"]),g(A,{prop:"first_fee",label:c.tableHeadName.first_fee,width:"100px"},{default:v((function(e){return[g(m,{modelValue:e.row.first_fee,"onUpdate:modelValue":function(a){return e.row.first_fee=a},modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1},8,["label"]),g(A,{prop:"additional",label:c.tableHeadName.additional,width:"100px"},{default:v((function(e){return[g(m,{modelValue:e.row.additional,"onUpdate:modelValue":function(a){return e.row.additional=a},modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1},8,["label"]),g(A,{prop:"additional_fee",label:c.tableHeadName.additional_fee,width:"100px"},{default:v((function(e){return[g(m,{modelValue:e.row.additional_fee,"onUpdate:modelValue":function(a){return e.row.additional_fee=a},modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1},8,["label"]),g(A,{label:"操作",width:"60px"},{default:v((function(e){return[b("a",{href:"javascript:void(0);",onClick:function(a){return f.deleteAreaClick(e.$index)}},"刪除",8,N)]})),_:1})]})),_:1},8,["data"]),b("div",null,[g(q,{onClick:f.addAreaClick,type:"text",size:"small"},{default:v((function(){return[_("+點選新增可配送區域和運費")]})),_:1},8,["onClick"])])]})),_:1}),g(C,{label:"排序"},{default:v((function(){return[g(m,{modelValue:c.form.sort,"onUpdate:modelValue":a[3]||(a[3]=function(e){return c.form.sort=e}),modelModifiers:{trim:!0},type:"number",class:"max-w460"},null,8,["modelValue"]),P]})),_:1}),b("div",$,[g(q,{size:"small",type:"info",onClick:f.cancelFunc},{default:v((function(){return[_("取消")]})),_:1},8,["onClick"]),g(q,{type:"primary",onClick:f.onSubmit,loading:c.loading},{default:v((function(){return[_("提交")]})),_:1},8,["onClick","loading"])])]})),_:1},8,["model","rules"]),c.show_area?(h(),V(R,{key:0,show_area:c.show_area,areaModel:c.areaModel,areas:c.options,onCloseArea:f.closeAreaFunc},null,8,["show_area","areaModel","areas","onCloseArea"])):k("",!0)])}],["__scopeId","data-v-b09196c3"]]))}}}));
