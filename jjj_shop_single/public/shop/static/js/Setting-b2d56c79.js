import{E as e,O as a,d as r,e as l,m as s,B as o,f as i,n as t,c as d}from"./element-plus-84a27f94.js";import{S as n}from"./sign-dea245b0.js";import{U as m}from"./UE-97bf9096.js";import{ae as p,o as u,c,P as _,S as f,a as g,$ as v,W as b,Y as w,Q as h,a9 as j,a0 as V,bb as y,b9 as x}from"./@vue-8fe4574d.js";import{_ as C}from"./index-5ae5860a.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./Upload-71ca9325.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const U={components:{Uediter:m},data(){return{ueditor:{text:"",config:{initialFrameWidth:400,initialFrameHeight:500}},form:{is_open:!1,is_increase:!1,increase_reward:0,no_increase:0,ever_sign:0,reward_data:[]},loading:!0,rules:{ever_sign:[{required:!0,message:"每日簽到送積分有誤",trigger:"blur"}],increase_reward:[{required:!0,message:"請輸入第二天起遞增積分數",trigger:"blur"}],no_increase:[{required:!0,message:"請輸入第幾天不再遞增",trigger:"blur"}],reward_data:[{validator:(e,a,r)=>{a.length<1?r(new Error("請新增至少一項額外獎勵！")):r()},required:!0,trigger:"blur"}],day:[{validator:(e,a,r)=>{this.form.reward_data.lenght<1||""===a&&r(new Error("天數不能為空！")),r()},required:!0,trigger:"blur"}],point:[{validator:(e,a,r)=>{""===a?r(new Error("請輸入連續簽到積分數！")):r()},required:!0,trigger:"blur"}]}}},created(){this.getData()},methods:{contentChangeFunc(e){this.ueditor.text=e},getData(){let e=this;e.loading=!0,n.getData().then((a=>{e.loading=!1;let r=a.data.vars.values;if(1==r.is_increase&&(e.form.is_increase=!0),1==r.is_open&&(e.form.is_open=!0,e.form.increase_reward=r.increase_reward,e.form.no_increase=r.no_increase,e.form.ever_sign=r.ever_sign,e.form.ever_sign=r.ever_sign,e.ueditor.text=r.content,r.reward_data)){let a=r.reward_data.length;for(let e=0;e<a;e++){let a=r.reward_data[e];1==a.is_coupon?a.is_coupon=!0:a.is_coupon=!1,1==a.is_point?a.is_point=!0:a.is_point=!1}e.form.reward_data=r.reward_data}})).catch((e=>{}))},onSubmit(){let a=this,r=a.form;r.is_open&&(r.content=a.ueditor.text),a.loading=!0,a.$refs.ruleForm.validate((l=>{l&&n.saveData(r,!0).then((r=>{e({message:"恭喜你，儲存成功",type:"success"}),a.getData()})).catch((e=>{}))}))},getContent:function(){return this.editor?this.editor.getContent():""},addReward(){this.form.reward_data.push({day:0,is_point:!1,point:0,is_coupon:!1,coupon:[]})},deleteRewardClick(e){this.form.reward_data.splice(e,1)}}},k=e=>(y("data-v-6d40a00e"),e=e(),x(),e),q={key:0},z={class:"open-sign"},F=k((()=>g("span",{class:"gray9"},"是否開啟簽到有禮",-1))),D={class:"mt16"},E=k((()=>g("div",{class:"common-form"},"每日簽到固定獎勵",-1))),R={class:"max-w460 d-s-c"},S={class:"flex-1"},A=k((()=>g("span",{class:"ml10"},"積分",-1))),I={key:0,class:"max-w460 border p-0-20 pt16 mt10"},P={class:"d-s-c"},W={class:"flex-1"},$=k((()=>g("span",{class:"ml10"},"積分",-1))),B={class:"d-s-c"},H={class:"flex-1"},O=k((()=>g("span",{class:"ml10"},"天起不再遞增",-1))),Q=k((()=>g("div",{class:"common-form"},"連續簽到額外獎勵 （達到額外獎勵最大天數時，繼續簽到不會再獲得額外獎勵，斷籤後重新開始計算）",-1))),Y={class:"reward-list max-w460"},G={class:"d-s-c"},J={class:"flex-1"},K=k((()=>g("span",{class:"ml10 pr16"},"天",-1))),L={class:"d-s-c"},M={key:0},N={class:"d-s-c"},T={class:"flex-1"},X=k((()=>g("span",{class:"ml10 pr16"},"積分",-1))),Z=k((()=>g("div",{class:"common-form"},"規則",-1))),ee={class:"edit_container"},ae={class:"common-button-wrapper"};const re=C(U,[["render",function(e,n,m,y,x,C){const U=a,k=r,re=l,le=s,se=o,oe=i,ie=t,te=p("Uediter"),de=d;return x.loading?w("",!0):(u(),c("div",q,[_(de,{size:"small",model:x.form,rules:x.rules,ref:"ruleForm","label-width":"100px"},{default:f((()=>[g("div",z,[F,_(U,{modelValue:x.form.is_open,"onUpdate:modelValue":n[0]||(n[0]=e=>x.form.is_open=e),class:"ml10"},null,8,["modelValue"])]),v(g("div",D,[E,_(re,{label:"每日簽到送",prop:"ever_sign"},{default:f((()=>[g("div",R,[g("div",S,[_(k,{modelValue:x.form.ever_sign,"onUpdate:modelValue":n[1]||(n[1]=e=>x.form.ever_sign=e),placeholder:"0",type:"number"},null,8,["modelValue"])]),A])])),_:1}),_(re,{label:"遞增獎勵"},{default:f((()=>[_(se,null,{default:f((()=>[_(le,{modelValue:x.form.is_increase,"onUpdate:modelValue":n[2]||(n[2]=e=>x.form.is_increase=e),label:!0},{default:f((()=>[b("有")])),_:1},8,["modelValue"]),_(le,{modelValue:x.form.is_increase,"onUpdate:modelValue":n[3]||(n[3]=e=>x.form.is_increase=e),label:!1},{default:f((()=>[b("無")])),_:1},8,["modelValue"])])),_:1}),x.form.is_increase?(u(),c("div",I,[_(re,{label:"第二天起遞增獎勵","label-width":"120px",prop:"increase_reward"},{default:f((()=>[g("div",P,[g("div",W,[_(k,{modelValue:x.form.increase_reward,"onUpdate:modelValue":n[4]||(n[4]=e=>x.form.increase_reward=e),placeholder:"請輸入第二天起遞增積分數",min:"0",type:"number"},null,8,["modelValue"])]),$])])),_:1}),_(re,{label:"第","label-width":"120px",prop:"no_increase"},{default:f((()=>[g("div",B,[g("div",H,[_(k,{modelValue:x.form.no_increase,"onUpdate:modelValue":n[5]||(n[5]=e=>x.form.no_increase=e),placeholder:"請輸入第幾天不再遞增",min:"0",type:"number"},null,8,["modelValue"])]),O])])),_:1})])):w("",!0)])),_:1}),Q,_(re,{label:"額外獎勵"},{default:f((()=>[g("div",Y,[(u(!0),c(h,null,j(x.form.reward_data,((e,a)=>(u(),c("div",{class:"reward-item pr border",key:a},[_(oe,{class:"delete-reward",onClick:e=>C.deleteRewardClick(a),type:"danger",size:"small",icon:"Close",circle:""},null,8,["onClick"]),_(re,{label:"連續簽到",prop:"reward_data."+a+".day",rules:x.rules.day},{default:f((()=>[g("div",G,[g("div",J,[_(k,{modelValue:e.day,"onUpdate:modelValue":a=>e.day=a,placeholder:"請輸入連續簽到天數",class:"max-w460",type:"number",min:"0"},null,8,["modelValue","onUpdate:modelValue"])]),K])])),_:2},1032,["prop","rules"]),_(re,{label:"積分獎勵"},{default:f((()=>[g("div",L,[g("div",null,[_(ie,{modelValue:e.is_point,"onUpdate:modelValue":a=>e.is_point=a},null,8,["modelValue","onUpdate:modelValue"])]),e.is_point?(u(),c("div",M,[_(re,{label:"送","label-width":"40px",prop:"reward_data."+a+".point",rules:x.rules.point,style:{"margin-bottom":"0"}},{default:f((()=>[g("div",N,[g("div",T,[_(k,{modelValue:e.point,"onUpdate:modelValue":a=>e.point=a,placeholder:"請輸入連續簽到天數的積分",type:"number",min:"0"},null,8,["modelValue","onUpdate:modelValue"])]),X])])),_:2},1032,["prop","rules"])])):w("",!0)])])),_:2},1024)])))),128))]),_(se,null,{default:f((()=>[_(oe,{size:"small",icon:"Plus",onClick:C.addReward},{default:f((()=>[b("新增")])),_:1},8,["onClick"])])),_:1})])),_:1}),Z,_(re,{label:"規則說明："},{default:f((()=>[g("div",ee,[_(te,{text:x.ueditor.text,config:x.ueditor.config,ref:"ue",onContentChange:C.contentChangeFunc},null,8,["text","config","onContentChange"])])])),_:1})],512),[[V,x.form.is_open]]),g("div",ae,[_(oe,{type:"primary",size:"small",onClick:C.onSubmit,disabled:x.loading},{default:f((()=>[b("提交")])),_:1},8,["onClick","disabled"])])])),_:1},8,["model","rules"])]))}],["__scopeId","data-v-6d40a00e"]]);export{re as default};
