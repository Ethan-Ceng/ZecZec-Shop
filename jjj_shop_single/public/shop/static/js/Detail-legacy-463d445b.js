System.register(["./element-plus-legacy-4010b94c.js","./pointproduct-legacy-31e930c3.js","./index-legacy-a1d733aa.js","./@vue-legacy-a5eb5da2.js","./@vueuse-legacy-7e5b8ef2.js","./lodash-es-legacy-93596df5.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-4687536e.js","./call-bind-legacy-b90429f9.js","./get-intrinsic-legacy-4f34f38e.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-f19c70ad.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-b3eb717b.js","./pinia-legacy-9406b588.js","./vue-demi-legacy-97cfbb01.js","./axios-legacy-3cda2001.js","./qs-legacy-5fc46ed9.js","./side-channel-legacy-8f83241e.js","./object-inspect-legacy-2e2b0934.js","./vue-clipboard2-legacy-b2d9783e.js","./clipboard-legacy-b868140c.js","./vue-ueditor-wrap-legacy-53d1452b.js"],(function(e,t){"use strict";var l,o,n,a,u,s,r,c,i,d,p,_,f,m,g,y,h;return{setters:[function(e){l=e.l,o=e.d,n=e.e,a=e.i,u=e.c,s=e.q},function(e){r=e.P},function(e){c=e._},function(e){i=e.o,d=e.T,p=e.S,_=e.P,f=e.c,m=e.Q,g=e.a9,y=e.W,h=e.X},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("default",c({data:function(){return{form1:{deduct_stock_type:10,status:0,product_id:0,sort:1},formLabelWidth:"120px",loading:!1,dialogVisible:!1,point_product_id:0,productDetail:{spec_type:10,sku:{},specData:{}}}},props:["open_edit","userModel"],created:function(){this.dialogVisible=this.open_edit,this.point_product_id=this.userModel.point_product_id,this.getData()},methods:{getData:function(){var e=this,t=e.point_product_id;r.getProductData({point_product_id:t},!0).then((function(t){e.form1=t.data.data,e.form1.product_id=t.data.data.product_id,e.productDetail.spec_type=e.form1.product.spec_type,e.productDetail.specData=t.data.specData,e.buildSkulist()})).catch((function(t){e.loading=!1}))},buildSkulist:function(){for(var e=this,t=e.productDetail.specData.spec_attr,l=[],o=0;o<t.length;o++)l.push(t[o].spec_items);var n=e.calcDescartes(l),a=[];for(o=0;o<n.length;o++){var u=[],s=[];Array.isArray(n[o])?u=n[o]:u.push(n[o]);for(var r=0;r<u.length;r++)s.push(u[r].item_id);a.push({spec_sku_id:s.join("_"),rows:u,spec_form:{}})}if(e.productDetail.specData.spec_list.length>0&&a.length>0)for(o=0;o<a.length;o++){var c=e.productDetail.specData.spec_list.filter((function(e){return e.spec_sku_id===a[o].spec_sku_id}));c.length>0&&(a[o].spec_form=c[0].spec_form,a[o].spec_form.product_sku_id=c[0].product_sku_id),(c=e.form1.sku.filter((function(e){return e.product_sku_id===a[o].spec_form.product_sku_id}))).length>0&&(a[o].spec_form.point_money=c[0].point_money,a[o].spec_form.point_num=c[0].point_num,a[o].spec_form.stock=c[0].stock,a[o].spec_form.point_product_sku_id=c[0].point_product_sku_id)}e.productDetail.specData.spec_list=a},calcDescartes:function(e){return e.length<2?e[0]||[]:[].reduce.call(e,(function(e,t){var l=[];return e.forEach((function(e){t.forEach((function(t){var o=[].concat(Array.isArray(e)?e:[e]);o.push(t),l.push(o)}))})),l}))},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,l=e.columnIndex,o=this.productDetail.specData.spec_attr,n=1;if(l<o.length-1){for(var a=l+1,u=o.length-1,s=a;s<=u;s++)n*=o[s].spec_items.length;return t%n==0?{rowspan:n,colspan:1}:{rowspan:0,colspan:0}}},dialogFormVisible:function(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},[["render",function(e,t,r,c,b,j){var D=l,k=o,v=n,V=a,w=u,x=s;return i(),d(x,{title:"商品規格",modelValue:b.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b.dialogVisible=e}),onClose:j.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"},{default:p((function(){return[_(w,{size:"small",ref:"form",model:b.form1,"label-width":"250px",loading:b.loading},{default:p((function(){return[_(v,{label:"","label-width":"20px"},{default:p((function(){return[_(V,{data:b.productDetail.specData.spec_list,"span-method":j.objectSpanMethod,border:"",style:{width:"100%","margin-top":"20px"}},{default:p((function(){return[(i(!0),f(m,null,g(b.productDetail.specData.spec_attr,(function(e,t){return i(),d(D,{width:"180",label:e.group_name,key:e.group_name},{default:p((function(e){return[y(h(e.row.rows[t].spec_value),1)]})),_:2},1032,["label"])})),128)),_(D,{label:"兌換積分"},{default:p((function(e){return[_(v,{label:"",style:{"margin-bottom":"0"}},{default:p((function(){return[_(k,{size:"small",type:"number",modelValue:e.row.spec_form.point_num,"onUpdate:modelValue":function(t){return e.row.spec_form.point_num=t},disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:1}),_(D,{label:"兌換金額"},{default:p((function(e){return[_(v,{label:"",style:{"margin-bottom":"0"}},{default:p((function(){return[_(k,{size:"small",type:"number",modelValue:e.row.spec_form.point_money,"onUpdate:modelValue":function(t){return e.row.spec_form.point_money=t},disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:1}),_(D,{label:"活動庫存"},{default:p((function(e){return[_(v,{label:"",style:{"margin-bottom":"0"}},{default:p((function(){return[_(k,{size:"small",type:"number",modelValue:e.row.spec_form.stock,"onUpdate:modelValue":function(t){return e.row.spec_form.stock=t},disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:1})]})),_:1},8,["data","span-method"])]})),_:1})]})),_:1},8,["model","loading"])]})),_:1},8,["modelValue","onClose"])}]]))}}}));
