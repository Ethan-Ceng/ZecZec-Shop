import{_ as e}from"./Upload-71ca9325.js";import{E as a,d as o,e as l,O as s,k as t,c as i,f as r}from"./element-plus-84a27f94.js";import{A as m}from"./advance-6f8004f3.js";import{d}from"./vuedraggable-54f344de.js";import{ae as p,ap as n,o as u,c as g,P as c,S as _,a as f,W as j,$ as y,a1 as b,T as h,Y as v}from"./@vue-8fe4574d.js";import{_ as V}from"./index-5ae5860a.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-a056b7b7.js";import"./sortablejs-88eb33dd.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const U={components:{Upload:e,draggable:d},data:()=>({form:{end_time:10,pay_time:10,image:[],money_return:0,is_coupon:!1,is_agent:!1,is_point:!1,is_user_grade:!1},setting:[],loading:!1,isUpload:!1,config:{total:9,file_type:"image"}}),created(){this.getSetting()},methods:{openUpload(){this.isUpload=!0},returnProductImgsFunc(e){if(null!=e){let a=this.form.image.concat(e);this.form.image=a}this.isUpload=!1},deleteImg(e){this.form.image.splice(e,1)},getSetting(){let e=this;m.getSetting({},!0).then((a=>{e.loading=!1,e.form=a.data.vars.values})).catch((e=>{}))},onSubmit(){let e=this,o=e.form;return o.end_time>-1&&o.end_time?o.pay_time>-1&&o.pay_time?(e.loading=!0,void m.saveSetting(o,!0).then((o=>{e.loading=!1,1==o.code?(a({message:"恭喜你，儲存成功",type:"success"}),e.getSetting()):e.loading=!1})).catch((a=>{e.loading=!1}))):(a({message:"未支付尾款時間有誤",type:"error"}),!1):(a({message:"未支付定金時間有誤",type:"error"}),!1)}}},x={class:"user"},w=f("div",{class:"common-form"},"預售活動設定",-1),k={style:{width:"500px"}},S=f("p",{class:"gray"},"預售訂單下單未付款，n分鐘後自動關閉，設定0則不自動關閉",-1),C={style:{width:"500px"}},I=f("p",{class:"gray"},"預售訂單下單未付款，n小時後自動關閉，設定0則不自動關閉",-1),z=f("p",{class:"ww100 gray"},"注：如需使用分銷功能必須在 [分銷中心 - 分銷設定] 中開啟",-1),q={class:"draggable-list"},P={class:"item"},A=["onClick"],F=f("div",{class:"gray9"},"建議圖片尺寸為750px*300px",-1),R={class:"common-button-wrapper"};const B=V(U,[["render",function(a,m,d,V,U,B){const E=o,K=l,O=s,T=p("Close"),W=t,Y=p("draggable"),$=p("Plus"),D=i,G=r,H=e,J=n("img-url");return u(),g("div",x,[c(D,{size:"small",ref:"form",model:U.form,"label-width":"150px"},{default:_((()=>[w,c(K,{label:" 未支付定金訂單",prop:"end_time",rules:[{required:!0,message:" "}]},{default:_((()=>[f("div",k,[c(E,{placeholder:"請輸入",modelValue:U.form.end_time,"onUpdate:modelValue":m[0]||(m[0]=e=>U.form.end_time=e),type:"number"},{append:_((()=>[j(" 分鐘後自動關閉 ")])),_:1},8,["modelValue"]),S])])),_:1}),c(K,{label:"未支付尾款訂單",prop:"pay_time",rules:[{required:!0,message:" "}]},{default:_((()=>[f("div",C,[c(E,{placeholder:"請輸入",modelValue:U.form.pay_time,"onUpdate:modelValue":m[1]||(m[1]=e=>U.form.pay_time=e),type:"number"},{append:_((()=>[j(" 小時後自動關閉 ")])),_:1},8,["modelValue"]),I])])),_:1}),c(K,{label:"是否允許退定金",prop:"money_return"},{default:_((()=>[c(O,{modelValue:U.form.money_return,"onUpdate:modelValue":m[2]||(m[2]=e=>U.form.money_return=e)},null,8,["modelValue"])])),_:1}),c(K,{label:"是否開啟優惠券抵扣",prop:"is_coupon"},{default:_((()=>[c(O,{modelValue:U.form.is_coupon,"onUpdate:modelValue":m[3]||(m[3]=e=>U.form.is_coupon=e)},null,8,["modelValue"])])),_:1}),c(K,{label:"是否開啟分銷",prop:"is_agent"},{default:_((()=>[c(O,{modelValue:U.form.is_agent,"onUpdate:modelValue":m[4]||(m[4]=e=>U.form.is_agent=e)},null,8,["modelValue"]),z])),_:1}),c(K,{label:"是否開啟積分抵扣",prop:"is_point"},{default:_((()=>[c(O,{modelValue:U.form.is_point,"onUpdate:modelValue":m[5]||(m[5]=e=>U.form.is_point=e)},null,8,["modelValue"])])),_:1}),c(K,{label:"是否開啟會員折扣",prop:"is_user_grade"},{default:_((()=>[c(O,{modelValue:U.form.is_user_grade,"onUpdate:modelValue":m[6]||(m[6]=e=>U.form.is_user_grade=e)},null,8,["modelValue"])])),_:1}),c(K,{label:"活動圖片：",rules:[{required:!0,message:"請上傳活動圖片"}],prop:"image"},{default:_((()=>[f("div",q,[c(Y,{modelValue:U.form.image,"onUpdate:modelValue":m[7]||(m[7]=e=>U.form.image=e),class:"draggable-list"},{item:_((({element:e,index:a})=>[f("div",P,[y(f("img",null,null,512),[[J,e.file_path]]),f("a",{href:"javascript:void(0);",class:"delete-btn",onClick:b((e=>B.deleteImg(a)),["stop"])},[c(W,null,{default:_((()=>[c(T)])),_:1})],8,A)])])),_:1},8,["modelValue"]),f("div",{class:"item img-select",onClick:m[8]||(m[8]=e=>B.openUpload())},[c(W,null,{default:_((()=>[c($)])),_:1})])]),F])),_:1})])),_:1},8,["model"]),f("div",R,[c(G,{size:"small",type:"primary",onClick:B.onSubmit,disabled:U.loading},{default:_((()=>[j("儲存")])),_:1},8,["onClick","disabled"])]),U.isUpload?(u(),h(H,{key:0,config:U.config,isupload:U.isUpload,onReturnImgs:B.returnProductImgsFunc},{default:_((()=>[j("上傳圖片 ")])),_:1},8,["config","isupload","onReturnImgs"])):v("",!0)])}]]);export{B as default};
