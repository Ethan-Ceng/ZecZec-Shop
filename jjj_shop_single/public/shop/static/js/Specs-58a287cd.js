import{E as e,l as s,f as l,i as t,q as i,v as a}from"./element-plus-84a27f94.js";import{P as o}from"./product-6ff3546d.js";import{_ as d}from"./index-5ae5860a.js";import{o as c,T as n,S as r,P as p,W as u,Y as h,a as m,$ as g,X as C}from"./@vue-8fe4574d.js";const b={class:"table-wrap"};const f=d({data:()=>({loading:!0,specsList:[],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isspecs","productId","excludeIds","islist"],watch:{isspecs:function(e,s){e!=s&&e&&(this.specsList=[],this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{SingleFunc(e){this.multipleSelection=[e],this.addClerk()},selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,getData(){let e=this;o.chooseSpec({product_id:e.productId},!0).then((s=>{1==s.code&&(e.loading=!1,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?s.data.specList.forEach((s=>{e.excludeIds.indexOf(s.product_sku_id)>-1?s.noChoose=!1:s.noChoose=!0})):s.data.specList.forEach((e=>{e.noChoose=!0})),e.specsList=s.data.specList)})).catch((e=>{}))},addClerk(){let s=this,l=null;s.multipleSelection.length<1?e({message:"請至少選擇一件產品商品！",type:"error"}):(l=s.islist&&void 0!==s.islist?s.multipleSelection:s.multipleSelection[0],s.params=l,s.type="success",s.dialogVisible=!1)},dialogFormVisible(){this.$emit("close",{type:this.type,open:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,o,d,f,y,k){const _=s,S=l,V=t,x=i,w=a;return c(),n(x,{title:"選擇規格",modelValue:y.dialogVisible,"onUpdate:modelValue":o[1]||(o[1]=e=>y.dialogVisible=e),onClose:k.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"},{footer:r((()=>[p(S,{size:"small",onClick:o[0]||(o[0]=e=>y.dialogVisible=!1)},{default:r((()=>[u("取 消")])),_:1}),d.islist?(c(),n(S,{key:0,size:"small",type:"primary",onClick:k.addClerk},{default:r((()=>[u("確 定")])),_:1},8,["onClick"])):h("",!0)])),default:r((()=>[m("div",null,[m("div",b,[g((c(),n(V,{size:"small",data:y.specsList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:k.tableCurrentChange},{default:r((()=>[p(_,{label:"產品/規格"},{default:r((({row:e})=>[u(C(e.spec_name),1)])),_:1}),d.islist?(c(),n(_,{key:0,type:"selection",selectable:k.selectableFunc,width:"44"},null,8,["selectable"])):h("",!0),d.islist?h("",!0):(c(),n(_,{key:1,width:"80",label:"單選"},{default:r((({row:e})=>[e.noChoose?(c(),n(S,{key:0,size:"small",onClick:s=>k.SingleFunc(e)},{default:r((()=>[u("選擇")])),_:2},1032,["onClick"])):(c(),n(S,{key:1,size:"small",disabled:""},{default:r((()=>[u("已選")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[w,y.loading]])])])])),_:1},8,["modelValue","onClose"])}]]);export{f as _};
