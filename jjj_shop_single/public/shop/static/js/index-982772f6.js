import{a,M as e,b as l,S as t,H as o,c as s,_ as i}from"./Setlink-c577cec3.js";import{_ as r}from"./Upload-71ca9325.js";import{x as d,y as n,f as m,q as c,E as u,m as p,g as f,M as g,d as v,k as h,e as D,c as b}from"./element-plus-84a27f94.js";import{P as x}from"./page-ebe86fd4.js";import{_ as k}from"./index-5ae5860a.js";import{o as y,T as _,S as C,P as V,Y as j,a as w,c as U,X as P,W as z,bb as I,b9 as E,ae as F,ap as A,V as H,Q as S,a9 as M,$ as N,a1 as R}from"./@vue-8fe4574d.js";import{d as L}from"./vuedraggable-54f344de.js";import"./article-f18c4871.js";import"./product-6ff3546d.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";import"./vue-a056b7b7.js";import"./sortablejs-88eb33dd.js";const B={components:{Pages:a,Marketing:e,Article:l,SmallProgram:t,H5:o,DiyPage:s},data:()=>({dialogVisible:!0,activeData:null,activeName:"pages"}),props:["is_linkset"],created(){this.dialogVisible=this.is_linkset},methods:{resetting(){this.activeData={type:"",url:"",name:"請選擇"},this.dialogFormVisible(!0)},dialogFormVisible(a){a?(-1!=this.activeData.url.indexOf("giftpackage")&&(this.activeData.name="禮包購-"+this.activeData.name),-1!=this.activeData.url.indexOf("invite")&&(this.activeData.name="邀請有禮-"+this.activeData.name),this.$emit("closeDialog",this.activeData)):this.$emit("closeDialog",null)},activeDataFunc(a){this.activeData=a}}},T=a=>(I("data-v-394016ec"),a=a(),E(),a),$={slot:"footer",class:"dialog-footer d-b-c"},q={class:"flex-1"},O={key:0,class:"d-s-s d-c tl"},G={class:"text-ellipsis setlink-set-link"},Q=T((()=>w("span",null,"當前連結：",-1))),W={class:"gray9"},X=T((()=>w("span",{class:"p-0-10 gray"},"/",-1))),Y={class:"blue"},J={class:"text-ellipsis gray",style:{"font-size":"10px"}},K={key:1,class:"tl"},Z={class:"setlink-footer-btn"};const aa={data:()=>({isupload:!1,formData:{type:"0",is_auto:"0",backgroundColor:"#ffffff",textColor:"#333333",textHoverColor:"red",bulge:!1,list:[]},is_linkset:!1,index:0}),components:{Upload:r,Setlink:k(B,[["render",function(e,t,o,i,r,u){const p=a,f=d,g=l,v=s,h=n,D=m,b=c;return y(),_(b,{title:"超連結設定","append-to-body":"",visible:r.dialogVisible,"onUpdate:visible":t[3]||(t[3]=a=>r.dialogVisible=a),onClose:u.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"800px"},{default:C((()=>[V(h,{type:"border-card",modelValue:r.activeName,"onUpdate:modelValue":t[0]||(t[0]=a=>r.activeName=a)},{default:C((()=>[V(f,{label:"頁面",name:"pages"},{default:C((()=>["pages"==r.activeName?(y(),_(p,{key:0,onChangeData:u.activeDataFunc},null,8,["onChangeData"])):j("",!0)])),_:1}),V(f,{label:"文章",name:"Article"},{default:C((()=>["Article"==r.activeName?(y(),_(g,{key:0,onChangeData:u.activeDataFunc},null,8,["onChangeData"])):j("",!0)])),_:1}),V(f,{label:"自定義",name:"diypage"},{default:C((()=>["diypage"==r.activeName?(y(),_(v,{key:0,onChangeData:u.activeDataFunc},null,8,["onChangeData"])):j("",!0)])),_:1})])),_:1},8,["modelValue"]),w("div",$,[w("div",q,[null!=r.activeData?(y(),U("div",O,[w("p",G,[Q,w("span",W,P(r.activeData.type),1),X,w("span",Y,P(r.activeData.name),1)]),w("p",J,P(r.activeData.url),1)])):(y(),U("div",K," 暫無 "))]),w("div",Z,[V(D,{size:"small",onClick:t[1]||(t[1]=a=>u.dialogFormVisible(!1))},{default:C((()=>[z("取 消")])),_:1}),V(D,{size:"small",type:"warning",onClick:u.resetting},{default:C((()=>[z("清空")])),_:1},8,["onClick"]),V(D,{size:"small",type:"primary",onClick:t[2]||(t[2]=a=>u.dialogFormVisible(!0))},{default:C((()=>[z("確 定")])),_:1})])])])),_:1},8,["visible","onClose"])}],["__scopeId","data-v-394016ec"]]),draggable:L},created(){this.getData()},methods:{getData(){let a=this;x.getTabbar({},!0).then((e=>{a.formData=e.data.vars.data})).catch((e=>{a.loading=!1}))},Submit(){let a=this;a.loading=!0;let e=a.formData;(e.list.length<=0||!e.list)&&(e={}),x.editTabbar({data:e},!0).then((e=>{a.loading=!1,u({message:"恭喜你，修改成功",type:"success"}),a.getData()})).catch((e=>{a.loading=!1}))},changeLink(a){this.is_linkset=!0,this.index=a},closeLinkset(a){this.is_linkset=!1,this.formData.list[this.index].link_url="/"+a.url,this.formData.list[this.index].text=a.name},onEditorDeleleData:function(a){if(this.formData.list.length<=1)return u({message:"至少保留一個",type:"error"}),!1;this.formData.list.splice(a,1)},onEditorSelectImage:function(a,e){this.isupload=!0,this.imgModel={index:a,imgUrl:e}},returnImgsFunc(a){null!=a&&(this.imgModel.index[this.imgModel.imgUrl]=a[0].file_path),this.isupload=!1},onEditorResetColor:function(a,e,l){a[e]=l},onEditorAddData:function(){let a=this;if(a.formData.list){if(a.formData.list.length>=5)return u({message:"最多新增5個",type:"error"}),!1;{let e={iconPath:"",text:"",is_show:!0,selectedIconPath:"",link:{wap_url:""}};a.formData.list.push(e)}}else{let e=[{...{iconPath:"",text:"",is_show:!0,selectedIconPath:"",link:{wap_url:""}}}];a.formData={type:0,backgroundColor:"",textColor:"",textHoverColor:"",bulge:!1,list:[]},a.formData.list=e}},mouseenter(a){a.target.childNodes[2].style.color=this.formData.textHoverColor},mouseleave(a){a.target.childNodes[2].style.color=this.formData.textColor}}},ea=a=>(I("data-v-8dd2c278"),a=a(),E(),a),la={class:"d-s-s pb50 diy-tabbar"},ta={class:"flex-1 mr30 pt30"},oa={class:"model-container d-c d-e-c"},sa={class:"d-a-c"},ia={key:0},ra={class:"nav_img",alt:""},da={class:"param-container"},na=ea((()=>w("div",{class:"form-title"},"底部導航",-1))),ma=ea((()=>w("div",{class:"f16 gray3 form-subtitle"},"樣式設定",-1))),ca={class:"form-item"},ua=ea((()=>w("div",{class:"form-label"},"是否開啟自定義：",-1))),pa={class:"flex-1"},fa={class:"form-item"},ga=ea((()=>w("div",{class:"form-label"},"導航型別：",-1))),va={class:"flex-1"},ha={class:"form-item"},Da=ea((()=>w("div",{class:"form-label"},"背景顏色：",-1))),ba={class:"flex-1 d-s-c",style:{height:"36px"}},xa={class:"form-item"},ka=ea((()=>w("div",{class:"form-label"},"文字顏色：",-1))),ya={class:"flex-1 d-s-c",style:{height:"36px"}},_a={class:"form-item"},Ca=ea((()=>w("div",{class:"form-label"},"選中顏色：",-1))),Va={class:"flex-1 d-s-c",style:{height:"36px"}},ja=ea((()=>w("div",{class:"form-chink"},null,-1))),wa=ea((()=>w("div",{class:"f16 gray3 form-subtitle"},[z("內容設定 "),w("span",{class:"gray f12"},"圖片建議寬度88*88px；滑鼠拖拽左側圓點可調整導航順序")],-1))),Ua={class:"d-b-c param-img-item"},Pa={class:"d-c d-c-c mr10",style:{width:"50px"}},za={class:"right"},Ia={class:"d-s-c mb16 ww100"},Ea=ea((()=>w("div",{class:"url-box d-s-c"},[w("span",{class:"key-name"},"圖示")],-1))),Fa={class:"d-a-c flex-1"},Aa={class:"icon"},Ha=ea((()=>w("div",{class:"icon-text"},"未選中",-1))),Sa=["onClick"],Ma={class:"icon"},Na=ea((()=>w("div",{class:"icon-text"},"已選中",-1))),Ra=["onClick"],La={class:"url-box mb16 flex-1 d-s-c ww100"},Ba=ea((()=>w("span",{class:"key-name"},"名稱",-1))),Ta={class:"d-s-c ww100"},$a={class:"url-box flex-1 d-s-c"},qa=ea((()=>w("span",{class:"key-name"},"連結",-1))),Oa={key:1,class:"d-c-c pb16"},Ga={class:"common-button-wrapper"};const Qa=k(aa,[["render",function(a,e,l,t,o,s){const d=p,n=f,c=g,u=v,x=m,k=F("MoreFilled"),I=h,E=F("CloseBold"),L=D,B=F("ArrowRight"),T=F("draggable"),$=b,q=r,O=i,G=A("img-url");return y(),U("div",la,[w("div",ta,[w("div",oa,[w("div",{class:"img-box p10 ww100",style:H("background-color:"+o.formData.backgroundColor+";")},[w("div",sa,[(y(!0),U(S,null,M(o.formData.list,((a,l)=>(y(),U("div",{key:l,class:"d-c d-c-c",onMouseenter:e[0]||(e[0]=(...a)=>s.mouseenter&&s.mouseenter(...a)),onMouseleave:e[1]||(e[1]=(...a)=>s.mouseleave&&s.mouseleave(...a))},[2!=o.formData.type?(y(),U("div",ia,[N(w("img",ra,null,512),[[G,0==l?a.selectedIconPath:a.iconPath]])])):j("",!0),1!=o.formData.type?(y(),U("div",{key:1,style:H(0==l?"color:"+o.formData.textHoverColor+";":"color:"+o.formData.textColor+";")},P(a.text),5)):j("",!0)],32)))),128))])],4)])]),w("div",da,[na,V($,{size:"small",model:o.formData,"label-width":"130px"},{default:C((()=>[ma,w("div",ca,[ua,w("div",pa,[V(n,{modelValue:o.formData.is_auto,"onUpdate:modelValue":e[2]||(e[2]=a=>o.formData.is_auto=a)},{default:C((()=>[V(d,{label:"1"},{default:C((()=>[z("開啟")])),_:1}),V(d,{label:"0"},{default:C((()=>[z("關閉")])),_:1})])),_:1},8,["modelValue"])])]),w("div",fa,[ga,w("div",va,[V(n,{modelValue:o.formData.type,"onUpdate:modelValue":e[3]||(e[3]=a=>o.formData.type=a)},{default:C((()=>[V(d,{label:"0"},{default:C((()=>[z("圖文")])),_:1}),V(d,{label:"1"},{default:C((()=>[z("圖片")])),_:1}),V(d,{label:"2"},{default:C((()=>[z("文字")])),_:1})])),_:1},8,["modelValue"])])]),w("div",ha,[Da,w("div",ba,[V(c,{size:"default",modelValue:o.formData.backgroundColor,"onUpdate:modelValue":e[4]||(e[4]=a=>o.formData.backgroundColor=a)},null,8,["modelValue"]),V(u,{class:"ml10",modelValue:o.formData.backgroundColor,"onUpdate:modelValue":e[5]||(e[5]=a=>o.formData.backgroundColor=a)},null,8,["modelValue"]),V(x,{style:{"margin-left":"10px"},onClick:e[6]||(e[6]=R((a=>s.onEditorResetColor(o.formData,"backgroundColor","#ffffff")),["stop"])),type:"primary",link:""},{default:C((()=>[z("重置")])),_:1})])]),w("div",xa,[ka,w("div",ya,[V(c,{size:"default",modelValue:o.formData.textColor,"onUpdate:modelValue":e[7]||(e[7]=a=>o.formData.textColor=a)},null,8,["modelValue"]),V(u,{class:"ml10",modelValue:o.formData.textColor,"onUpdate:modelValue":e[8]||(e[8]=a=>o.formData.textColor=a)},null,8,["modelValue"]),V(x,{style:{"margin-left":"10px"},onClick:e[9]||(e[9]=R((a=>s.onEditorResetColor(o.formData,"textColor","#333333")),["stop"])),type:"primary",link:""},{default:C((()=>[z("重置")])),_:1})])]),w("div",_a,[Ca,w("div",Va,[V(c,{size:"default",modelValue:o.formData.textHoverColor,"onUpdate:modelValue":e[10]||(e[10]=a=>o.formData.textHoverColor=a)},null,8,["modelValue"]),V(u,{class:"ml10",modelValue:o.formData.textHoverColor,"onUpdate:modelValue":e[11]||(e[11]=a=>o.formData.textHoverColor=a)},null,8,["modelValue"]),V(x,{style:{"margin-left":"10px"},onClick:e[12]||(e[12]=R((a=>s.onEditorResetColor(o.formData,"textHoverColor","#E2231A")),["stop"])),type:"primary",link:""},{default:C((()=>[z("重置")])),_:1})])]),ja,wa,o.formData.list&&o.formData.list.length>0?(y(),_(T,{key:0,modelValue:o.formData.list,"onUpdate:modelValue":e[13]||(e[13]=a=>o.formData.list=a),group:"people","item-key":"index",class:"draggable-list"},{item:C((({element:e,index:l})=>[w("div",Ua,[w("div",Pa,[(y(),U(S,null,M(6,(a=>V(I,{style:{height:"6px"},color:"#999",size:"12px",key:a},{default:C((()=>[V(k)])),_:2},1024))),64))]),w("div",za,[V(I,{class:"el-icon-DeleteFilled",onClick:a=>s.onEditorDeleleData(l)},{default:C((()=>[V(E)])),_:2},1032,["onClick"]),"店鋪"==e.text?(y(),_(L,{key:0,label:"顯示隱藏："},{default:C((()=>[V(n,{modelValue:e.is_show,"onUpdate:modelValue":a=>e.is_show=a},{default:C((()=>[V(d,{label:!1},{default:C((()=>[z("隱藏")])),_:1}),V(d,{label:!0},{default:C((()=>[z("顯示")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)):j("",!0),w("div",Ia,[Ea,w("div",Fa,[w("div",Aa,[Ha,N(w("img",{alt:"",onClick:a=>s.onEditorSelectImage(e,"iconPath")},null,8,Sa),[[G,e.iconPath]])]),w("div",Ma,[Na,N(w("img",{alt:"",onClick:a=>s.onEditorSelectImage(e,"selectedIconPath")},null,8,Ra),[[G,e.selectedIconPath]])])])]),w("div",La,[Ba,V(u,{maxlength:"6","show-word-limit":"",modelValue:e.text,"onUpdate:modelValue":a=>e.text=a},null,8,["modelValue","onUpdate:modelValue"])]),w("div",Ta,[w("div",$a,[qa,V(u,{"suffix-icon":a.ArrowRight,onClick:a=>s.changeLink(l),modelValue:e.link_url,"onUpdate:modelValue":a=>e.link_url=a},{suffix:C((()=>[V(I,{color:"#333",size:"16px"},{default:C((()=>[V(B)])),_:1})])),_:2},1032,["suffix-icon","onClick","modelValue","onUpdate:modelValue"])])])])])])),_:1},8,["modelValue"])):j("",!0),o.formData.list.length<5?(y(),U("div",Oa,[V(x,{plain:"",type:"primary",onClick:s.onEditorAddData},{default:C((()=>[z("+新增圖文導航"+P(o.formData.list.length)+"/5",1)])),_:1},8,["onClick"])])):j("",!0)])),_:1},8,["model"])]),w("div",Ga,[V(x,{size:"small",type:"primary",onClick:e[14]||(e[14]=a=>s.Submit())},{default:C((()=>[z("儲存")])),_:1})]),o.isupload?(y(),_(q,{key:0,isupload:o.isupload,config:{total:3},onReturnImgs:s.returnImgsFunc},null,8,["isupload","onReturnImgs"])):j("",!0),o.is_linkset?(y(),_(O,{key:1,is_linkset:o.is_linkset,onCloseDialog:s.closeLinkset},{default:C((()=>[z("選擇連結")])),_:1},8,["is_linkset","onCloseDialog"])):j("",!0)])}],["__scopeId","data-v-8dd2c278"]]);export{Qa as default};
