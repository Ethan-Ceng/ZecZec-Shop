import{a,E as e,s as t,t as l,e as s,d as o,f as r,c as i,x as n,y as m,l as c,i as d,p,v as u}from"./element-plus-84a27f94.js";import{P as h}from"./product-6ff3546d.js";import{_ as g}from"./index-5ae5860a.js";import{ap as b,o as w,c as f,a as _,P as j,S as v,Q as C,a9 as k,T as y,W as z,$ as D,X as S,Y as x}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const N={class:"product"},P={class:"common-seach-wrap"},V={class:"product-content"},F={class:"table-wrap"},L={class:"product-info"},q={class:"pic"},T={alt:""},U={class:"info"},$={class:"name"},M={class:"price"},A={class:"name"},E={key:0},O={key:0,class:"red"},Q={key:1,class:"orange"},W={key:2,class:"gray"},X={class:"ww100 text-ellipsis-2"},Y={key:0},B={key:1},G={key:0,class:"red fb"},H={key:1,class:"green"},I={key:2,class:"gray9"},J={class:"pagination"};const K=g({components:{},data:()=>({loading:!0,activeName:"-1",num:0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,searchForm:{score:0,name:""},commentList:[{name:"好評",val:10},{name:"中評",val:20},{name:"差評",val:30}],status:-1}),created(){this.getData()},methods:{handleCurrentChange(a){let e=this;e.curPage=a,e.loading=!0;let t=e.searchForm;e.getData(t)},handleSizeChange(a){this.curPage=1,this.pageSize=a,this.getData()},getData(a=""){let e=this,t={};t.status=e.status,t.page=e.curPage,t.list_rows=e.pageSize,""!=a&&(t.score=a.score,t.name=a.name),h.getCommentList(t,!0).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total,e.num=a.data.num})).catch((a=>{e.loading=!1}))},detailClick(a){this.$router.push({path:"/product/comment/Detail",query:{comment_id:a.comment_id}})},orderClick(a){this.$router.push({path:"/product/comment/Order",query:{order_id:a.order_id}})},delClick:function(t){let l=this;a.confirm("刪除後不可恢復，確認刪除該記錄嗎?","提示",{type:"warning"}).then((()=>{h.delComment({comment_id:t.comment_id}).then((a=>{e({message:"刪除成功",type:"success"}),l.getData()}))}))},onSubmit(){let a=this;a.loading=!0;let e=a.searchForm;e.page=a.curPage,e.list_rows=a.pageSize,e.status=a.status,h.getCommentList(e,!0).then((e=>{a.loading=!1,a.tableData=e.data.list.data,a.totalDataNumber=e.data.list.total})).catch((e=>{a.loading=!1}))},handleClick(a,e){let t=this;t.curPage=1,t.loading=!0,t.status=a,t.getData()}}},[["render",function(a,e,h,g,K,R){const Z=t,aa=l,ea=s,ta=o,la=r,sa=i,oa=n,ra=m,ia=c,na=d,ma=p,ca=b("img-url"),da=b("auth"),pa=u;return w(),f("div",N,[_("div",P,[j(sa,{size:"small",inline:!0,model:K.searchForm,class:"demo-form-inline"},{default:v((()=>[j(ea,{label:"評價"},{default:v((()=>[j(aa,{size:"small",modelValue:K.searchForm.score,"onUpdate:modelValue":e[0]||(e[0]=a=>K.searchForm.score=a),placeholder:""},{default:v((()=>[j(Z,{label:"全部",value:0}),(w(!0),f(C,null,k(K.commentList,((a,e)=>(w(),y(Z,{key:e,label:a.name,value:a.val},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),j(ea,{label:"商品名稱"},{default:v((()=>[j(ta,{size:"small",modelValue:K.searchForm.name,"onUpdate:modelValue":e[1]||(e[1]=a=>K.searchForm.name=a),placeholder:"請輸入商品名稱"},null,8,["modelValue"])])),_:1}),j(ea,null,{default:v((()=>[j(la,{size:"small",type:"primary",icon:"Search",onClick:R.onSubmit},{default:v((()=>[z("查詢")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),_("div",V,[_("div",F,[j(ra,{modelValue:K.activeName,"onUpdate:modelValue":e[2]||(e[2]=a=>K.activeName=a),onTabChange:R.handleClick},{default:v((()=>[j(oa,{label:"全部評價",name:"-1"}),j(oa,{label:"待稽核("+K.num+")",name:"0"},null,8,["label"]),j(oa,{label:"稽核透過",name:"1"}),j(oa,{label:"稽核未透過",name:"2"})])),_:1},8,["modelValue","onTabChange"]),D((w(),y(na,{size:"small",data:K.tableData,border:"",style:{width:"100%"}},{default:v((()=>[j(ia,{label:"商品",width:"400px"},{default:v((a=>[_("div",L,[_("div",q,[D(_("img",T,null,512),[[ca,a.row&&a.row.product.image[0].file_path]])]),_("div",U,[_("div",$,S(a.row&&a.row.product.product_name),1),_("div",M,"￥"+S(a.row&&a.row.product.product_price),1),_("div",A,"訂單號:"+S(a.row&&a.row.orderM?a.row.orderM.order_no:""),1)])])])),_:1}),j(ia,{prop:"user.nickName",label:"\t使用者"},{default:v((a=>[a.row.user?(w(),f("span",E,S(a.row.user.nickName),1)):x("",!0)])),_:1}),j(ia,{prop:"score",label:"評分"},{default:v((a=>[10==a.row.score?(w(),f("span",O,"好評")):20==a.row.score?(w(),f("span",Q,"中評")):30==a.row.score?(w(),f("span",W,"差評")):x("",!0)])),_:1}),j(ia,{prop:"content",label:"評價內容",width:"200"},{default:v((a=>[_("p",X,S(a.row.content),1)])),_:1}),j(ia,{prop:"is_picture",label:"圖片"},{default:v((a=>[0==a.row.is_picture?(w(),f("span",Y,"沒有")):(w(),f("span",B,"有"))])),_:1}),j(ia,{prop:"status",label:"評價狀態"},{default:v((a=>[0==a.row.status?(w(),f("span",G,"待稽核")):x("",!0),1==a.row.status?(w(),f("span",H,"稽核透過")):x("",!0),2==a.row.status?(w(),f("span",I,"稽核未透過")):x("",!0)])),_:1}),j(ia,{prop:"sort",label:"排序"}),j(ia,{prop:"create_time",label:"評論時間"}),j(ia,{fixed:"right",label:"操作",width:"110"},{default:v((a=>[D((w(),y(la,{onClick:e=>R.detailClick(a.row),type:"text",size:"small"},{default:v((()=>[z("詳情")])),_:2},1032,["onClick"])),[[da,"/product/comment/detail"]]),D((w(),y(la,{onClick:e=>R.delClick(a.row),type:"text",size:"small"},{default:v((()=>[z("刪除")])),_:2},1032,["onClick"])),[[da,"/product/comment/delete"]])])),_:1})])),_:1},8,["data"])),[[pa,K.loading]])]),_("div",J,[j(ma,{onSizeChange:R.handleSizeChange,onCurrentChange:R.handleCurrentChange,background:"","current-page":K.curPage,"page-size":K.pageSize,layout:"total, prev, pager, next, jumper",total:K.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])}]]);export{K as default};
