import{E as e,l as t,f as a,i,p as l,q as o,v as s}from"./element-plus-84a27f94.js";import{L as r}from"./live-bc011905.js";import{_ as n}from"./index-5ae5860a.js";import{o as d,T as p,S as c,a as m,P as u,W as h,Y as g,$ as b}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const C={class:"product-content"},j={class:"table-wrap"},f=["src"],y={class:"pagination"},_={class:"dialog-footer"};const S=n({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},categoryList:[],productList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null,excludeIds:[]}),props:["open_import","islist","room_id"],created(){this.dialogVisible=this.open_import,this.getData()},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,t=e.formInline;t.page=e.curPage,t.list_rows=e.pageSize,t.room_id=e.room_id,r.listProduct(t,!0).then((t=>{1==t.code&&(e.loading=!1,e.excludeIds=t.data.excludeIds,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?t.data.list.data.forEach((t=>{e.excludeIds.indexOf(t.goods_id)>-1?t.noChoose=!1:t.noChoose=!0})):e.islist||t.data.list.data.forEach((e=>{e.noChoose=!0})),e.productList=t.data.list.data,e.totalDataNumber=t.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let t=this,a=null;t.multipleSelection.length<1?e({message:"請至少選擇一件產品商品！",type:"error"}):(t.islist&&void 0!==t.islist?(t.multipleSelection.forEach((e=>{e.image=e.imagePath})),a=t.multipleSelection):(a=t.multipleSelection[0],a.image=a.imagePath),t.params=a,t.type="success",t.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,r,n,S,v,z){const k=t,w=a,x=i,V=l,I=o,D=s;return d(),p(I,{title:"選擇商品",modelValue:v.dialogVisible,"onUpdate:modelValue":r[1]||(r[1]=e=>v.dialogVisible=e),onClose:z.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!0,"append-to-body":!0,width:"900px"},{footer:c((()=>[m("div",_,[u(w,{size:"small",onClick:r[0]||(r[0]=e=>v.dialogVisible=!1)},{default:c((()=>[h("取 消")])),_:1}),n.islist?(d(),p(w,{key:0,size:"small",type:"primary",onClick:z.addClerk},{default:c((()=>[h("確 定")])),_:1},8,["onClick"])):g("",!0)])])),default:c((()=>[m("div",C,[m("div",j,[b((d(),p(x,{size:"small",data:v.productList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:z.tableCurrentChange},{default:c((()=>[u(k,{width:"70",label:"商品圖片"},{default:c((e=>[m("img",{src:e.row.cover_img,width:"30",height:"30"},null,8,f)])),_:1}),u(k,{prop:"name",label:"商品名稱"}),u(k,{prop:"price_type_text",label:"價格型別"}),u(k,{prop:"price_text",label:"價格",width:"200"}),u(k,{prop:"create_time",width:"140",label:"新增時間"}),n.islist?(d(),p(k,{key:0,type:"selection",selectable:z.selectableFunc,width:"44"},null,8,["selectable"])):g("",!0),n.islist?g("",!0):(d(),p(k,{key:1,width:"80",label:"單選"},{default:c((e=>[e.row.noChoose?(d(),p(w,{key:0,size:"small",onClick:t=>z.SingleFunc(e.row)},{default:c((()=>[h("選擇")])),_:2},1032,["onClick"])):(d(),p(w,{key:1,size:"small",disabled:""},{default:c((()=>[h("已選")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[D,v.loading]])]),m("div",y,[u(V,{onSizeChange:z.handleSizeChange,onCurrentChange:z.handleCurrentChange,background:"","current-page":v.curPage,"page-sizes":[2,10,20,50,100],"page-size":v.pageSize,layout:"total, prev, pager, next, jumper",total:v.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}],["__scopeId","data-v-aca1a129"]]);export{S as default};
