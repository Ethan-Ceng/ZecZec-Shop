import{E as e,B as a,f as s,C as l,e as d,m as r,g as t,s as i,t as o,d as n,c as p,v as u}from"./element-plus-84a27f94.js";import{O as _}from"./order-10f620ac.js";import{_ as m}from"./index-5ae5860a.js";import{ap as c,$ as f,o as y,c as v,a as g,P as b,S as x,W as h,X as k,T as j,Y as V,Q as w,a9 as z}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const U={data:()=>({tableData:{},detail:{is_agree:{},type:{},status:{},order_master:{},user:{},orderproduct:{},express:{},address:{},image:[],is_plate_send:0,sendexpress:{}},expressList:[],order:{},address:{},form:{is_agree:10,address_id:"",refuse_desc:"",refund_money:0},money:{refund_money:0},order_refund_id:0,deliver:{send_express_id:"",send_express_no:""},loading:!0}),created(){this.getData()},methods:{getData(){let e=this,a=this.$route.query.order_refund_id;_.refundDetail({order_refund_id:a},!0).then((a=>{e.detail=a.data.detail,e.order=a.data.order,e.address=a.data.address,e.expressList=a.data.expressList,e.loading=!1})).catch((e=>{}))},gotoPage(e){this.$router.push({path:"/order/order/detail",query:{order_id:e.order_id}})},onSubmit(a){let s=this.form,l=a;_.Approval({is_agree:s.is_agree,address_id:s.address_id,refuse_desc:s.refuse_desc,order_refund_id:l,refund_money:s.refund_money},!0).then((a=>{e({message:"恭喜你，操作成功",type:"success"}),this.getData()})).catch((e=>{}))},refundMoney(a){let s=this,l={},d=s.deliver;""!=d.send_express_id||20!=s.detail.type.value?""!=d.send_express_no||20!=s.detail.type.value?(20==s.detail.type.value&&(l.send_express_id=d.send_express_id,l.send_express_no=d.send_express_no),l.refund_money=s.money.refund_money,l.order_refund_id=a,_.receipt(l,!0).then((a=>{e({message:"恭喜你，操作成功",type:"success"}),this.getData()})).catch((e=>{}))):e.error("請填寫物流單號"):e.error("請選擇物流公司")},cancelFunc(){this.$router.back(-1)}}},C={class:"user pb50"},D={class:"product-content"},L=g("div",{class:"common-form"},"售後單資訊",-1),$={class:"refund-detail-content"},q={class:"pb16"},P=g("span",{class:"gray9"},"訂單號：",-1),S={class:"pb16"},A=g("span",{class:"gray9"},"買家：",-1),E={class:"pb16"},F=g("span",{class:"gray9"},"售後型別：",-1),M={class:"pb16"},B=g("span",{class:"gray9"},"處理狀態：",-1),K={class:"pb16"},N=g("span",{class:"gray9"},"退款金額：",-1),O={class:"pb16"},Q=g("div",{class:"common-form"},"售後商品資訊",-1),T={class:"refund-detail-content"},W=g("div",{class:"pb16"},[g("span",{class:"gray9"},"商品編碼：")],-1),X={class:"pb16"},Y=g("span",{class:"gray9"},"商品名稱：",-1),G={class:"pb16"},H=g("span",{class:"gray9"},"重量(Kg)：",-1),I={class:"pb16"},J=g("span",{class:"gray9"},"單價：",-1),R={class:"pb16"},Z=g("span",{class:"gray9"},"購買數量：",-1),ee={class:"pb16"},ae={key:0,class:"red"},se={key:1,class:"gray9"},le={class:"pb16"},de=g("span",{class:"gray9"},"付款價：",-1),re={class:"apply-reason-box"},te=g("div",{class:"common-form"},"使用者申請原因",-1),ie={class:"apply-reason"},oe={key:0,class:"d-s-s mt10"},ne={alt:"",width:"60"},pe={key:0},ue=g("div",{class:"common-form mt16"},"商家稽核",-1),_e={class:"orange"},me={key:1},ce=g("div",{class:"common-form mt16"},"退貨地址",-1),fe={class:"pb16"},ye=g("span",{class:"gray9"},"收貨人：",-1),ve={class:"pb16"},ge=g("span",{class:"gray9"},"收貨電話：",-1),be={class:"pb16"},xe=g("span",{class:"gray9"},"收貨地址：",-1),he={key:2},ke=g("div",{class:"common-form"},"商家拒絕原因",-1),je={class:"apply-reason"},Ve={key:3},we=g("div",{class:"common-form mt16"},"使用者發貨資訊",-1),ze={class:"pb16"},Ue=g("span",{class:"gray9"},"物流公司：",-1),Ce={class:"pb16"},De=g("span",{class:"gray9"},"物流單號：",-1),Le=g("div",{class:"pb16"},[g("span",{class:"gray9"},"使用者發貨狀態："),h(" 已發貨 ")],-1),$e={class:"pb16"},qe=g("span",{class:"gray9"},"發貨時間：",-1),Pe={class:"pb16"},Se=g("span",{class:"gray9"},"商家收貨狀態：",-1),Ae={key:4},Ee=g("div",{class:"common-form mt16"},"確認收貨並退款",-1),Fe=g("p",null,"注：該操作將執行訂單原路退款 並關閉當前售後單，請確認並填寫退款的金額（不能大於訂單實付款）",-1),Me={class:"orange"},Be={key:5},Ke={key:0},Ne=g("div",{class:"common-form mt16"},"發貨",-1),Oe={key:1},Qe=g("div",{class:"common-form mt16"},"平臺發貨資訊",-1),Te={class:"pb16"},We=g("span",{class:"gray9"},"物流公司：",-1),Xe={class:"pb16"},Ye=g("span",{class:"gray9"},"物流單號：",-1),Ge={class:"pb16"},He=g("span",{class:"gray9"},"發貨時間：",-1),Ie={class:"common-button-wrapper"};const Je=m(U,[["render",function(e,_,m,U,Je,Re){const Ze=a,ea=s,aa=l,sa=d,la=r,da=t,ra=i,ta=o,ia=n,oa=p,na=c("img-url"),pa=u;return f((y(),v("div",C,[g("div",D,[L,g("div",$,[b(aa,null,{default:x((()=>[b(Ze,{span:5},{default:x((()=>[g("div",q,[P,h(" "+k(Je.detail.order_master.order_no),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",S,[A,h(" "+k(Je.detail.user.nickName),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",E,[F,h(" "+k(Je.detail.type.text),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",M,[B,h(" "+k(Je.detail.status.text),1)])])),_:1}),10==Je.detail.is_agree.value&&Je.detail.refund_money>0?(y(),j(Ze,{key:0,span:5},{default:x((()=>[g("div",K,[N,h(" "+k(Je.detail.refund_money),1)])])),_:1})):V("",!0),b(Ze,{span:4},{default:x((()=>[g("div",O,[b(ea,{size:"small",href:"/",target:"_blank",onClick:_[0]||(_[0]=e=>Re.gotoPage(Je.detail))},{default:x((()=>[h("訂單詳情")])),_:1})])])),_:1})])),_:1})]),Q,g("div",T,[b(aa,null,{default:x((()=>[b(Ze,{span:5},{default:x((()=>[W])),_:1}),b(Ze,{span:19},{default:x((()=>[g("div",X,[Y,h(" "+k(Je.detail.orderproduct.product_name),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",G,[H,h(" "+k(Je.detail.orderproduct.product_weight),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",I,[J,h(" "+k(Je.detail.orderproduct.line_price),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",R,[Z,h(" "+k(Je.detail.orderproduct.total_num),1)])])),_:1}),80==Je.order.order_source?(y(),j(Ze,{key:0,span:5},{default:x((()=>[g("div",ee,[1==Je.order.advance.money_return?(y(),v("span",ae,"定金(可退)：")):(y(),v("span",se,"定金(不可退)：")),h(" "+k(Je.order.advance.pay_price),1)])])),_:1})):V("",!0),b(Ze,{span:5},{default:x((()=>[g("div",le,[de,h(" "+k(Je.detail.orderproduct.total_pay_price),1)])])),_:1})])),_:1})]),g("div",re,[te,g("div",ie,k(Je.detail.apply_desc),1),Je.detail.image.length>0?(y(),v("div",oe,[(y(!0),v(w,null,z(Je.detail.image,((e,a)=>(y(),v("div",{class:"pic",key:a},[f(g("img",ne,null,512),[[na,e.file_path]])])))),128))])):V("",!0)]),0==Je.detail.is_agree.value?(y(),v("div",pe,[ue,b(oa,{size:"small",ref:"form",model:Je.form,"label-width":"80px"},{default:x((()=>[b(sa,{label:"售後型別"},{default:x((()=>[g("span",_e,k(Je.detail.type.text),1)])),_:1}),b(sa,{label:"稽核狀態"},{default:x((()=>[b(da,{modelValue:Je.form.is_agree,"onUpdate:modelValue":_[1]||(_[1]=e=>Je.form.is_agree=e)},{default:x((()=>[b(la,{label:10},{default:x((()=>[h("同意")])),_:1}),b(la,{label:20},{default:x((()=>[h("拒絕")])),_:1})])),_:1},8,["modelValue"])])),_:1}),10==Je.form.is_agree&&30!=Je.detail.type.value?(y(),j(sa,{key:0,label:"退貨地址"},{default:x((()=>[b(ta,{modelValue:Je.form.address_id,"onUpdate:modelValue":_[2]||(_[2]=e=>Je.form.address_id=e),placeholder:"請選擇地址"},{default:x((()=>[(y(!0),v(w,null,z(Je.address,((e,a)=>(y(),j(ra,{key:a,label:e.detail,value:e.address_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):V("",!0),10==Je.form.is_agree&&30==Je.detail.type.value?(y(),j(sa,{key:1,label:"退款金額"},{default:x((()=>[b(ia,{modelValue:Je.form.refund_money,"onUpdate:modelValue":_[3]||(_[3]=e=>Je.form.refund_money=e)},null,8,["modelValue"]),g("p",null,"請輸入退款金額，最多"+k(Je.detail.orderproduct.max_refund_money)+" 元。注：該操作將執行訂單原路退款 並關閉當前售後單，請確認並填寫退款的金額（不能大於訂單實付款）",1)])),_:1})):V("",!0),20==Je.form.is_agree?(y(),j(sa,{key:2,label:"拒絕原因"},{default:x((()=>[b(ia,{type:"textarea",modelValue:Je.form.refuse_desc,"onUpdate:modelValue":_[4]||(_[4]=e=>Je.form.refuse_desc=e),class:"max-w460"},null,8,["modelValue"])])),_:1})):V("",!0)])),_:1},8,["model"])])):V("",!0),10==Je.detail.is_agree.value&&30!=Je.detail.type.value?(y(),v("div",me,[ce,b(aa,null,{default:x((()=>[b(Ze,{span:5},{default:x((()=>[g("div",fe,[ye,h(" "+k(Je.detail.address.name),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",ve,[ge,h(" "+k(Je.detail.address.phone),1)])])),_:1}),b(Ze,{span:14},{default:x((()=>[g("div",be,[xe,h(" "+k(Je.detail.address.detail),1)])])),_:1})])),_:1})])):V("",!0),20==Je.detail.is_agree.value?(y(),v("div",he,[ke,g("div",je,k(Je.detail.refuse_desc),1)])):V("",!0),30!=Je.detail.type.value&&10==Je.detail.is_agree.value&&1==Je.detail.is_user_send?(y(),v("div",Ve,[we,b(aa,null,{default:x((()=>[b(Ze,{span:5},{default:x((()=>[g("div",ze,[Ue,h(" "+k(Je.detail.express.express_name),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",Ce,[De,h(" "+k(Je.detail.express_no),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[Le])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",$e,[qe,h(" "+k(Je.detail.send_time),1)])])),_:1}),b(Ze,{span:4},{default:x((()=>[g("div",Pe,[Se,1==Je.detail.is_receipt?(y(),v(w,{key:0},[h(" 已收貨 ")],64)):(y(),v(w,{key:1},[h(" 待收貨 ")],64))])])),_:1})])),_:1})])):V("",!0),10==Je.detail.type.value&&10==Je.detail.is_agree.value&&1==Je.detail.is_user_send&&0==Je.detail.is_receipt?(y(),v("div",Ae,[Ee,b(oa,{size:"small",ref:"money",model:Je.money,"label-width":"80px"},{default:x((()=>[Fe,b(sa,{label:"售後型別"},{default:x((()=>[g("span",Me,k(Je.detail.type.text),1)])),_:1}),b(sa,{label:"退款金額"},{default:x((()=>[b(ia,{modelValue:Je.money.refund_money,"onUpdate:modelValue":_[5]||(_[5]=e=>Je.money.refund_money=e)},null,8,["modelValue"]),g("p",null,"請輸入退款金額，最多"+k(Je.detail.orderproduct.max_refund_money)+" 元",1)])),_:1})])),_:1},8,["model"])])):V("",!0),20==Je.detail.type.value&&10==Je.detail.is_agree.value&&1==Je.detail.is_user_send?(y(),v("div",Be,[0==Je.detail.is_plate_send?(y(),v("div",Ke,[Ne,b(oa,{size:"small",ref:"deliver",model:Je.deliver,"label-width":"100px"},{default:x((()=>[b(sa,{label:"物流公司"},{default:x((()=>[b(ta,{modelValue:Je.deliver.send_express_id,"onUpdate:modelValue":_[6]||(_[6]=e=>Je.deliver.send_express_id=e),placeholder:"請選擇快遞公司"},{default:x((()=>[(y(!0),v(w,null,z(Je.expressList,((e,a)=>(y(),j(ra,{label:e.express_name,key:a,value:e.express_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(sa,{label:"物流單號"},{default:x((()=>[b(ia,{modelValue:Je.deliver.send_express_no,"onUpdate:modelValue":_[7]||(_[7]=e=>Je.deliver.send_express_no=e),class:"max-w460"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])):V("",!0),1==Je.detail.is_plate_send?(y(),v("div",Oe,[Qe,b(aa,null,{default:x((()=>[b(Ze,{span:5},{default:x((()=>[g("div",Te,[We,h(" "+k(Je.detail.sendexpress.express_name),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",Xe,[Ye,h(" "+k(Je.detail.send_express_no),1)])])),_:1}),b(Ze,{span:5},{default:x((()=>[g("div",Ge,[He,h(" "+k(Je.detail.deliver_time),1)])])),_:1})])),_:1})])):V("",!0)])):V("",!0)]),g("div",Ie,[b(ea,{size:"small",type:"info",onClick:Re.cancelFunc},{default:x((()=>[h("取消 / 返回上一頁")])),_:1},8,["onClick"]),0==Je.detail.is_agree.value?(y(),j(ea,{key:0,size:"small",type:"primary",onClick:_[8]||(_[8]=e=>Re.onSubmit(Je.detail.order_refund_id))},{default:x((()=>[h("確認稽核")])),_:1})):V("",!0),30!=Je.detail.type.value&&10==Je.detail.is_agree.value&&1==Je.detail.is_user_send&&0==Je.detail.is_receipt?(y(),j(ea,{key:1,size:"small",type:"primary",onClick:_[9]||(_[9]=e=>Re.refundMoney(Je.detail.order_refund_id))},{default:x((()=>[h("確認稽核")])),_:1})):V("",!0)])])),[[pa,Je.loading]])}]]);export{Je as default};
