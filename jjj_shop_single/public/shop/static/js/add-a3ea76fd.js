import{E as e,x as t,y as i,f as a,c as o}from"./element-plus-84a27f94.js";import{P as s}from"./product-6ff3546d.js";import r from"./Basic-8530c871.js";import n from"./Spec-dd30359b.js";import l from"./Content-1e9b7db2.js";import m from"./Buyset-281d226e.js";import p from"./Other-84e5c086.js";import{ae as c,o as d,c as u,P as _,S as j,$ as f,a0 as g,a as y,W as v}from"./@vue-8fe4574d.js";import{_ as b}from"./index-5ae5860a.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./Upload-71ca9325.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./vuedraggable-54f344de.js";import"./vue-a056b7b7.js";import"./sortablejs-88eb33dd.js";import"./Single-0ae372f8.js";import"./Many-045ed20f.js";import"./UE-97bf9096.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const h={class:"product-add"},S={class:"common-button-wrapper"};const k=b({components:{Basic:r,Spec:n,Content:l,Buyset:m,Other:p},data:()=>({activeName:"basic",loading:!1,form:{model:{product_name:"",product_no:"",video_id:0,poster_id:0,category_id:null,image:[],is_picture:0,contentImage:[],video:{file_id:0,file_path:""},poster:{file_id:0,file_path:""},selling_point:"",spec_type:20,deduct_stock_type:20,is_alone_grade:0,sku:{},spec_many:{spec_attr:[],spec_list:[]},content:"",delivery_id:"",product_status:10,sales_initial:0,product_sort:100,is_points_gift:1,is_points_discount:1,max_points_discount:0,is_enable_grade:1,alone_grade_type:10,grade_ids:[],is_ind_agent:0,agent_money_type:10,first_money:0,second_money:0,third_money:0,is_virtual:0,limit_num:0,virtual_auto:0,virtual_content:"",table_id:"",is_preview:0,preview_time:"",custom_form:[],faq_ids:[],type:1,active_time:"",target_money:0,total_money:0},category:[],delivery:[],gradeList:[],specData:null,isSpecLocked:!1,basicSetting:{},tableList:[]},pickerOptions0:{disabledDate:e=>e.getTime()<Date.now()-864e5}}),provide:function(){return{form:this.form}},created(){this.getBaseData()},methods:{getBaseData:function(){let e=this;s.getBaseData({},!0).then((t=>{e.loading=!1,Object.assign(e.form,t.data)})).catch((t=>{e.loading=!1}))},convertJson(e){let t={};return e.forEach((e=>{t[e.grade_id]=e.product_equity})),JSON.stringify(t)},onSubmit:function(){let t=this,i=t.form.model;t.$refs.form.validate((a=>{a&&(t.loading=!0,i.alone_grade_equity=t.convertJson(t.form.gradeList),i.faq_ids=t.form.faq_ids.join(","),s.addProduct({params:JSON.stringify(i)},!0).then((i=>{t.loading=!1,e({message:"新增成功",type:"success"}),t.$router.push("/product/product/index")})).catch((e=>{t.loading=!1})))}))},cancelFunc(){this.$router.back(-1)}}},[["render",function(e,s,r,n,l,m){const p=t,b=i,k=c("Basic"),x=c("Spec"),B=c("Content"),N=c("Buyset"),w=c("Other"),C=a,O=o;return d(),u("div",h,[_(b,{modelValue:l.activeName,"onUpdate:modelValue":s[0]||(s[0]=e=>l.activeName=e),type:"card"},{default:j((()=>[_(p,{label:"基礎設定",name:"basic"}),_(p,{label:"規格庫存",name:"spec"}),_(p,{label:"商品詳情",name:"content"}),_(p,{label:"營銷設定",name:"buyset"}),_(p,{label:"其他設定",name:"other"})])),_:1},8,["modelValue"]),_(O,{size:"small",ref:"form",model:l.form,"label-width":"180px"},{default:j((()=>[f(_(k,null,null,512),[[g,"basic"==l.activeName]]),f(_(x,null,null,512),[[g,"spec"==l.activeName]]),f(_(B,null,null,512),[[g,"content"==l.activeName]]),f(_(N,null,null,512),[[g,"buyset"==l.activeName]]),f(_(w,null,null,512),[[g,"other"==l.activeName]]),y("div",S,[_(C,{size:"small",type:"info",onClick:m.cancelFunc},{default:j((()=>[v("取消")])),_:1},8,["onClick"]),_(C,{size:"small",type:"primary",onClick:m.onSubmit,loading:l.loading},{default:j((()=>[v("釋出")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"])])}],["__scopeId","data-v-d4cb3210"]]);export{k as default};
