System.register(["./Product-legacy-39b78924.js","./element-plus-legacy-4010b94c.js","./index-legacy-a1d733aa.js","./@vue-legacy-a5eb5da2.js","./product-legacy-4257f291.js","./@vueuse-legacy-7e5b8ef2.js","./lodash-es-legacy-93596df5.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-4687536e.js","./call-bind-legacy-b90429f9.js","./get-intrinsic-legacy-4f34f38e.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-f19c70ad.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-b3eb717b.js","./pinia-legacy-9406b588.js","./vue-demi-legacy-97cfbb01.js","./axios-legacy-3cda2001.js","./qs-legacy-5fc46ed9.js","./side-channel-legacy-8f83241e.js","./object-inspect-legacy-2e2b0934.js","./vue-clipboard2-legacy-b2d9783e.js","./clipboard-legacy-b868140c.js","./vue-ueditor-wrap-legacy-53d1452b.js"],(function(e,l){"use strict";var n,a,t,o,u,r,c,i,d,s,m,f,p,g,y,_,h,b,v,j,V,k,w,D,x,C,z,U,P;return{setters:[function(e){n=e.P},function(e){a=e.E,t=e.m,o=e.g,u=e.e,r=e.d,c=e.n,i=e.o,d=e.s,s=e.t,m=e.f,f=e.l,p=e.i,g=e.c},function(e){y=e.r,_=e._},function(e){h=e.ap,b=e.o,v=e.c,j=e.P,V=e.S,k=e.W,w=e.Q,D=e.a9,x=e.T,C=e.X,z=e.Y,U=e.a,P=e.$},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=function(e,l){return y._get("/shop/plus.recommend/index",e,l)},I=function(e,l){return y._post("/shop/plus.recommend/index",e,l)},S={components:{Product:n},data:function(){return{form:{is_recommend:0,choice:0,location:[],name:""},all_type:[{name:"購物車",value:10},{name:"支付完成頁",value:30}],showType:[{name:"根據銷量降序展示",value:10},{name:"根據新增商品時間降序展示",value:20},{name:"根據人氣降序展示",value:30}],showNum:[{name:"顯示當前20個",value:20},{name:"顯示當前30個",value:30},{name:"顯示當前50個",value:50}],type:10,num:20,tableData:[],product_arr:[],isproduct:!1,Data:[],loading:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this;l({},!0).then((function(l){e.loading=!1,e.form=l.data.vars.values;for(var n=0;n<e.form.location.length;n++)e.form.location[n]=parseInt(e.form.location[n]);1==e.form.choice?(e.product_arr=l.data.product_arr,e.tableData=e.form.product):(e.type=parseInt(e.form.type),e.num=parseInt(e.form.num)),e.form.is_recommend=parseInt(e.form.is_recommend),e.form.choice=parseInt(e.form.choice)})).catch((function(l){e.loading=!1}))},onSubmit:function(){var e=this,l=e.form;if(1==l.choice?l.product=e.tableData:(l.type=e.type,l.num=e.num),!e.checkData(l))return!1;e.loading=!0,I(l,!0).then((function(l){e.loading=!1,1==l.code?(a({message:"恭喜你，儲存成功",type:"success"}),e.getData()):e.loading=!1})).catch((function(l){e.loading=!1}))},closeProductDialogFunc:function(e){if(this.isproduct=e.openDialog,"success"==e.type){if(this.product_arr.indexOf(e.params.product_id)>-1)return a({message:"你已選中該產品",type:"error"}),!1;var l={};l.product_id=e.params.product_id,l.product_name=e.params.product_name,l.product_image=e.params.product_image,l.sort=1,this.tableData.push(l),this.product_arr.push(e.params.product_id)}},addClick:function(){this.isproduct=!0},deleteClick:function(e){var l=this.product_arr.indexOf(e.product_id);this.product_arr.splice(l,1),this.tableData.splice(l,1)},checkData:function(e){return!!e.name&&(0==e.location.length?(a({message:"請選擇展示位置",type:"error"}),!1):1!=e.choice||0!=e.product.length||(a({message:"請新增商品",type:"error"}),!1))}}},T={class:"product-add"},q=U("div",{class:"common-form"},"商品推薦",-1),F={class:"common-level-rail"},N={class:"pb50"},O={class:"product-info"},A={class:"pic"},E={width:30,height:30},J={class:"common-button-wrapper"};e("default",_(S,[["render",function(e,l,a,y,_,I){var S=t,Q=o,W=u,X=r,Y=c,$=i,B=d,G=s,H=m,K=f,L=p,M=g,R=n,Z=h("img-url");return b(),v("div",T,[j(M,{size:"small",ref:"form",model:_.form,"label-width":"100px"},{default:V((function(){return[q,j(W,{label:"商品推薦"},{default:V((function(){return[j(Q,{modelValue:_.form.is_recommend,"onUpdate:modelValue":l[0]||(l[0]=function(e){return _.form.is_recommend=e})},{default:V((function(){return[j(S,{label:0},{default:V((function(){return[k("關")]})),_:1}),j(S,{label:1},{default:V((function(){return[k("開")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),j(W,{label:"模組名稱",rules:[{required:!0,message:" "}],prop:"name"},{default:V((function(){return[j(X,{modelValue:_.form.name,"onUpdate:modelValue":l[1]||(l[1]=function(e){return _.form.name=e}),placeholder:"請輸入模組名稱",class:"max-w460",disabled:0==_.form.is_recommend},null,8,["modelValue","disabled"])]})),_:1}),j(W,{label:"展示位置"},{default:V((function(){return[j($,{modelValue:_.form.location,"onUpdate:modelValue":l[2]||(l[2]=function(e){return _.form.location=e})},{default:V((function(){return[(b(!0),v(w,null,D(_.all_type,(function(e,l){return b(),x(Y,{label:e.value,key:l,disabled:0==_.form.is_recommend},{default:V((function(){return[k(C(e.name),1)]})),_:2},1032,["label","disabled"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),j(W,{label:"推薦商品"},{default:V((function(){return[j(Q,{modelValue:_.form.choice,"onUpdate:modelValue":l[3]||(l[3]=function(e){return _.form.choice=e})},{default:V((function(){return[j(S,{label:0,disabled:0==_.form.is_recommend},{default:V((function(){return[k("按條件選擇")]})),_:1},8,["disabled"]),j(S,{label:1,disabled:0==_.form.is_recommend},{default:V((function(){return[k("自定義選擇")]})),_:1},8,["disabled"])]})),_:1},8,["modelValue"])]})),_:1}),0==_.form.choice?(b(),x(W,{key:0,label:""},{default:V((function(){return[j(G,{modelValue:_.type,"onUpdate:modelValue":l[4]||(l[4]=function(e){return _.type=e}),placeholder:"",disabled:0==_.form.is_recommend,style:{width:"460px"}},{default:V((function(){return[(b(!0),v(w,null,D(_.showType,(function(e,l){return b(),x(B,{label:e.name,value:e.value,key:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1})):z("",!0),0==_.form.choice?(b(),x(W,{key:1,label:""},{default:V((function(){return[j(G,{modelValue:_.num,"onUpdate:modelValue":l[5]||(l[5]=function(e){return _.num=e}),placeholder:"",disabled:0==_.form.is_recommend,style:{width:"460px"}},{default:V((function(){return[(b(!0),v(w,null,D(_.showNum,(function(e,l){return b(),x(B,{label:e.name,value:e.value,key:l},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1})):z("",!0),1==_.form.choice?(b(),x(W,{key:2,size:"small",label:""},{default:V((function(){return[U("div",F,[j(H,{size:"small",icon:"Plus",onClick:I.addClick},{default:V((function(){return[k("新增商品")]})),_:1},8,["onClick"])]),U("div",N,[j(L,{size:"small",data:_.tableData,border:""},{default:V((function(){return[j(K,{label:"圖片",width:"60"},{default:V((function(e){return[U("div",O,[U("div",A,[P(U("img",E,null,512),[[Z,e.row.product_image]])])])]})),_:1}),j(K,{prop:"product_name",label:"商品"}),j(K,{label:"排序",width:"100"},{default:V((function(e){return[j(X,{modelValue:e.row.sort,"onUpdate:modelValue":function(l){return e.row.sort=l},type:"number",disabled:0==_.form.is_recommend},null,8,["modelValue","onUpdate:modelValue","disabled"])]})),_:1}),j(K,{fixed:"right",label:"操作",width:"110"},{default:V((function(e){return[j(H,{onClick:function(l){return I.deleteClick(e.row)},type:"text",size:"small",disabled:0==_.form.is_recommend},{default:V((function(){return[k("刪除")]})),_:2},1032,["onClick","disabled"])]})),_:1})]})),_:1},8,["data"])])]})),_:1})):z("",!0),U("div",J,[j(H,{type:"primary",size:"small",onClick:I.onSubmit,loading:_.loading},{default:V((function(){return[k("提交")]})),_:1},8,["onClick","loading"])])]})),_:1},8,["model"]),j(R,{isproduct:_.isproduct,onCloseDialog:l[6]||(l[6]=function(e){return I.closeProductDialogFunc(e)})},{default:V((function(){return[k("產品列表彈出層")]})),_:1},8,["isproduct"])])}]]))}}}));
