import{E as e,e as l,d as r,f as o,m as a,g as i,c as s,q as t}from"./element-plus-84a27f94.js";import{_ as m}from"./Upload-71ca9325.js";import{L as p}from"./live-bc011905.js";import{_ as u}from"./index-5ae5860a.js";import{o as d,T as c,S as n,a as g,P as _,W as h,c as y,Y as f,bb as b,b9 as F}from"./@vue-8fe4574d.js";import"./@vueuse-3cd91d51.js";import"./lodash-es-656e9c2f.js";import"./async-validator-cf877c1f.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-06559b09.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./file-b7a04c7e.js";/* empty css                                                               */import"./AddCategory-69aab672.js";import"./vue-router-49f0fa2f.js";import"./pinia-265da389.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-b80b041e.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-clipboard2-f8268db2.js";import"./clipboard-dd0324d2.js";import"./vue-ueditor-wrap-dff311b3.js";const j={components:{Upload:m},data:()=>({isupload:!1,productName:"",product_img:"",ruleForm:{name:"",cover_img:"",price_type:1,price:"",price2:"",product_id:"",shop_supplier_id:0},rules:{name:[{required:!0,message:"請輸入商品名稱",trigger:"blur"},{min:3,max:17,message:"長度在 3 到 17 個字元",trigger:"blur"}],price:[{required:!0,message:"請輸入價格",trigger:"change"}]},loading:!1,isproduct:!1,exclude_ids:[],imageType:"",formLabelWidth:"120px",dialogVisible:!1,product_type:0,edit_type:""}),props:["open_edit","editform"],watch:{open_edit:function(e,l){this.dialogVisible=this.open_edit,this.ruleForm=this.editform}},created(){},methods:{closeFunc(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})},submitForm(l){let r=this;r.loading=!0,r.$refs[l].validate((l=>{if(!l)return r.loading=!1,!1;{let l=r.ruleForm;p.editProduct(l,!0).then((l=>{r.loading=!1,e({message:"編輯成功",type:"success"}),this.closeFunc()})).catch((e=>{r.loading=!1}))}}))},openUpload(e){this.imageType=e,this.isupload=!0},cancelFunc(e){this.$emit("close",{type:"error"})},returnImgsFunc(e){null!=e&&e.length>0&&(this.ruleForm.cover_img=e[0].file_path),this.isupload=!1}}},V=["src"],v=["src"],x=(e=>(b("data-v-a61a3567"),e=e(),F(),e))((()=>g("div",{class:"gray9"},"建議尺寸300*300,大小不超過2M",-1))),k={class:"dialog-footer"};const w=u(j,[["render",function(e,p,u,b,F,j){const w=l,U=r,q=o,z=m,I=a,C=i,D=s,$=t;return d(),c($,{title:"編輯商品","modal-append-to-body":!1,"before-close":j.closeFunc,modelValue:F.dialogVisible,"onUpdate:modelValue":p[10]||(p[10]=e=>F.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:n((()=>[g("div",k,[_(q,{size:"small",onClick:p[8]||(p[8]=e=>j.closeFunc())},{default:n((()=>[h("取 消")])),_:1}),_(q,{type:"primary",onClick:p[9]||(p[9]=e=>j.submitForm("ruleForm")),loading:F.loading},{default:n((()=>[h("立即提交")])),_:1},8,["loading"])])])),default:n((()=>[_(D,{size:"small",model:F.ruleForm,rules:F.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:n((()=>[_(w,null,{default:n((()=>[""!=F.product_img?(d(),y("img",{key:0,src:F.product_img,class:"mt10",width:120},null,8,V)):f("",!0)])),_:1}),_(w,{label:"商品名稱",prop:"name"},{default:n((()=>[_(U,{modelValue:F.ruleForm.name,"onUpdate:modelValue":p[0]||(p[0]=e=>F.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),_(w,{label:"商品封面圖",prop:"cover_img",rules:[{required:!0,message:"請上傳商品封面圖"}]},{default:n((()=>[g("div",null,[_(q,{type:"primary",onClick:p[1]||(p[1]=e=>j.openUpload("cover"))},{default:n((()=>[h("上傳圖片")])),_:1}),""!=F.ruleForm.cover_img?(d(),y("img",{key:0,src:F.ruleForm.cover_img,class:"mt10",width:120},null,8,v)):f("",!0),x,F.isupload?(d(),c(z,{key:1,isupload:F.isupload,onReturnImgs:j.returnImgsFunc},{default:n((()=>[h("上傳圖片")])),_:1},8,["isupload","onReturnImgs"])):f("",!0)])])),_:1}),_(w,{label:"價格型別",prop:"type"},{default:n((()=>[_(C,{modelValue:F.ruleForm.price_type,"onUpdate:modelValue":p[2]||(p[2]=e=>F.ruleForm.price_type=e)},{default:n((()=>[_(I,{label:1},{default:n((()=>[h("一口價")])),_:1}),_(I,{label:2},{default:n((()=>[h("價格區間")])),_:1}),_(I,{label:3},{default:n((()=>[h("折扣價")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==F.ruleForm.price_type?(d(),c(w,{key:0,label:"價格：",prop:"price",rules:[{required:!0,message:"請輸入最低價格",trigger:"change"}]},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:F.ruleForm.price,"onUpdate:modelValue":p[3]||(p[3]=e=>F.ruleForm.price=e),class:"mb16 max-w460",placeholder:"請輸入價格"},null,8,["modelValue"])])),_:1})):f("",!0),2==F.ruleForm.price_type?(d(),c(w,{key:1,label:"價格：",prop:"price",rules:[{required:!0,message:"請輸入最低價格",trigger:"change"}]},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:F.ruleForm.price,"onUpdate:modelValue":p[4]||(p[4]=e=>F.ruleForm.price=e),class:"mb16 max-w460",placeholder:"請輸入最低價格"},null,8,["modelValue"])])),_:1})):f("",!0),2==F.ruleForm.price_type?(d(),c(w,{key:2,label:"價格：",prop:"price2",rules:[{required:!0,message:"請輸入最高價格",trigger:"change"}]},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:F.ruleForm.price2,"onUpdate:modelValue":p[5]||(p[5]=e=>F.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"請輸入最高價格"},null,8,["modelValue"])])),_:1})):f("",!0),3==F.ruleForm.price_type?(d(),c(w,{key:3,prop:"price",rules:[{required:!0,message:"請輸入原價",trigger:"change"}],label:"價格："},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:F.ruleForm.price,"onUpdate:modelValue":p[6]||(p[6]=e=>F.ruleForm.price=e),class:"mb16 max-w460",placeholder:"請輸入原價"},null,8,["modelValue"])])),_:1})):f("",!0),3==F.ruleForm.price_type?(d(),c(w,{key:4,prop:"price2",rules:[{required:!0,message:"請輸入現價",trigger:"change"}],label:"價格："},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:F.ruleForm.price2,"onUpdate:modelValue":p[7]||(p[7]=e=>F.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"請輸入現價"},null,8,["modelValue"])])),_:1})):f("",!0)])),_:1},8,["model","rules"])])),_:1},8,["before-close","modelValue"])}],["__scopeId","data-v-a61a3567"]]);export{w as default};
