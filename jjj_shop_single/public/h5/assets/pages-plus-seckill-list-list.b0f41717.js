import{_ as t,x as a,y as s,M as e,B as l,o as i,c,w as d,n as o,g as u,b as n,f as r,r as f,F as p,e as _,d as h,t as g,q as m,S as y,i as w,k as v,j as k,h as b}from"./index-6e5c77a7.js";import{C as D}from"./countdown.ae2f98a7.js";import{_ as x}from"./active-null.b7f90725.js";const C=t({components:{Countdown:D},data:()=>({phoneHeight:0,scrollviewHigh:0,activeList:[],type_active:0,currActive:{},listData:{list:[],detail:null},detailData:{},loading:!0,countdownConfig:{startstamp:0,endstamp:0},status:-1}),computed:{},onShow(){this.getActive()},mounted(){this.init()},onPullDownRefresh(){},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,s().select(".top-box").boundingClientRect((a=>{let s=t.phoneHeight-a.height+43;t.scrollviewHigh=s})).exec()}})},tabTypeFunc(t){this.type_active=t,this.currActive=this.activeList[t],this.getData()},goback(){e({})},getActive(){let t=this;t.loading=!0,t._get("plus.seckill.product/active",{param:{}},(function(a){t.activeList=a.data.list,t.activeList&&t.activeList.length>0&&(t.currActive=t.activeList[0],t.getData())}))},getData(){let t=this;t.loading=!0,t._get("plus.seckill.product/product",{seckill_activity_id:t.currActive.seckill_activity_id},(function(a){t.listData=a.data,t.countdownConfig.endstamp=a.data.detail.end_time,t.countdownConfig.startstamp=a.data.detail.start_time,l(),t.loading=!1}))},gotoDetail(t){this.$refs.countdown.clear(),this.gotoPage("/pages/product/detail/detail?product_id="+t)},gotoSearch(){this.getData()},returnValFunc(t){this.status=t,"未開始"==this.listData.detail.status_text&&0==t&&(this.countdownConfig.endstamp=this.listData.detail.end_time,this.countdownConfig.startstamp=this.listData.detail.start_time)}}},[["render",function(t,a,s,e,l,D){const C=u,A=y,F=w,H=v("Countdown"),L=k,j=b;return i(),c(C,{class:o(["seckill-product-wrap",t.theme()||""]),"data-theme":t.theme()},{default:d((()=>[n(C,{class:"top-box"},{default:d((()=>[n(C,{class:"active-top-tab"},{default:d((()=>[n(A,{"scroll-X":"true","show-scrollbar":"false",class:"scroll-X mb30"},{default:d((()=>[n(C,{class:"tab-list d-s-c"},{default:d((()=>[(i(!0),r(p,null,f(l.activeList,((t,a)=>(i(),c(C,{class:o(["tab-item",{active:l.type_active==a}]),key:a,onClick:t=>D.tabTypeFunc(a)},{default:d((()=>[h(g(t.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),l.listData.detail?(i(),c(C,{key:0,class:"ad-activity"},{default:d((()=>[n(F,{src:l.listData.detail.file_path,mode:""},null,8,["src"])])),_:1})):_("",!0),l.listData.detail?(i(),c(C,{key:1,class:"ad-datetime ww100 pt40 pb10 d-c-c"},{default:d((()=>[n(H,{ref:"countdown",config:l.countdownConfig,onReturnVal:D.returnValFunc},null,8,["config","onReturnVal"])])),_:1})):_("",!0),l.listData.list.length>0?(i(),c(C,{key:2,class:"every-day-time d-c-c mb20"},{default:d((()=>[n(L,null,{default:d((()=>[h("每日活動時間："+g(l.currActive.day_start_time)+"至"+g(l.currActive.day_end_time),1)])),_:1})])),_:1})):_("",!0),l.listData.detail?_("",!0):(i(),c(C,{key:3,class:"p30 pt200 d-c-c d-c gray6 f26"},{default:d((()=>[n(F,{style:{width:"532rpx","margin-bottom":"80rpx"},src:x,mode:"widthFix"}),n(C,{class:"tc gray9"},{default:d((()=>[h("暫無活動~~")])),_:1})])),_:1}))])),_:1})])),_:1}),l.loading?_("",!0):(i(),c(C,{key:0,class:"seckill-list-wrap"},{default:d((()=>[n(A,{"scroll-y":"true",class:"scroll-Y",style:m("height:"+l.scrollviewHigh+"px;"),"lower-threshold":"50"},{default:d((()=>[n(C,{class:"list p-0-20"},{default:d((()=>[(i(!0),r(p,null,f(l.listData.list,((t,a)=>(i(),c(C,{class:"item d-stretch",key:a},{default:d((()=>[n(C,{class:"product-cover"},{default:d((()=>[n(F,{src:t.product.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024),n(C,{class:"d-b-c d-c flex-1 ml26"},{default:d((()=>[n(C,{class:"product-title ww100"},{default:d((()=>[h(g(t.product.product_name),1)])),_:2},1024),n(C,{class:"price ww100 red"},{default:d((()=>[n(L,{class:"f24"},{default:d((()=>[h("秒殺價：￥")])),_:1}),n(L,{class:"num f36 fb"},{default:d((()=>[h(g(t.seckill_price),1)])),_:2},1024),n(L,{class:"ml20 text-d-line gray9 f24"},{default:d((()=>[h("￥"+g(t.product_price),1)])),_:2},1024)])),_:2},1024),n(C,{class:"slider-box ww100 d-b-c"},{default:d((()=>[n(C,{class:"left flex-1"},{default:d((()=>[n(L,{class:"already-sale"},{default:d((()=>[h("已搶購"+g(t.product_sales)+"件",1)])),_:2},1024),n(C,{class:"slider"},{default:d((()=>[n(C,{class:"slider-inner",style:m("width:"+t.product_sales/(t.product_sales+t.stock)*100+"%;")},null,8,["style"])])),_:2},1024)])),_:2},1024),n(C,{class:"right-btn ml30"},{default:d((()=>[0==l.status&&t.stock>0?(i(),c(j,{key:0,type:"primary",onClick:a=>D.gotoDetail(t.product_id)},{default:d((()=>[h("馬上搶")])),_:2},1032,["onClick"])):_("",!0),1==l.status&&t.stock>0?(i(),c(j,{key:1,type:"default",class:"btn-gray"},{default:d((()=>[h("未開始")])),_:1})):_("",!0),2==l.status&&t.stock>0?(i(),c(j,{key:2,type:"default",class:"btn-gray"},{default:d((()=>[h("已結束")])),_:1})):_("",!0),0==t.stock?(i(),c(j,{key:3,type:"default",class:"btn-gray"},{default:d((()=>[h("已搶光")])),_:1})):_("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0!=l.listData.list.length||l.loading?_("",!0):(i(),c(C,{key:0,class:"d-c-c p30"},{default:d((()=>[n(L,{class:"iconfont icon-wushuju"}),n(L,{class:"cont"},{default:d((()=>[h("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1},8,["style"])])),_:1}))])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-5fc15051"]]);export{C as default};
