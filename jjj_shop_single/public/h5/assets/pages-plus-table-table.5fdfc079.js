import{_ as e,z as a,D as l,B as t,R as s,o as d,c as i,w as u,n as c,e as o,g as r,f as n,r as f,F as m,b as _,d as p,k as h,t as b,u as k,j as g,a2 as v,P as y,ak as D,O as x,Q as C,I as V,a0 as w,a1 as I,h as U,i as q}from"./index-6e5c77a7.js";import{U as P}from"./upload.182a2719.js";import{m as R}from"./mpvueCityPicker.d23ed411.js";const E=e({components:{mpvueCityPicker:R,Upload:P},data:()=>({loading:!0,table_id:0,name:"",tableData:[],province:[],city:[],area:[],is_load:!1,cityPickerValueDefault:[0,0,0],areaIndex:0,isupload:!1,uploadIndex:0,order_product_id:0}),onShow(){this.loading&&this.getData()},onLoad(e){this.table_id=e.table_id,e.order_product_id&&(this.order_product_id=e.order_product_id)},methods:{getData(){let e=this;e.loading=!0,a({title:"載入中"}),e._get("plus.table.table/add",{table_id:e.table_id},(function(a){e.loading=!1,e.tableData=a.data.model.tableData,e.tableData.forEach(((a,l)=>{e.tableData[l].value=""})),e.province=a.data.regionData[0],e.city=a.data.regionData[1],e.area=a.data.regionData[2],e.is_load=!0,e.name=a.data.model.name,l({title:e.name}),t()}))},getName:e=>e.split(","),getRadioGroup(e,a){return this.tableData[e].value.split(",").indexOf(a)},changeRadio(e,a){this.tableData[a].value=e.detail.value},changeRadioGroup(e,a){let l=e.detail.value;this.tableData[a].value=l.join(",")},changeSelect(e,a){this.tableData[a].value=this.getName(this.tableData[a].select_value)[e.detail.value]},changeDate(e,a){this.tableData[a].value=e.detail.value},changeArea(e){this.areaIndex=e,this.$refs.mpvueCityPickerRef.show()},onConfirm(e){this.tableData[this.areaIndex].value=e.label,this.cityPickerValueDefault=[0,0,0],this.areaIndex=0},openUpload(e){this.uploadIndex=e,this.isupload=!0},getImgsFunc(e){null!=e&&e.length>0&&(this.tableData[this.uploadIndex].value=e[0].file_path),this.uploadIndex=0,this.isupload=!1},submit(){let e=this,a=!0,l="";if(console.log("哈哈哈哈"),this.tableData.forEach(((e,t)=>{if("false"!=e.is_required)switch(e.rule){case"mobile":s.isPoneAvailable(e.value)||(l="請輸入正確的手機號",a=!1);break;case"idcard":s.isVail(e.value)||(l="請輸入正確的身份證號碼",a=!1);break;case"phone":s.isTelAvailable(e.value)||(l="請輸入正確的座機或手機號",a=!1);break;case"email":s.isMail(e.value)||(l="請輸入正確的電子郵箱",a=!1);break;case"number":s.isNum(e.value)||(l="請輸入正確的數字",a=!1);break;case"no":""==e.value&&(l="必填項不能為空",a=!1,console.log(e))}})),!a)return e.showError(l),!1;let t=[...e.tableData];t.forEach(((e,a)=>{"area"==e.type&&(e.value=e.value+e.address)})),t=JSON.stringify(t),e._post("plus.table.table/add",{tableData:t,table_id:e.table_id,order_product_id:e.order_product_id},(function(a){e.showSuccess("提交成功",(function(){history.go(-1)}))}))}}},[["render",function(e,a,l,t,s,P){const R=g,E=r,N=v,G=y,j=D,O=x,S=C,A=V,F=w,z=I,J=U,B=q,L=h("mpvue-city-picker"),M=h("Upload");return s.loading?o("",!0):(d(),i(E,{key:0,"data-theme":e.theme(),class:c(e.theme()||"")},{default:u((()=>[(d(!0),n(m,null,f(s.tableData,((e,a)=>(d(),i(E,{key:a},{default:u((()=>["radio"==e.type?(d(),i(E,{key:0,class:"table-item"},{default:u((()=>[_(E,{class:"make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list"},{default:u((()=>[_(j,{onChange:e=>P.changeRadio(e,a)},{default:u((()=>[(d(!0),n(m,null,f(P.getName(e.select_value),((a,l)=>(d(),i(G,{class:"d-s-c make-item mb20",key:l},{default:u((()=>[_(E,null,{default:u((()=>[_(N,{style:{transform:"scale(0.7)"},color:"#EE1413",checked:e.value==a,value:a},null,8,["checked","value"])])),_:2},1024),_(E,{class:"f26 color-57"},{default:u((()=>[p(b(a),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["onChange"])])),_:2},1024)])),_:2},1024)):o("",!0),"radio-group"==e.type?(d(),i(E,{key:1,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list"},{default:u((()=>[_(S,{onChange:e=>P.changeRadioGroup(e,a)},{default:u((()=>[(d(!0),n(m,null,f(P.getName(e.select_value),((e,l)=>(d(),i(G,{class:"d-s-c make-item mb20",key:e},{default:u((()=>[_(E,null,{default:u((()=>[_(O,{style:{transform:"scale(0.7)"},color:"#EE1413",checked:-1!=P.getRadioGroup(a,e),value:e},null,8,["checked","value"])])),_:2},1024),_(E,{class:"f26 color-57"},{default:u((()=>[p(b(e),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["onChange"])])),_:2},1024)])),_:2},1024)):o("",!0),"text"==e.type?(d(),i(E,{key:2,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p(" * ")])),_:2},1032,["class"]),p(" "+b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"pr"},{default:u((()=>[_(A,{class:"make-item selectpicker input-box",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"text",placeholder:"請輸入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)):o("",!0),"textarea"==e.type?(d(),i(E,{key:3,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"pr"},{default:u((()=>[_(F,{class:"textarea-box",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"請輸入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)):o("",!0),"select"==e.type?(d(),i(E,{key:4,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list"},{default:u((()=>[_(z,{class:"",onChange:e=>P.changeSelect(e,a),range:P.getName(e.select_value)},{default:u((()=>[_(E,{class:"selectpicker"},{default:u((()=>[_(E,{class:"make-item input-box flex-1"},{default:u((()=>[p(b(e.value||"請選擇"),1)])),_:2},1024),_(E,{class:"icon iconfont icon-you"})])),_:2},1024)])),_:2},1032,["onChange","range"])])),_:2},1024)])),_:2},1024)):o("",!0),"date"==e.type?(d(),i(E,{key:5,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list"},{default:u((()=>[_(z,{class:"datapicker",mode:"date",onChange:e=>P.changeDate(e,a)},{default:u((()=>[_(E,{class:"make-item selectpicker input-box"},{default:u((()=>[p(b(e.value||"請選擇"),1)])),_:2},1024)])),_:2},1032,["onChange"])])),_:2},1024)])),_:2},1024)):o("",!0),"time"==e.type?(d(),i(E,{key:6,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list"},{default:u((()=>[_(z,{class:"datapicker",mode:"time",onChange:e=>P.changeDate(e,a)},{default:u((()=>[_(E,{class:"make-item selectpicker input-box"},{default:u((()=>[p(b(e.value||"請選擇"),1)])),_:2},1024)])),_:2},1032,["onChange"])])),_:2},1024)])),_:2},1024)):o("",!0),"area"==e.type?(d(),i(E,{key:7,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list make-item"},{default:u((()=>[_(E,{class:"input-box flex-1 selectpicker mb20",onClick:k((e=>P.changeArea(a)),["stop"])},{default:u((()=>[_(A,{type:"text","placeholder-class":"grary9",placeholder:"請選擇地區",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["onClick"]),_(E,{class:"pr selectpicker"},{default:u((()=>[_(A,{class:"make-item input-box",modelValue:e.address,"onUpdate:modelValue":a=>e.address=a,type:"text",placeholder:"請輸入詳情地址"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):o("",!0),"image"==e.type?(d(),i(E,{key:8,class:"table-item"},{default:u((()=>[_(E,{class:"d-s-c make-top"},{default:u((()=>[_(E,{class:"fb color-28 f26"},{default:u((()=>[_(R,{class:c("false"!=e.is_required?"red":"white")},{default:u((()=>[p("*")])),_:2},1032,["class"]),p(b(e.name),1)])),_:2},1024)])),_:2},1024),_(E,{class:"uni-list"},{default:u((()=>[_(J,{type:"default",class:"btn-red mb20 theme-btn",onClick:e=>P.openUpload(a)},{default:u((()=>[p("上傳圖片")])),_:2},1032,["onClick"]),""!=e.value?(d(),i(E,{key:0},{default:u((()=>[_(B,{style:{width:"300rpx"},src:e.value,mode:"widthFix"},null,8,["src"])])),_:2},1024)):o("",!0)])),_:2},1024)])),_:2},1024)):o("",!0)])),_:2},1024)))),128)),_(E,{class:"ww100"},{default:u((()=>[_(E,{class:"submit theme-btn",onClick:P.submit},{default:u((()=>[p("提交")])),_:1},8,["onClick"])])),_:1}),s.is_load?(d(),i(L,{key:0,ref:"mpvueCityPickerRef",province:s.province,city:s.city,area:s.area,pickerValueDefault:s.cityPickerValueDefault,onOnConfirm:P.onConfirm},null,8,["province","city","area","pickerValueDefault","onOnConfirm"])):o("",!0),s.isupload?(d(),i(M,{key:1,onGetImgs:P.getImgsFunc},{default:u((()=>[p("上傳圖片")])),_:1},8,["onGetImgs"])):o("",!0)])),_:1},8,["data-theme","class"]))}],["__scopeId","data-v-c677c5c7"]]);export{E as default};
