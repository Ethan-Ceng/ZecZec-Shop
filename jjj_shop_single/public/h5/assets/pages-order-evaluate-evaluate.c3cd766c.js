import{_ as a,z as e,B as t,o as s,c as l,w as c,e as o,g as i,b as d,f as n,r,F as u,d as f,h as m,a4 as p,k as _,t as g,n as b,i as h,j as k,a0 as x}from"./index-6e5c77a7.js";import{U as D}from"./upload.182a2719.js";const U=a({components:{Upload:D},data:()=>({loadding:!0,order_id:"",tableData:[],score:10,isUpload:!1,image_id:[],img:"/static/temp/photo.jpg",index:""}),onLoad(a){this.order_id=a.order_id},mounted(){e({title:"載入中"}),this.getData()},methods:{getData(){let a=this,e=a.order_id;a._get("user.comment/order",{order_id:e},(function(e){a.tableData=e.data.productList,a.tableData.forEach(((e,t)=>{a.tableData[t].score=10,a.tableData[t].image_list=[]})),a.loadding=!1,t()}))},gradeFunc(a,e,t){a.score=e,this.tableData[t]=a},formSubmit:function(a){let e=this,t=e.order_id;e._post("user.comment/order",{order_id:t,formData:JSON.stringify(this.tableData)},(function(a){e.showSuccess("評價成功！",(function(){e.gotoPage("/pages/order/myorder","redirect")}))}))},openUpload(a){this.index=a,this.isUpload=!0},getImgsFunc(a){let e=this;if(a&&void 0!==a){let t=e.index;e.tableData[t].image_list=e.tableData[t].image_list.concat(a)}e.isUpload=!1},deleteImg(a,e){let t=this.tableData[a];t.image_list.splice(e,1),this.tableDat[a]=t}}},[["render",function(a,e,t,D,U,C){const y=h,F=i,j=k,v=x,I=m,S=p,V=_("Upload");return U.loadding?o("",!0):(s(),l(F,{key:0,class:"evaluate pb100"},{default:c((()=>[d(S,{onSubmit:C.formSubmit,onReset:a.formReset},{default:c((()=>[(s(!0),n(u,null,r(U.tableData,((a,e)=>(s(),l(F,{class:"evaluate-item p30",key:e},{default:c((()=>[d(F,{class:"product d-s-c"},{default:c((()=>[d(F,{class:"cover"},{default:c((()=>[d(y,{src:a.image.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024),d(F,{class:"info ml20"},{default:c((()=>[d(F,{class:"name f28"},{default:c((()=>[f(g(a.product_name),1)])),_:2},1024),d(F,{class:"price pt10 f22 red"},{default:c((()=>[f(" ¥ "),d(j,{class:"f40"},{default:c((()=>[f(g(a.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(F,{class:"grade d-b-c p-30-0 mt30"},{default:c((()=>[d(F,{class:b(10==a.score?"flex-1 d-c-c active":"flex-1 d-c-c"),onClick:t=>C.gradeFunc(a,10,e)},{default:c((()=>[d(F,{class:"item d-c-c"},{default:c((()=>[d(j,{class:"icon iconfont icon-pingjiahaoping"}),d(j,{class:"ml10"},{default:c((()=>[f("好評")])),_:1})])),_:1})])),_:2},1032,["class","onClick"]),d(F,{class:b(20==a.score?"flex-1 d-c-c active":"flex-1 d-c-c"),onClick:t=>C.gradeFunc(a,20,e)},{default:c((()=>[d(F,{class:"item d-c-c"},{default:c((()=>[d(j,{class:"icon iconfont icon-pingjiazhongping"}),d(j,{class:"ml10"},{default:c((()=>[f("中評")])),_:1})])),_:1})])),_:2},1032,["class","onClick"]),d(F,{class:b(30==a.score?"flex-1 d-c-c active":"flex-1 d-c-c"),onClick:t=>C.gradeFunc(a,30,e)},{default:c((()=>[d(F,{class:"item d-c-c"},{default:c((()=>[d(j,{class:"icon iconfont icon-pingjiachaping"}),d(j,{class:"ml10"},{default:c((()=>[f("差評")])),_:1})])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1024),d(F,{class:"textarea-box d-s-c f28"},{default:c((()=>[d(v,{class:"p10 box-s-b border flex-1",modelValue:a.content,"onUpdate:modelValue":e=>a.content=e,placeholder:"請輸入評價內容"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),d(F,{class:"upload-list d-s-c"},{default:c((()=>[(s(!0),n(u,null,r(a.image_list,((a,t)=>(s(),l(F,{class:"item",key:t,onClick:a=>C.deleteImg(e,t)},{default:c((()=>[d(y,{src:a.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1032,["onClick"])))),128)),a.image_list.length<9?(s(),l(F,{key:0,class:"item upload-btn d-c-c d-c",onClick:a=>C.openUpload(e)},{default:c((()=>[d(j,{class:"icon iconfont icon-xiangji"}),d(j,{class:"gray9"},{default:c((()=>[f("上傳圖片")])),_:1})])),_:2},1032,["onClick"])):o("",!0)])),_:2},1024)])),_:2},1024)))),128)),d(F,{class:"foot-btns"},{default:c((()=>[d(I,{"form-type":"submit",class:"btn-red"},{default:c((()=>[f("確認提交")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"]),U.isUpload?(s(),l(V,{key:0,onGetImgs:C.getImgsFunc},null,8,["onGetImgs"])):o("",!0)])),_:1}))}],["__scopeId","data-v-ff4e234c"]]);export{U as default};
