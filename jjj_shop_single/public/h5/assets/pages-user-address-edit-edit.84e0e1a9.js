import{_ as e,a,M as d,o as t,c as s,w as i,n as l,g as o,b as r,d as n,e as c,j as u,I as m,a0 as f,a2 as _,h as p,a4 as h,k as y}from"./index-6e5c77a7.js";import{m as g}from"./mpvueCityPicker.d23ed411.js";const k=e({components:{mpvueCityPicker:g},data:()=>({cityPickerValueDefault:[0,0,0],selectCity:"選擇省,市,區",province_id:0,city_id:0,region_id:0,address_id:0,address:{},region:{},is_load:!1,province:[],city:[],area:[],is_default:!1}),onLoad(e){this.address_id=e.address_id},mounted(){this.getData()},methods:{getData(){let e=this,a=e.address_id;e._get("user.address/detail",{address_id:a},(function(a){e.address=a.data.detail,e.address_id=a.data.detail.address_id,e.province_id=a.data.detail.province_id,e.city_id=a.data.detail.city_id,e.region_id=a.data.detail.region_id,e.region=a.data.region;let d="";e.region.forEach((e=>{d+=e})),e.selectCity=d,e.province=a.data.regionData[0],e.city=a.data.regionData[1],e.area=a.data.regionData[2],e.is_default=1==a.data.is_default,e.is_load=!0}))},formSubmit:function(e){let t=this;var s=e.detail.value;return s.province_id=t.province_id,s.city_id=t.city_id,s.region_id=t.region_id,s.address_id=t.address_id,s.region=t.region,s.is_default=t.is_default?1:0,""==s.name?(a({title:"請輸入收貨人姓名",duration:1e3,icon:"none"}),!1):""==s.phone?(a({title:"請輸入手機號碼",duration:1e3,icon:"none"}),!1):0==s.province_id||0==s.city_id||0==s.region_id?(a({title:"請選擇完整省市區",duration:1e3,icon:"none"}),!1):void t._post("user.address/edit",s,(function(e){t.showSuccess(e.msg,(function(){d({delta:2})}))}))},formReset:function(e){console.log("清空資料")},showMulLinkageThreePicker(){this.$refs.mpvueCityPicker.show()},onConfirm(e){this.region=e.label.split(","),this.selectCity=e.label,this.province_id=e.cityCode[0],this.city_id=e.cityCode[1],this.region_id=e.cityCode[2]}}},[["render",function(e,a,d,g,k,v){const b=u,C=m,V=o,x=f,D=_,P=p,w=h,S=y("mpvue-city-picker");return t(),s(V,{class:l(["address-form",e.theme()||""]),"data-theme":e.theme()},{default:i((()=>[r(w,{onSubmit:v.formSubmit,onReset:v.formReset},{default:i((()=>[r(V,{class:"bg-white p-0-30 f30"},{default:i((()=>[r(V,{class:"d-s-c border-b"},{default:i((()=>[r(b,{class:"key-name"},{default:i((()=>[n("收貨人")])),_:1}),r(C,{class:"ml20 f32 flex-1 p-30-0",name:"name",type:"text",modelValue:k.address.name,"onUpdate:modelValue":a[0]||(a[0]=e=>k.address.name=e),"placeholder-class":"grary9",placeholder:"請輸入收貨人姓名"},null,8,["modelValue"])])),_:1}),r(V,{class:"d-s-c border-b"},{default:i((()=>[r(b,{class:"key-name"},{default:i((()=>[n("聯絡方式")])),_:1}),r(C,{class:"ml20 f32 flex-1 p-30-0",name:"phone",type:"text",modelValue:k.address.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>k.address.phone=e),"placeholder-class":"grary9",placeholder:"請輸入收貨人手機號"},null,8,["modelValue"])])),_:1}),r(V,{class:"d-s-c border-b",onClick:v.showMulLinkageThreePicker},{default:i((()=>[r(b,{class:"key-name"},{default:i((()=>[n("所在地區")])),_:1}),r(V,{class:"input-box flex-1"},{default:i((()=>[r(C,{class:"ml20 f32 flex-1 p-30-0",type:"text","placeholder-class":"grary9",placeholder:"",modelValue:k.selectCity,"onUpdate:modelValue":a[2]||(a[2]=e=>k.selectCity=e),disabled:"true",style:{"pointer-events":"none"}},null,8,["modelValue"])])),_:1})])),_:1},8,["onClick"]),r(V,{class:"d-s-c border-b"},{default:i((()=>[r(b,{class:"key-name"},{default:i((()=>[n("詳細地址")])),_:1}),r(x,{class:"ml20 flex-1 f32 p-30-0 lh150",name:"detail","placeholder-class":"grary9","auto-height":!0,modelValue:k.address.detail,"onUpdate:modelValue":a[3]||(a[3]=e=>k.address.detail=e),placeholder:"請輸入街道小區樓牌號等"},null,8,["modelValue"])])),_:1}),r(V,{class:"d-b-c"},{default:i((()=>[r(b,{class:"key-name"},{default:i((()=>[n("設為預設地址")])),_:1}),r(V,{class:"radio d-s-c p-30-0"},{default:i((()=>[r(D,{style:{transform:"scale(0.6)"},color:e.getThemeColor(),checked:k.is_default,onClick:a[4]||(a[4]=e=>k.is_default=!k.is_default)},null,8,["color","checked"])])),_:1})])),_:1})])),_:1}),r(V,{class:"p30"},{default:i((()=>[r(P,{"form-type":"submit",class:"theme-btn f32 mt60 addBtn"},{default:i((()=>[n("儲存")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"]),k.is_load?(t(),s(S,{key:0,ref:"mpvueCityPicker",province:k.province,city:k.city,area:k.area,pickerValueDefault:k.cityPickerValueDefault,onOnConfirm:v.onConfirm},null,8,["province","city","area","pickerValueDefault","onOnConfirm"])):c("",!0)])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-4e7ca08a"]]);export{k as default};
