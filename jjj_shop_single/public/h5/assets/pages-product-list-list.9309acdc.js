import{_ as t,x as e,y as s,o as a,c as o,w as l,n as i,g as c,b as r,d as _,q as d,f as p,r as n,F as h,e as u,j as f,I as g,i as y,k as m,S as b,t as x}from"./index-6e5c77a7.js";import{u as w}from"./uni-load-more.58b2601d.js";const v=t({components:{uniLoadMore:w},data:()=>({isLieBiao:!1,phoneHeight:0,scrollviewHigh:0,topRefresh:!1,loading:!0,no_more:!1,type_active:0,price_top:!1,listData:[],page:1,category_id:0,search:"",sortType:"",sortPrice:0,list_rows:10,last_page:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onLoad(t){this.category_id=t.category_id,t.search&&(this.search=t.search),t.sortType&&(this.sortType=t.sortType),t.sortPrice&&(this.sortPrice=t.sortPrice)},mounted(){this.init(),this.getData()},onPullDownRefresh(){this.restoreData(),this.getData()},onShareAppMessage(){return{title:"全部分類",path:"/pages/product/category?"+this.getShareUrlParams()}},methods:{searchFunc(){this.listData=[],this.page=1,this.getData()},init(){let t=this;e({success(e){t.phoneHeight=e.windowHeight,s().select(".top-box").boundingClientRect((e=>{let s=t.phoneHeight-e.height;t.scrollviewHigh=s})).exec()}})},restoreData(){this.listData=[],this.category_id=0,this.search="",this.sortType="",this.sortPrice=0},tabTypeFunc(t){let e=this;e.listData=[],e.page=1,e.no_more=!1,e.loading=!0,2==t?(e.price_top=!this.price_top,1==e.price_top?e.sortPrice=0:e.sortPrice=1,e.sortType="price"):1==t&&(e.price_top=!this.price_top,e.sortType="sales"),e.type_active=t,console.log(e.type_active),e.getData()},getData(){let t=this,e=t.page,s=t.list_rows,a=t.category_id,o=t.search,l=t.sortType,i=t.sortPrice;t.loading=!0,t._get("product.product/lists",{page:e||1,category_id:a,search:o,sortType:l,sortPrice:i,list_rows:s},(function(e){t.loading=!1,t.listData=t.listData.concat(e.data.list.data),t.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(t.no_more=!0)}))},gotoList(t){let e="pages/product/detail/detail?product_id="+t;this.gotoPage(e)},gotoSearch(){this.gotoPage("/pages/product/search/search")},scrolltolowerFunc(){let t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getData()},select_type(){this.isLieBiao=!this.isLieBiao}}},[["render",function(t,e,s,w,v,D){const T=f,k=g,P=c,L=y,C=m("uni-load-more"),F=b;return a(),o(P,{"data-theme":t.theme(),class:i(t.theme()||"")},{default:l((()=>[r(P,{class:"top-box"},{default:l((()=>[r(P,{class:"index-search-box index-search-box_re d-b-c",id:"searchBox"},{default:l((()=>[r(P,{class:"index-search index-search_re t-c flex-1"},{default:l((()=>[r(T,{class:"icon iconfont icon-sousuo"}),r(k,{type:"text","model-value":v.search,class:"flex-1 ml10 f26 gray3","placeholder-class":"f26 gray9",placeholder:"搜尋商品","confirm-type":"search",onConfirm:e[0]||(e[0]=t=>D.searchFunc())},null,8,["model-value"])])),_:1})])),_:1}),r(P,{class:"inner-tab"},{default:l((()=>[r(P,{class:i(0==v.type_active?"item active":"item"),onClick:e[1]||(e[1]=t=>D.tabTypeFunc(0))},{default:l((()=>[r(P,{class:"box"},{default:l((()=>[_("綜合")])),_:1})])),_:1},8,["class"]),r(P,{class:i(1==v.type_active?"item active":"item"),onClick:e[2]||(e[2]=t=>D.tabTypeFunc(1))},{default:l((()=>[r(P,{class:"box"},{default:l((()=>[_("銷量")])),_:1})])),_:1},8,["class"]),r(P,{class:i(2==v.type_active?"item active":"item"),onClick:e[3]||(e[3]=t=>D.tabTypeFunc(2))},{default:l((()=>[r(P,{class:"box"},{default:l((()=>[r(T,null,{default:l((()=>[_("價格")])),_:1}),r(P,{class:"arrows"},{default:l((()=>[r(P,{class:i(v.price_top&&2==v.type_active?"arrow active":"arrow")},{default:l((()=>[r(T,{class:"icon iconfont icon-sanjiao2"})])),_:1},8,["class"]),r(P,{class:i(v.price_top||2!=v.type_active?"arrow":"arrow active")},{default:l((()=>[r(T,{class:"icon iconfont icon-sanjiao1"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1},8,["class"]),r(P,{class:"item"},{default:l((()=>[r(P,{class:"box",style:{height:"100%"}},{default:l((()=>[r(L,{style:{width:"36rpx",height:"36rpx"},onClick:e[4]||(e[4]=t=>D.select_type()),src:1==v.isLieBiao?"/static/liebiao.png":"/static/tubiao.png"},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1}),r(P,{class:"prodcut-list-wrap"},{default:l((()=>[r(F,{"scroll-y":"true",class:"scroll-Y",style:d("height:"+v.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:D.scrolltolowerFunc},{default:l((()=>[r(P,{class:i(v.topRefresh?"top-refresh open":"top-refresh")},{default:l((()=>[(a(),p(h,null,n(3,((t,e)=>r(P,{class:"circle",key:e}))),64))])),_:1},8,["class"]),1==v.isLieBiao?(a(),o(P,{key:0,class:"shop_body"},{default:l((()=>[(a(!0),p(h,null,n(v.listData,((t,e)=>(a(),o(P,{class:i(["shop_body_l_item",e==v.listData.length-1?"noborder":""]),key:e,onClick:e=>D.gotoList(t.product_id)},{default:l((()=>[r(P,null,{default:l((()=>[r(L,{src:t.product_image,mode:""},null,8,["src"])])),_:2},1024),r(P,{class:"shop_body_l_item_info"},{default:l((()=>[r(P,{class:"shop_body_l_item_info_title gray3 f32"},{default:l((()=>[_(x(t.product_name),1)])),_:2},1024),r(P,{class:"d-b-c pb10"},{default:l((()=>[r(P,{class:"shop_body_l_item_info_price"},{default:l((()=>[r(P,{class:"f24 shop_red"},{default:l((()=>[_(" ¥ "),r(T,{class:"f32 fb"},{default:l((()=>[_(x(t.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(P,{class:"shop_body_l_item_info_others f22"},{default:l((()=>[r(P,{class:"shop_body_l_item_info_others_sales"},{default:l((()=>[_("累計成交："+x(t.product_sales)+"筆",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):u("",!0),0==v.isLieBiao?(a(),o(P,{key:1,class:"shop_body2"},{default:l((()=>[(a(!0),p(h,null,n(v.listData,((t,e)=>(a(),o(P,{class:i(["shop_body_t_item",e%2==0?"ml20 mr20":" mr20"]),key:e,onClick:e=>D.gotoList(t.product_id)},{default:l((()=>[r(L,{src:t.product_image,mode:""},null,8,["src"]),r(P,{class:"shop_body_t_item_info"},{default:l((()=>[r(P,{class:"shop_body_t_item_info_title f26"},{default:l((()=>[_(x(t.product_name),1)])),_:2},1024),r(P,{class:"shop_body_t_item_info_others f24 gray9 mt"},{default:l((()=>[r(P,{class:"shop_body_t_item_info_others_sales"},{default:l((()=>[_("累計成交："+x(t.product_sales)+"筆",1)])),_:2},1024)])),_:2},1024),r(P,{class:"shop_body_t_item_info_price"},{default:l((()=>[r(P,{class:"f20 redF6"},{default:l((()=>[_(" ¥ "),r(T,{class:"f32"},{default:l((()=>[_(x(t.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):u("",!0),0!=v.listData.length||v.loading?(a(),o(C,{key:3,loadingType:D.loadingType},null,8,["loadingType"])):(a(),o(P,{key:2,class:"d-c-c p30"},{default:l((()=>[r(T,{class:"iconfont icon-wushuju"}),r(T,{class:"cont"},{default:l((()=>[_("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1})])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-7faf8138"]]);export{v as default};
