import{_ as a,x as e,y as t,M as s,o as l,c as o,w as c,n as r,g as n,b as i,d,f as u,r as p,F as g,e as f,q as h,j as _,I as m,Y as w,k as y,S as b,t as x,i as v,X as k,h as D}from"./index-6e5c77a7.js";import{C}from"./countdown-presale.a8948a3b.js";const F=a({components:{Countdown:C},data:()=>({current:0,banner:[],phoneHeight:0,scrollviewHigh:0,activeList:[],type_active:0,currActive:{},listData:[],page:1,no_more:!1,detailData:{},loading:!0,countdownConfig:{startstamp:0,endstamp:0},searchForm:""}),computed:{},onLoad(){this.getData()},mounted(){this.init()},onPullDownRefresh(){},methods:{search(){this.listData=[],this.page=1,this.loading=!0,this.getData()},changeSwiper(a){this.current=a.detail.current},init(){let a=this;e({success(e){a.phoneHeight=e.windowHeight,t().select(".top-box").boundingClientRect((e=>{let t=a.phoneHeight-e.height;a.scrollviewHigh=t})).exec()}})},tabTypeFunc(a){this.type_active=a,this.currActive=this.activeList[a],this.getData()},goback(){s()},scrolltolowerFunc(){let a=this;if(a.page++,a.loading=!0,a.page>a.last_page)return a.loading=!1,void(a.no_more=!0);a.getData()},getData(){let a=this;a.loading=!0,a._get("plus.advance.Product/index",{search:a.searchForm,page:a.page},(function(e){a.banner=e.data.setting.image,console.log(a.banner),a.loading=!1,a.listData=a.listData.concat(e.data.list.data),a.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(a.no_more=!0)}))},gotoDetail(a){this.gotoPage("/pages/product/detail/detail?product_id="+a)},gotoSearch(){this.getData()},returnValFunc(a){}}},[["render",function(a,e,t,s,C,F){const H=_,S=m,V=n,j=v,P=k,R=w,q=y("Countdown"),L=D,A=b;return l(),o(V,{class:r(["presale-product-wrap",a.theme()||""]),"data-theme":a.theme()},{default:c((()=>[i(V,{class:"top-box"},{default:c((()=>[i(V,{class:"index-search-box d-b-c",id:"searchBox"},{default:c((()=>[i(V,{class:"index-search t-c flex-1"},{default:c((()=>[i(H,{class:"icon iconfont icon-sousuo"}),i(S,{type:"text",modelValue:C.searchForm,"onUpdate:modelValue":e[0]||(e[0]=a=>C.searchForm=a),class:"flex-1 ml10 f30 gray3","placeholder-class":"f24 gray6",placeholder:"輸入你要的商品","confirm-type":"search",onConfirm:e[1]||(e[1]=a=>F.search())},null,8,["modelValue"])])),_:1}),i(V,{class:"f26",onClick:e[2]||(e[2]=e=>a.gotoPage("/pages/order/myorder"))},{default:c((()=>[d("我的預定")])),_:1})])),_:1})])),_:1}),C.loading?f("",!0):(l(),o(V,{key:0,class:"presale-list-wrap"},{default:c((()=>[i(A,{"scroll-y":"true",class:"scroll-Y",style:h("height:"+C.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:F.scrolltolowerFunc},{default:c((()=>[i(V,{class:"diy-banner-box pt20 mb20 pr square"},{default:c((()=>[i(R,{class:"swiper",autoplay:"",interval:3e3,duration:500,onChange:F.changeSwiper},{default:c((()=>[(l(!0),u(g,null,p(C.banner,((e,t)=>(l(),o(P,{key:t,onClick:t=>a.gotoPages(e)},{default:c((()=>[i(j,{src:e.file_path},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["onChange"]),i(V,{class:"swiper-dots ww100 d-s-c square"},{default:c((()=>[(l(!0),u(g,null,p(C.banner,((a,e)=>(l(),o(V,{class:r(C.current==e?"swiper-dot active":"swiper-dot"),style:h(C.current==e?"background-color:#ffffff;":""),key:e},null,8,["class","style"])))),128))])),_:1})])),_:1}),i(V,{class:"list p-0-20"},{default:c((()=>[(l(!0),u(g,null,p(C.listData,((a,e)=>(l(),o(V,{class:"item d-stretch",key:e,onClick:e=>F.gotoDetail(a.product.product_id)},{default:c((()=>[i(V,{class:"product-cover"},{default:c((()=>[i(j,{src:a.product_image,mode:"aspectFit"},null,8,["src"])])),_:2},1024),i(V,{class:"d-b-c d-c flex-1 ml26"},{default:c((()=>[i(V,{class:"product-title ww100"},{default:c((()=>[d(x(a.product.product_name),1)])),_:2},1024),i(V,{class:"d-s-c ww100"},{default:c((()=>[i(q,{ref_for:!0,ref:"countdown",color:"#999999",timeSize:"22rpx",config:{startstamp:a.start_time,endstamp:a.end_time},onReturnVal:F.returnValFunc},null,8,["config","onReturnVal"])])),_:2},1024),i(V,{class:"ww100"},{default:c((()=>[i(H,{class:"dj-text"},{default:c((()=>[d("定金:￥"+x(a.money),1)])),_:2},1024),i(H,{class:"ml20 gray6 f20"},{default:c((()=>[d("尾款立減￥"+x(a.sku[0].advance_price),1)])),_:2},1024)])),_:2},1024),i(V,{class:"slider-box ww100 d-b-c"},{default:c((()=>[i(V,null,{default:c((()=>[i(V,{class:"f32 redF11"},{default:c((()=>[i(H,{class:"f16 fb"},{default:c((()=>[d("￥")])),_:1}),d(x((1*a.sku[0].product_price-1*a.sku[0].advance_price+1*a.money).toFixed(2)),1)])),_:2},1024),i(V,{class:"f20 gray9"},{default:c((()=>[d("預估到手價")])),_:1})])),_:2},1024),i(V,{class:"right-btn ml30"},{default:c((()=>[i(L,{type:"primary"},{default:c((()=>[d("搶購")])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),0!=C.listData.length||C.loading?f("",!0):(l(),o(V,{key:0,class:"d-c-c p30"},{default:c((()=>[i(H,{class:"iconfont icon-wushuju"}),i(H,{class:"cont"},{default:c((()=>[d("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1}))])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-827b6132"]]);export{F as default};
