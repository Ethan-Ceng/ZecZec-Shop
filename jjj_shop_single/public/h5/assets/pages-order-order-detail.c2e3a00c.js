import{_ as e,a3 as a,z as t,B as l,J as s,a as d,o as i,c,w as r,n as _,e as u,g as o,b as n,d as f,t as p,f as y,r as m,F as k,j as g,i as x,h as b}from"./index-6e5c77a7.js";import{_ as h}from"./address_icon.d6478ab7.js";const v=e({data:()=>({loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,isPayPopup:!1,order_id:0,detail:{order_status:[],address:{region:[]},product:[],pay_type:[],delivery_type:[],pay_status:[]},extractStore:{},is_send_wx:null,mch_id:null,custom_form:""}),onLoad(e){this.order_id=e.order_id},onShow(){this.getData()},methods:{copyText(e){let t="";this.custom_form.map((e=>{"img"!==e.label&&(t+=e.title+e.value)})),a({data:t})},getData(){let e=this,a=e.order_id;t({title:"載入中"}),e._get("user.order/detail",{order_id:a},(function(a){e.mch_id=a.data.mch_id,e.is_send_wx=a.data.is_send_wx,e.detail=a.data.order,e.extractStore=a.data.order.extractStore,e.custom_form=e.detail.custom_form,e.loadding=!1,l()}))},cancelOrder(e){let a=this,i=e;s({title:"提示",content:"您確定要取消當前訂單嗎?",success:function(e){e.confirm&&(t({title:"正在處理"}),a._get("user.order/cancel",{order_id:i},(function(e){l(),d({title:"操作成功",duration:2e3,icon:"success"}),a.getData()})))}})},orderReceipt(e){let a=this;s({title:"提示",content:"您確定要收貨嗎?",success:function(s){s.confirm&&(t({title:"正在處理"}),a._post("user.order/receipt",{order_id:e},(function(e){l(),d({title:e.msg,duration:2e3,icon:"success"}),a.getData()})))}})},wxOrder(e){let a=this;wx.openBusinessView&&wx.openBusinessView({businessType:"weappOrderConfirm",extraData:{merchant_id:a.mch_id,merchant_trade_no:e.trade_no,transaction_id:e.transaction_id},success(){a._post("user.order/receipt",{order_id:e.order_id},(function(e){d({title:e.msg,duration:2e3,icon:"success"}),a.listData=[],a.getData()}))},fail(){},complete(){}})},gotoExpress(e){this.gotoPage("/pages/order/express/express?order_id="+e)},onApplyRefund(e){this.gotoPage("/pages/order/refund/apply/apply?order_product_id="+e)},onSaveTable(e,a){this.gotoPage("/pages/plus/table/table?table_id="+e+"&order_product_id="+a)},onPayOrder(e){this.gotoPage("/pages/order/cashier?order_id="+e)}}},[["render",function(e,a,t,l,s,d){const v=g,w=o,C=x,S=b;return s.loadding?u("",!0):(i(),c(w,{key:0,"data-theme":e.theme(),class:_("order-datail pb100"+e.theme())},{default:r((()=>[n(w,{class:"order-state d-s-c"},{default:r((()=>[n(w,{class:"icon-box"},{default:r((()=>["待發貨"==s.detail.state_text?(i(),c(v,{key:0,class:"icon iconfont icon-icon"})):u("",!0),"待付款"==s.detail.state_text?(i(),c(v,{key:1,class:"icon iconfont icon-icon"})):u("",!0),"待收貨"==s.detail.state_text?(i(),c(v,{key:2,class:"icon iconfont icon-daishouhuo"})):u("",!0),"已完成"==s.detail.state_text?(i(),c(v,{key:3,class:"icon iconfont icon-xuanze"})):u("",!0),"已取消"==s.detail.state_text?(i(),c(v,{key:4,class:"icon iconfont icon-gantanhao"})):u("",!0)])),_:1}),n(w,{class:"state-cont flex-1"},{default:r((()=>[n(w,{class:"state-txt d-b-c"},{default:r((()=>[n(v,{class:"desc f34"},{default:r((()=>[f(p(s.detail.state_text),1)])),_:1})])),_:1}),10==s.detail.pay_status.value?(i(),c(w,{key:0,class:"status-price pt10"},{default:r((()=>[f("應付金額：¥ "+p(s.detail.pay_price),1)])),_:1})):u("",!0),s.detail.pay_end_time?(i(),c(w,{key:1,class:"countdown-datetime"},{default:r((()=>[n(v,null,{default:r((()=>[f("剩"+p(s.detail.pay_end_time)+"自動關閉",1)])),_:1})])),_:1})):u("",!0)])),_:1}),n(w,{class:"dot-bg"})])),_:1}),10==s.detail.delivery_type.value?(i(),c(w,{key:0,class:"order-express p30 d-s-c"},{default:r((()=>[n(w,{class:"icon-box"},{default:r((()=>[n(C,{style:{width:"42rpx",height:"42rpx"},src:h,mode:""})])),_:1}),n(w,{class:"cont-text flex-1 o-h ml20 f30"},{default:r((()=>[n(w,{class:"express-text f32"},{default:r((()=>[f(p(s.detail.address.name)+" ",1),n(v,{class:"f26 gray9"},{default:r((()=>[f(p(s.detail.address.phone),1)])),_:1})])),_:1}),n(w,{class:"gray3 f26 pt10"},{default:r((()=>[f(p(s.detail.address.region.province)+p(s.detail.address.region.city)+p(s.detail.address.region.region)+p(s.detail.address.detail),1)])),_:1})])),_:1}),n(w,{class:"icon iconfont icon-you"})])),_:1})):u("",!0),20==s.detail.delivery_type.value?(i(),c(w,{key:1,class:"order-express p30 d-s-s"},{default:r((()=>[n(w,{class:"flow-delivery__title m-top20"},{default:r((()=>[n(v,{class:"icon iconfont icon-dizhi1"},{default:r((()=>[f("自提門店")])),_:1})])),_:1}),n(w,{class:"cont-text flex-1 o-h ml20 f30"},{default:r((()=>[n(w,{class:"express-text"},{default:r((()=>[f(p(s.extractStore.store_name)+" "+p(s.extractStore.phone)+" ",1),n(w,{class:"f24 gray9 pt10"},{default:r((()=>[f(p(s.extractStore.region.province)+" "+p(s.extractStore.region.city)+" "+p(s.extractStore.region.region)+" "+p(s.extractStore.address),1)])),_:1})])),_:1})])),_:1})])),_:1})):u("",!0),n(w,{class:"shops group bg-white"},{default:r((()=>[n(w,{class:"list"},{default:r((()=>[(i(!0),y(k,null,m(s.detail.product,((a,t)=>(i(),c(w,{class:"one-product p-20-0",key:t},{default:r((()=>[n(w,{class:"d-s-s"},{default:r((()=>[n(w,{class:"cover"},{default:r((()=>[n(C,{src:a.image.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024),n(w,{class:"flex-1"},{default:r((()=>[n(w,{class:"p-0-30 text-ellipsis-2 gray3 f30 mb6"},{default:r((()=>[1==a.is_gift?(i(),c(v,{key:0,class:"gift-tips"},{default:r((()=>[f("贈品")])),_:1})):u("",!0),f(" "+p(a.product_name),1)])),_:2},1024),a.product_attr?(i(),c(w,{key:0,class:"pt10 p-0-30 gray6 f24"},{default:r((()=>[f(p(a.product_attr),1)])),_:2},1024)):u("",!0),n(w,{class:"pt10 p-0-30 d-b-c"},{default:r((()=>[a.is_gift?u("",!0):(i(),y(k,{key:0},[1!=a.is_user_grade?(i(),c(w,{key:0,class:"price f22"},{default:r((()=>[f(" ¥ "),n(v,{class:"f40"},{default:r((()=>[f(p(a.product_price),1)])),_:2},1024)])),_:2},1024)):(i(),c(w,{key:1,class:"text-l-t f22"},{default:r((()=>[f(" ¥ "),n(v,{class:"f40"},{default:r((()=>[f(p(a.product_price),1)])),_:2},1024)])),_:2},1024))],64)),n(w,{class:"f24 gray9"},{default:r((()=>[f("x"+p(a.total_num),1)])),_:2},1024)])),_:2},1024),1!=a.is_user_grade||a.is_gift?u("",!0):(i(),c(w,{key:1,class:"mt10 tr f28"},{default:r((()=>[n(v,{class:"red"},{default:r((()=>[f("會員折扣價：")])),_:1}),n(v,{class:"red"},{default:r((()=>[f(p(a.grade_product_price),1)])),_:2},1024)])),_:2},1024)),n(w,{class:"pt10 p-0-30 d-b-c"},{default:r((()=>[a.is_gift?(i(),c(w,{key:0,class:"gray9 text-d-line"},{default:r((()=>[f(" ¥"+p(a.line_price),1)])),_:2},1024)):u("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),a.table_id>0&&a.table_record_id>0?(i(),c(w,{key:0,class:"supplement-box"},{default:r((()=>[(i(!0),y(k,null,m(a.tableData,((a,t)=>(i(),c(w,{class:"p20",key:t},{default:r((()=>["image"==a.type?(i(),c(w,{key:0,class:"d-s-s"},{default:r((()=>[n(v,{class:"gray6 mr15"},{default:r((()=>[f(p(a.name)+":",1)])),_:2},1024),n(C,{style:{width:"80rpx",height:"80rpx"},onClick:t=>e.yulan(a.value,0),src:a.value,mode:"aspectFill"},null,8,["onClick","src"])])),_:2},1024)):(i(),y(k,{key:1},[n(v,{class:"gray6 mr15"},{default:r((()=>[f(p(a.name)+":",1)])),_:2},1024),n(v,null,{default:r((()=>[f(p(a.value),1)])),_:2},1024)],64))])),_:2},1024)))),128))])),_:2},1024)):u("",!0),n(w,{class:"pt10 d-e-c"},{default:r((()=>[n(w,{class:"m-top20 dis-flex flex-x-end"},{default:r((()=>[a.allowRefund?(i(),c(v,{key:0},{default:r((()=>[f("已申請售後")])),_:1})):s.detail.isAllowRefund?(i(),c(w,{key:1,onClick:e=>d.onApplyRefund(a.order_product_id)},{default:r((()=>[n(S,{type:"default"},{default:r((()=>[f("申請售後")])),_:1})])),_:2},1032,["onClick"])):u("",!0)])),_:2},1024)])),_:2},1024),a.table_id>0&&0==a.table_record_id?(i(),c(w,{key:1,class:"pt10 d-e-c"},{default:r((()=>[n(w,{class:"m-top20 dis-flex flex-x-end"},{default:r((()=>[n(w,{onClick:e=>d.onSaveTable(a.table_id,a.order_product_id)},{default:r((()=>[n(S,{class:"theme-btn"},{default:r((()=>[f("補充資訊")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):u("",!0)])),_:2},1024)))),128))])),_:1})])),_:1}),n(w,{class:"group bg-white f26"},{default:r((()=>[80==s.detail.order_source?(i(),c(w,{key:0,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("定金：")])),_:1}),n(v,null,{default:r((()=>[f("￥"+p(s.detail.advance.pay_price),1)])),_:1})])),_:1})):u("",!0),s.detail.pay_price&&80==s.detail.order_source?(i(),c(w,{key:1,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("尾款：")])),_:1}),n(v,null,{default:r((()=>[f("￥"+p(s.detail.total_price),1)])),_:1})])),_:1})):u("",!0),n(w,{class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("訂單編號：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.order_no),1)])),_:1})])),_:1}),n(w,{class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("下單時間：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.create_time),1)])),_:1})])),_:1}),s.detail.pay_time?(i(),c(w,{key:2,class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("支付時間：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.pay_time),1)])),_:1})])),_:1})):u("",!0),s.detail.delivery_time?(i(),c(w,{key:3,class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("發貨時間：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.delivery_time),1)])),_:1})])),_:1})):u("",!0),s.detail.receipt_time?(i(),c(w,{key:4,class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("完成時間：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.receipt_time),1)])),_:1})])),_:1})):u("",!0),n(w,{class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("支付方式：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.pay_type.text),1)])),_:1})])),_:1}),n(w,{class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("配送方式：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.delivery_type.text),1)])),_:1})])),_:1}),30==s.detail.delivery_type.value&&30==s.detail.order_status.value&&""!=s.detail.virtual_content?(i(),c(w,{key:5,class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("發貨資訊：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.virtual_content),1)])),_:1})])),_:1})):u("",!0),n(w,{class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("備註：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.buyer_remark),1)])),_:1})])),_:1}),20==s.detail.order_status.value&&""!=s.detail.cancel_remark?(i(),c(w,{key:6,class:"p-20-0"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("商家備註：")])),_:1}),n(v,null,{default:r((()=>[f(p(s.detail.cancel_remark),1)])),_:1})])),_:1})):u("",!0)])),_:1}),s.custom_form&&s.custom_form.length?(i(),c(w,{key:2,class:"wrapper"},{default:r((()=>[(i(!0),y(k,null,m(s.custom_form,((e,a)=>(i(),c(w,{class:"item acea-row row-between",key:a},{default:r((()=>[n(w,{class:"diy-from-title"},{default:r((()=>[f(p(e.title)+"：",1)])),_:2},1024),n(w,{class:"conter"},{default:r((()=>[f(p(e.value),1)])),_:2},1024)])),_:2},1024)))),128)),n(w,{class:"copy-text",onClick:a[0]||(a[0]=e=>d.copyText())},{default:r((()=>[f(" 複製 ")])),_:1})])),_:1})):u("",!0),n(w,{class:"group bg-white f26"},{default:r((()=>[20==s.detail.order_source?(i(),c(w,{key:0,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("扣除"+p(e.points_name())+"數：",1)])),_:1}),n(v,null,{default:r((()=>[f("-"+p(s.detail.points_num),1)])),_:1})])),_:1})):u("",!0),n(w,{class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:"gray9"},{default:r((()=>[f("訂單總額")])),_:1}),n(v,null,{default:r((()=>[f("¥ "+p(s.detail.total_price),1)])),_:1})])),_:1}),n(w,{class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("運費")])),_:1}),n(v,null,{default:r((()=>[f("¥ "+p(s.detail.express_price),1)])),_:1})])),_:1}),s.detail.product_reduce_money>0?(i(),c(w,{key:1,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("商品立減")])),_:1}),n(v,null,{default:r((()=>[f("-¥ "+p(s.detail.product_reduce_money),1)])),_:1})])),_:1})):u("",!0),s.detail.fullreduce_money>0?(i(),c(w,{key:2,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("滿減")])),_:1}),n(v,null,{default:r((()=>[f("-¥ "+p(s.detail.fullreduce_money),1)])),_:1})])),_:1})):u("",!0),s.detail.points_money>0?(i(),c(w,{key:3,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f(p(e.points_name())+"抵扣",1)])),_:1}),n(v,null,{default:r((()=>[f("-¥ "+p(s.detail.points_money),1)])),_:1})])),_:1})):u("",!0),s.detail.advance&&s.detail.advance.reduce_money>0?(i(),c(w,{key:4,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("尾款立減")])),_:1}),n(v,null,{default:r((()=>[f("-¥ "+p(s.detail.advance.reduce_money),1)])),_:1})])),_:1})):u("",!0),s.detail.coupon_money>0?(i(),c(w,{key:5,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("優惠券")])),_:1}),n(v,null,{default:r((()=>[f("-¥ "+p(s.detail.coupon_money),1)])),_:1})])),_:1})):u("",!0),10!=s.detail.pay_status.value?(i(),y(k,{key:6},[s.detail.online_money>0?(i(),c(w,{key:0,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f(p(s.detail.pay_type.text),1)])),_:1}),n(v,null,{default:r((()=>[f("¥ "+p(s.detail.online_money),1)])),_:1})])),_:1})):u("",!0),s.detail.balance>0?(i(),c(w,{key:1,class:"p-20-0 d-b-c"},{default:r((()=>[n(v,{class:""},{default:r((()=>[f("餘額支付")])),_:1}),n(v,null,{default:r((()=>[f("¥ "+p(s.detail.balance),1)])),_:1})])),_:1})):u("",!0)],64)):u("",!0),n(w,{class:"p-20-0 d-e-c fb f34"},{default:r((()=>[f(" 實付金額： "),80==s.detail.order_source?(i(),c(v,{key:0,class:"red"},{default:r((()=>[f("¥"+p((1*s.detail.pay_price+1*s.detail.advance.pay_price).toFixed(2)),1)])),_:1})):(i(),c(v,{key:1,class:"red"},{default:r((()=>[f("¥ "+p(s.detail.pay_price),1)])),_:1}))])),_:1})])),_:1}),80!=s.detail.order_source?(i(),y(k,{key:3},[20!=s.detail.order_status.value&&30!=s.detail.order_status.value?(i(),c(w,{key:0,class:"foot-btns"},{default:r((()=>[10==s.detail.pay_status.value?(i(),c(S,{key:0,class:"theme-borderbtn",onClick:a[1]||(a[1]=e=>d.cancelOrder(s.detail.order_id))},{default:r((()=>[f("取消訂單")])),_:1})):u("",!0),21!=s.detail.order_status.value?(i(),y(k,{key:1},[20==s.detail.pay_status.value&&10==s.detail.delivery_status.value?(i(),c(S,{key:0,onClick:a[2]||(a[2]=e=>d.cancelOrder(s.detail.order_id)),class:"theme-borderbtn"},{default:r((()=>[f("申請取消")])),_:1})):u("",!0)],64)):(i(),c(v,{key:2,class:"count f28 gray9"},{default:r((()=>[f("取消申請中")])),_:1})),10==s.detail.pay_status.value?(i(),y(k,{key:3},[10==s.detail.pay_status.value?(i(),c(S,{key:0,onClick:a[3]||(a[3]=e=>d.onPayOrder(s.detail.order_id)),class:"ml10 theme-btn"},{default:r((()=>[f("去支付")])),_:1})):u("",!0)],64)):u("",!0),20==s.detail.delivery_status.value&&10==s.detail.receipt_status.value?(i(),y(k,{key:4},[20==s.detail.pay_type.value&&"wx"==s.detail.pay_source&&s.is_send_wx?(i(),c(S,{key:0,class:"theme-btn",onClick:a[4]||(a[4]=e=>d.wxOrder(s.detail))},{default:r((()=>[f("確認收貨")])),_:1})):(i(),c(S,{key:1,class:"theme-btn",onClick:a[5]||(a[5]=e=>d.orderReceipt(s.detail.order_id))},{default:r((()=>[f("確認收貨")])),_:1}))],64)):u("",!0),1!=s.detail.is_single&&10!=s.detail.delivery_type.value||10==s.detail.delivery_status.value?u("",!0):(i(),c(S,{key:5,class:"theme-btn ml10",onClick:a[6]||(a[6]=a=>e.gotoPage(`/pages/order/express/express?order_id=${s.order_id}`))},{default:r((()=>[f("檢視物流")])),_:1}))])),_:1})):u("",!0)],64)):u("",!0)])),_:1},8,["data-theme","class"]))}],["__scopeId","data-v-776af6d9"]]);export{v as default};
