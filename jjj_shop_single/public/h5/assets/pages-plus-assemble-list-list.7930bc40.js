import{_ as t,x as e,y as a,B as s,z as l,o as i,c,w as o,g as d,b as n,f as r,r as u,F as _,e as g,d as p,q as f,S as m,i as h,k as y,n as b,t as w,j as v,h as C}from"./index-6e5c77a7.js";import{C as k}from"./countdown.ae2f98a7.js";import{_ as x}from"./active-null.b7f90725.js";const D=t({components:{Countdown:k},data:()=>({phoneHeight:0,scrollviewHigh:0,categorys:[],assemble_activity_id:0,listData:{list:[],detail:null},countdownConfig:{startstamp:0,endstamp:0},loading:!0}),computed:{},onLoad(t){},onShow(){this.getCategory()},mounted(){},onReachBottom(){},methods:{init(){let t=this;e({success(e){t.phoneHeight=e.windowHeight,a().select(".top-box").boundingClientRect((e=>{let a=t.phoneHeight-e.height;t.scrollviewHigh=a})).exec(),s()}})},tabTypeFunc(t,e){this.type_active=t,this.assemble_activity_id=e,this.productList=[],this.getProdct()},getCategory(){let t=this;t.type_active,t._get("plus.assemble.product/active",{param:{}},(function(e){t.categorys=e.data.list,t.categorys.length>0&&(t.assemble_activity_id=t.categorys[0].assemble_activity_id),t.getProdct()}))},getProdct(){let t=this;l({title:"載入中"});let e=t.assemble_activity_id;t.loading=!0,t._get("plus.assemble.product/product",{assemble_activity_id:e},(function(e){t.listData=e.data,t.countdownConfig.endstamp=e.data.detail.end_time,t.countdownConfig.startstamp=e.data.detail.start_time,t.$nextTick((()=>{t.init()})),t.loading=!1}))},gotoDetail(t){console.log(t),this.$refs.countdown.clear();let e="pages/plus/assemble/detail/detail?assemble_product_id="+t.assemble_product_id;this.gotoPage(e)},gotoSearch(){this.page=1,this.getData()},returnValFunc(t){console.log(t)}}},[["render",function(t,e,a,s,l,k){const D=d,F=m,H=h,j=y("Countdown"),P=v,R=C;return i(),c(D,{class:"assemble-container"},{default:o((()=>[n(D,{class:"top-box"},{default:o((()=>[l.categorys.length>0?(i(),c(D,{key:0,class:"inner-tab"},{default:o((()=>[n(F,{"scroll-X":"true","show-scrollbar":"false",class:"scroll-X"},{default:o((()=>[n(D,{class:"tab-list"},{default:o((()=>[(i(!0),r(_,null,u(l.categorys,((t,e)=>(i(),c(D,{class:b(l.assemble_activity_id==t.assemble_activity_id?"item active":"item"),key:e,onClick:a=>k.tabTypeFunc(e,t.assemble_activity_id)},{default:o((()=>[p(w(t.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1})):g("",!0),l.listData.detail&&l.categorys.length>0?(i(),c(D,{key:1,class:"banner-image d-c-c"},{default:o((()=>[n(H,{src:l.listData.detail.file_path},null,8,["src"])])),_:1})):g("",!0),l.listData.detail&&l.categorys.length>0?(i(),c(D,{key:2,class:"ad-datetime p-30-0 d-c-c pb0"},{default:o((()=>[n(j,{ref:"countdown",config:l.countdownConfig,onReturnVal:k.returnValFunc},null,8,["config","onReturnVal"])])),_:1})):(i(),c(D,{key:3,class:"p30 pt200 d-c-c d-c gray6 f26"},{default:o((()=>[n(H,{style:{width:"532rpx","margin-bottom":"80rpx"},src:x,mode:"widthFix"}),n(D,{class:"tc gray9"},{default:o((()=>[p("暫無活動~~")])),_:1})])),_:1}))])),_:1}),l.loading?g("",!0):(i(),c(D,{key:0,class:"assemble-list"},{default:o((()=>[n(F,{"scroll-y":"true",class:"scroll-Y",style:f("height:"+l.scrollviewHigh+"px;"),"lower-threshold":"50"},{default:o((()=>[n(D,{class:"list d-s-c f-w"},{default:o((()=>[(i(!0),r(_,null,u(l.listData.list,((t,e)=>(i(),c(D,{class:"item d-s-s d-stretch",key:e},{default:o((()=>[n(D,{class:"product-cover pr"},{default:o((()=>[n(H,{src:t.product.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024),n(D,{class:"product-info d-b-c d-c"},{default:o((()=>[n(D,{class:"product-title text-ellipsis-2"},{default:o((()=>[p(w(t.product.product_name),1)])),_:2},1024),n(D,{class:"people-num price"},{default:o((()=>[n(P,{class:"f24"},{default:o((()=>[p("￥")])),_:1}),n(P,{class:"f36 fb"},{default:o((()=>[p(w(t.assemble_price),1)])),_:2},1024),n(P,{class:"ml10 text-d-line gray9 f24"},{default:o((()=>[p("￥"+w(t.product_price),1)])),_:2},1024)])),_:2},1024),n(D,{class:"d-b-c ww100"},{default:o((()=>[n(D,{class:"f22"},{default:o((()=>[n(P,{class:"redF6"},{default:o((()=>[p(w(t.assemble_num)+"人團",1)])),_:2},1024),n(P,{class:"ml10 gray9 <f22></f22>"},{default:o((()=>[p("已拼"+w(t.product_sales)+"件",1)])),_:2},1024)])),_:2},1024),n(D,{class:"right-btn"},{default:o((()=>[n(R,{type:"primary",onClick:e=>k.gotoDetail(t)},{default:o((()=>[p("去開團")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])])),_:1}))])),_:1})}],["__scopeId","data-v-7ed119a2"]]);export{D as default};
