import{_ as s,ad as a,A as e,o as t,c as i,w as o,b as l,d as c,u as n,n as p,g as r,j as h,h as d}from"./index-6e5c77a7.js";const f=s({data:()=>({Visible:!1,shareConfig:{},logo:""}),created(){this.getData()},props:["isAppShare","appParams"],watch:{isAppShare:function(s,a){s!=a&&(this.Visible=s)}},methods:{getData(){let s=this;s._get("settings/appShare",{},(function(a){s.shareConfig=a.data.appshare,s.logo=a.data.logo}))},closePopup(s){this.$emit("close")},share:function(s,t){let i={provider:"weixin",scene:t,type:s,success:function(s){console.log("success:"+JSON.stringify(s))},fail:function(s){console.log("fail:"+JSON.stringify(s))}};2!=this.shareConfig.type?(i.summary=this.appParams.summary,i.imageUrl=this.logo,i.title=this.appParams.title,1==this.shareConfig.type?i.href=this.shareConfig.open_site+this.appParams.path:3==this.shareConfig.type&&(1==this.shareConfig.bind_type?i.href=this.shareConfig.down_url:i.href=a.app_url+"/index.php/api/user.useropen/invite?app_id="+a.app_id+"&referee_id="+e("user_id"))):(i.scene="WXSceneSession",i.type=5,i.imageUrl=this.appParams.image?this.appParams.image:this.logo,i.title=this.appParams.title,i.miniProgram={id:this.shareConfig.gh_id,path:this.appParams.path,webUrl:this.shareConfig.web_url,type:0}),uni.share(i)}}},[["render",function(s,a,e,f,u,g){const m=r,_=h,b=d;return t(),i(m,{class:p(["bottom-panel popup-bg",u.Visible?"bottom-panel open":"bottom-panel close"]),onClick:g.closePopup},{default:o((()=>[l(m,{class:"content",onClick:a[3]||(a[3]=n((()=>{}),["stop"]))},{default:o((()=>[l(m,{class:"module-box module-share"},{default:o((()=>[l(m,{class:"hd d-c-c"},{default:o((()=>[c(" 分享 ")])),_:1}),l(m,{class:"p30 box-s-b"},{default:o((()=>[l(m,{class:"d-c-c"},{default:o((()=>[l(m,{class:"item flex-1 d-c-c d-c"},{default:o((()=>[l(b,{"open-type":"share",onClick:a[0]||(a[0]=s=>g.share(0,"WXSceneSession"))},{default:o((()=>[l(m,{class:"icon-box d-c-c share-friend"},{default:o((()=>[l(_,{class:"iconfont icon-fenxiang"})])),_:1}),l(_,{class:"pt20"},{default:o((()=>[c("微信好友")])),_:1})])),_:1})])),_:1}),l(m,{class:"item flex-1 d-c-c d-c"},{default:o((()=>[l(b,{class:"d-c-c d-c",onClick:a[1]||(a[1]=s=>g.share(0,"WXSenceTimeline"))},{default:o((()=>[l(m,{class:"icon-box d-c-c"},{default:o((()=>[l(_,{class:"iconfont icon-edit"})])),_:1}),l(_,{class:"pt20"},{default:o((()=>[c("微信朋友圈")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),l(m,{class:"btns"},{default:o((()=>[l(b,{type:"default",onClick:a[2]||(a[2]=s=>g.closePopup(1))},{default:o((()=>[c("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-7accbfb4"]]);export{f as A};
