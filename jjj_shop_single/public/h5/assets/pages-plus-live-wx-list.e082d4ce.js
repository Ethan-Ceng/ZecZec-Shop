import{_ as s,x as a,z as t,a8 as e,o as l,c as i,w as o,g as n,b as r,f as c,r as d,F as g,d as u,q as p,j as _,k as h,S as m,n as v,t as f,e as w,i as b}from"./index-6e5c77a7.js";import{u as k}from"./uni-load-more.58b2601d.js";const y=s({components:{uniLoadMore:k},data:()=>({phoneHeight:0,scrollviewHigh:0,loading:!0,no_more:!1,listData:[],list_rows:10,last_page:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},mounted(){this.init(),this.getLive()},onShareAppMessage(){return{title:"直播列表",path:"/pages/plus/live/wx?"+this.getShareUrlParams()}},methods:{init(){let s=this;a({success(a){s.phoneHeight=a.windowHeight,s.scrollviewHigh=s.phoneHeight}})},convertStatus(s){let a="";switch(s){case 101:a="直播中";break;case 102:a="未開始";break;case 103:a="已結束";break;case 104:a="禁播";break;case 105:a="暫停";break;case 106:a="異常";break;case 107:a="已過期"}return a},getLive(){let s=this;t({title:"載入中"});let a=s.page,e=s.list_rows;s.loading=!0,s._get("plus.live.wx/lists",{page:a||1,list_rows:e},(function(a){s.listData=s.listData.concat(a.data.list.data),s.last_page=a.data.list.last_page,a.data.list.last_page<=1&&(s.no_more=!0),s.loading=!1}))},scrolltolowerFunc(){let s=this;if(s.bottomRefresh=!0,s.page++,s.loading=!0,s.page>s.last_page)return s.loading=!1,void(s.no_more=!0);s.getData()},gotoLive(s){let a=s.roomid;e({url:`plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id=${a}&custom_params=${encodeURIComponent(JSON.stringify({path:"pages/index/index"}))}`})}}},[["render",function(s,a,t,e,k,y){const x=_,D=b,H=n,S=h("uni-load-more"),L=m;return l(),i(H,{class:"live-wx-list"},{default:o((()=>[r(L,{"scroll-y":"true",class:"scroll-Y",style:p("height:"+k.scrollviewHigh+"px;"),"lower-threshold":"50"},{default:o((()=>[r(H,{class:"list d-s-c f-w"},{default:o((()=>[(l(!0),c(g,null,d(k.listData,((s,a)=>(l(),i(H,{class:"item",key:a,onClick:a=>y.gotoLive(s)},{default:o((()=>[r(H,{class:"pic pr"},{default:o((()=>[101==s.live_status||102==s.live_status||103==s.live_status?(l(),i(x,{key:0,class:v(["state",{bg101:101==s.live_status,bg102:102==s.live_status,bg103:103==s.live_status}])},{default:o((()=>[u(f(y.convertStatus(s.live_status)),1)])),_:2},1032,["class"])):w("",!0),r(D,{src:s.cover_img,mode:"aspectFit"},null,8,["src"])])),_:2},1024),r(H,{class:"p-20-0 text-ellipsis f28"},{default:o((()=>[u(f(s.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),r(H,null,{default:o((()=>[0!=k.listData.length||k.loading?(l(),i(S,{key:1,loadingType:y.loadingType},null,8,["loadingType"])):(l(),i(H,{key:0,class:"d-c-c p30"},{default:o((()=>[r(x,{class:"iconfont icon-wushuju"}),r(x,{class:"cont"},{default:o((()=>[u("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1})])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-6f96b4d7"]]);export{y as default};
