import{_ as t,x as a,o as e,c as l,w as s,n as o,g as i,b as d,f as n,r as c,F as r,d as _,q as u,j as f,k as g,S as p,t as h}from"./index-6e5c77a7.js";import{u as m}from"./uni-load-more.58b2601d.js";const w=t({components:{uniLoadMore:m},data:()=>({phoneHeight:0,scrollviewHigh:0,topRefresh:!1,listData:[],isPayPopup:!1,order_id:0,last_page:0,page:1,list_rows:10,no_more:!1,loading:!0,isCodeImg:!1,codeImg:""}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onLoad(t){},mounted(){this.init(),this.getData()},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,t.scrollviewHigh=t.phoneHeight}})},scrolltolowerFunc(){let t=this;t.no_more||(t.page++,t.page<=t.last_page?t.getData():t.no_more=!0)},getData(){let t=this;t.loading=!0,t._get("plus.package.order/orderlist",{page:t.page,list_rows:t.list_rows},(function(a){t.loading=!1,t.listData=t.listData.concat(a.data.list.data),t.last_page=a.data.list.last_page,a.data.list.last_page<=1?t.no_more=!0:t.no_more=!1}))},gotoDetail(t){this.gotoPage("/pages/plus/giftpackage/order_detail?order_no="+t)}}},[["render",function(t,a,m,w,y,D){const k=i,x=f,H=g("uni-load-more"),b=p;return e(),l(k,{"data-theme":t.theme(),class:o(t.theme()||"")},{default:s((()=>[d(b,{"scroll-y":"true",class:"scroll-Y",style:u("height:"+y.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:D.scrolltolowerFunc},{default:s((()=>[d(k,{class:o(y.topRefresh?"top-refresh open":"top-refresh")},{default:s((()=>[(e(),n(r,null,c(3,((t,a)=>d(k,{class:"circle",key:a}))),64))])),_:1},8,["class"]),d(k,{class:"order-list"},{default:s((()=>[(e(!0),n(r,null,c(y.listData,((a,o)=>(e(),l(k,{class:"item",key:o},{default:s((()=>[d(k,{class:"order-head d-b-c"},{default:s((()=>[d(k,null,{default:s((()=>[d(x,{class:"state-text theme-bg"},{default:s((()=>[_(h(a.order_source_text),1)])),_:2},1024),d(x,{class:"f28 flex-1 fb"},{default:s((()=>[_("訂單號："+h(a.order_no),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(k,{class:"one-product d-a-c",onClick:t=>D.gotoDetail(a.order_no)},{default:s((()=>[d(k,null,{default:s((()=>[d(k,{class:"giftlist_item_num"},{default:s((()=>[_(h(1*a.point),1),d(x,{class:"f20"},{default:s((()=>[_("個")])),_:1})])),_:2},1024),d(k,{class:"giftlist_item_type"},{default:s((()=>[_(h(t.points_name()),1)])),_:1})])),_:2},1024),d(k,null,{default:s((()=>[d(k,{class:"giftlist_item_num"},{default:s((()=>[_(h(a.coupon_num),1),d(x,{class:"f20"},{default:s((()=>[_("張")])),_:1})])),_:2},1024),d(k,{class:"giftlist_item_type"},{default:s((()=>[_("優惠券")])),_:1})])),_:2},1024),d(k,null,{default:s((()=>[d(k,{class:"giftlist_item_num"},{default:s((()=>[_(h(a.product_num),1),d(x,{class:"f20"},{default:s((()=>[_("件")])),_:1})])),_:2},1024),d(k,{class:"giftlist_item_type"},{default:s((()=>[_("商品")])),_:1})])),_:2},1024),d(k,{class:"total-count"},{default:s((()=>[d(k,{class:"left-shadow"}),d(k,{class:"price f22"},{default:s((()=>[_(" ¥ "),d(x,{class:"f40"},{default:s((()=>[_(h(a.pay_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),0!=y.listData.length||y.loading?(e(),l(H,{key:1,loadingType:D.loadingType},null,8,["loadingType"])):(e(),l(k,{key:0,class:"d-c-c p30"},{default:s((()=>[d(x,{class:"iconfont icon-wushuju"}),d(x,{class:"cont"},{default:s((()=>[_("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1})])),_:1},8,["style","onScrolltolower"])])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-5a34477c"]]);export{w as default};
