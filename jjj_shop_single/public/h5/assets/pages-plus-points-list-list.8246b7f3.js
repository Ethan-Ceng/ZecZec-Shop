import{_ as t,D as a,o as s,c as e,w as l,n as o,g as i,b as n,d,t as c,f as p,r as u,F as _,i as r,j as g,k as A,e as m}from"./index-6e5c77a7.js";import{u as f}from"./uni-load-more.58b2601d.js";import{_ as h}from"./bg-points.82abfb4b.js";const w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAWBAMAAAC1XkgzAAAAG1BMVEUAAAC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgtkP59AAAACXRSTlMANi4jKAoEGxAD+AOBAAAASklEQVQY02NgN2fAwIaCBhhYUFAAAysKKmDgRsEGDMwWxoCOiQbs7uiYMvcFCQVgYIYEBnRMNEhWTsDAjoIO6Bib+7Cpw+4+TAAADDwnkxbuKQ0AAAAASUVORK5CYII=";const y=t({components:{uniLoadMore:f},data:()=>({loading:!0,listData:[],last_page:0,page:1,list_rows:10,no_more:!1,my_points:0}),onReady(){a({title:this.points_name()+"商城"})},onShow(){this.page=1,this.listData=[],this.getData()},computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onReachBottom(){let t=this;t.page<t.last_page&&(t.page++,t.getData()),t.no_more=!0},methods:{getData(){let t=this;t.loading=!0,t._get("plus.points.product/index",{page:t.page||1,list_rows:t.list_rows},(function(a){t.loading=!1,t.listData=t.listData.concat(a.data.list.data),t.my_points=a.data.points,t.last_page=a.data.list.last_page,a.data.list.last_page<=1&&(t.no_more=!0)}))},gotoList(t){this.gotoPage("/pages/plus/points/detail/detail?point_product_id="+t)}}},[["render",function(t,a,f,y,D,k){const b=r,x=g,C=i,L=A("uni-load-more");return s(),e(C,{class:o(["prodcut-list-wrap",t.theme()||""]),"data-theme":t.theme()},{default:l((()=>[n(C,{class:"point_top theme-bg"},{default:l((()=>[n(b,{class:"bg-points",src:h,mode:""}),n(C,{class:"pr mb28"},{default:l((()=>[n(C,{class:"f60 white"},{default:l((()=>[n(x,{class:"fb mr20"},{default:l((()=>[d(c(D.my_points),1)])),_:1}),n(x,{class:"f26"},{default:l((()=>[d(c(t.points_name()),1)])),_:1})])),_:1}),n(C,{class:"f26 white"},{default:l((()=>[d("別小看"+c(t.points_name())+",它可以省大錢！",1)])),_:1})])),_:1})])),_:1}),n(C,{class:"ponit_title d-c-c"},{default:l((()=>[n(b,{style:{width:"37rpx",height:"22rpx"},src:w,mode:""}),n(x,{class:"m-0-20"},{default:l((()=>[d("好物兌換")])),_:1}),n(b,{style:{width:"37rpx",height:"22rpx"},src:w,mode:""})])),_:1}),n(C,{class:"list"},{default:l((()=>[(s(!0),p(_,null,u(D.listData,((a,o)=>(s(),e(C,{class:"item",key:o,onClick:t=>k.gotoList(a.point_product_id)},{default:l((()=>[n(C,{class:"product-cover"},{default:l((()=>[n(b,{src:a.product_image,mode:"aspectFit"},null,8,["src"])])),_:2},1024),n(C,{class:"product-info flex-1 d-c"},{default:l((()=>[n(C,null,{default:l((()=>[n(C,{class:"product-title text-ellipsis-2"},{default:l((()=>[d(c(a.product.product_name),1)])),_:2},1024),n(C,{class:"already-sale d-b-c"},{default:l((()=>[n(x,null,{default:l((()=>[d("限量"+c(a.stock)+"件",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(C,{class:"d-b-c ww100"},{default:l((()=>[n(C,{class:"f24 theme-price"},{default:l((()=>[0!=a.sku[0].point_money?(s(),e(x,{key:0},{default:l((()=>[d("¥"+c(a.sku[0].point_money)+"+",1)])),_:2},1024)):m("",!0),n(x,{class:""},{default:l((()=>[d(c(a.sku[0].point_num)+c(t.points_name()),1)])),_:2},1024)])),_:2},1024),n(C,{class:"point_btn theme-btn"},{default:l((()=>[d("兌換")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),0!=D.listData.length||D.loading?(s(),e(L,{key:1,loadingType:k.loadingType},null,8,["loadingType"])):(s(),e(C,{key:0,class:"d-c-c p30"},{default:l((()=>[n(x,{class:"iconfont icon-wushuju"}),n(x,{class:"cont"},{default:l((()=>[d("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-165a3c12"]]);export{y as default};
