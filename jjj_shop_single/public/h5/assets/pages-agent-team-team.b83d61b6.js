import{_ as t,x as a,y as e,o as l,c as s,w as o,g as n,b as i,f as c,r as d,F as r,d as u,t as g,q as _,j as m,k as f,S as h,n as p,e as b,i as w}from"./index-6e5c77a7.js";import{u as v}from"./uni-load-more.58b2601d.js";const y=t({components:{uniLoadMore:v},data:()=>({phoneHeight:0,scrollviewHigh:0,state_active:0,tableData:[],setting:[],teamTotal:0,page:1,no_more:!1,tabList:[],list_rows:15,loading:!0}),computed:{loadingType(){return this.loading?1:0!=this.tableData.length&&this.no_more?2:0}},mounted(){this.init(),this.getData()},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,e().select(".top-container").boundingClientRect((a=>{let e=t.phoneHeight-a.height;t.scrollviewHigh=e})).exec()}})},getData(){let t=this;t.loading=!0,t._get("plus.agent.team/lists",{level:t.state_active+1,page:t.page||1,list_rows:t.list_rows},(function(a){t.loading=!1,t.teamTotal=a.data.agent.first_num;let e=a.data;t.tabList=[{value:1,text:e.words.team.words.first.value,total:e.agent.first_num}],e.setting.level>=2&&(t.tabList.push({value:2,text:e.words.team.words.second.value,total:e.agent.second_num}),t.teamTotal+=e.agent.second_num),3==e.setting.level&&(t.tabList.push({value:3,text:e.words.team.words.third.value,total:e.agent.third_num}),t.teamTotal+=e.agent.third_num),t.tableData=t.tableData.concat(e.list.data),t.last_page=e.list.last_page,t.last_page<=1&&(t.no_more=!0)}),null,(function(){t.loading=!1}))},stateFunc(t){let a=this;t!=a.state_active&&(a.tableData=[],a.page=1,a.state_active=t,a.getData())},scrolltolowerFunc(){let t=this;t.no_more||(t.page++,t.page<=t.last_page?t.getData():t.no_more=!0)}}},[["render",function(t,a,e,v,y,x){const D=n,k=m,T=w,H=f("uni-load-more"),F=h;return l(),s(D,null,{default:o((()=>[i(D,{class:"top-container"},{default:o((()=>[i(D,{class:"top-tabbar"},{default:o((()=>[(l(!0),c(r,null,d(y.tabList,((t,a)=>(l(),s(D,{key:a,class:p(y.state_active==a?"tab-item active":"tab-item"),onClick:t=>x.stateFunc(a)},{default:o((()=>[u(g(t.text)+"( "+g(t.total)+") ",1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),i(D,{class:"total p-0-30 d-c-c f24"},{default:o((()=>[u(" 團隊總人數： "),i(k,{class:""},{default:o((()=>[u(g(y.teamTotal),1)])),_:1}),u(" 人 ")])),_:1})])),_:1}),i(F,{"scroll-y":"true",class:"scroll-Y",style:_("height:"+y.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:x.scrolltolowerFunc},{default:o((()=>[i(D,{class:"p-0-30 bg-white"},{default:o((()=>[(l(!0),c(r,null,d(y.tableData,((t,a)=>(l(),s(D,{class:"border-b p-20-0",key:a},{default:o((()=>[i(D,{class:"d-b-c"},{default:o((()=>[i(D,{class:"agent-team-photo"},{default:o((()=>[i(T,{src:t.user.avatarUrl,mode:"aspectFill"},null,8,["src"])])),_:2},1024),i(D,{class:"flex-1 ml20 f24"},{default:o((()=>[i(D,{class:"d-b-c mb16"},{default:o((()=>[i(k,{class:"f28 gray3"},{default:o((()=>[u(g(t.user.nickName),1)])),_:2},1024),i(D,{class:""},{default:o((()=>[i(k,{class:"gray9"},{default:o((()=>[u("銷售業績:")])),_:1}),i(k,{class:"gray3"},{default:o((()=>[u("￥"+g(t.user.expend_money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(D,{class:"d-b-c"},{default:o((()=>[i(k,{class:"gray9"},{default:o((()=>[u("加入時間:"+g(t.create_time),1)])),_:2},1024),t.agent?(l(),s(k,{key:0,class:"gray9"},{default:o((()=>[u(g(t.agent.first_num+t.agent.second_num+t.agent.third_num)+"個成員",1)])),_:2},1024)):b("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),0!=y.tableData.length||y.loading?(l(),s(H,{key:1,loadingType:x.loadingType},null,8,["loadingType"])):(l(),s(D,{key:0,class:"d-c-c p30"},{default:o((()=>[i(k,{class:"iconfont icon-wushuju"}),i(k,{class:"cont"},{default:o((()=>[u("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1})])),_:1},8,["style","onScrolltolower"])])),_:1})}],["__scopeId","data-v-7d528c97"]]);export{y as default};
