import{_ as t,z as a,B as s,o as i,c as e,w as l,g as c,b as o,f as d,r as n,F as r,e as u,d as g,S as _,i as p,k as f,n as y,t as b,j as m,h}from"./index-6e5c77a7.js";import{C as w}from"./countdown.ae2f98a7.js";import{_ as v}from"./active-null.b7f90725.js";const C=t({components:{Countdown:w},data:()=>({phoneHeight:0,scrollviewHigh:0,categorys:[],bargain_activity_id:0,listData:{list:[],detail:null},countdownConfig:{startstamp:0,endstamp:0},loading:!0}),computed:{},onLoad(t){},onShow(){this.getCategory()},onReachBottom(){},methods:{tabTypeFunc(t,a){this.type_active=t,this.bargain_activity_id=a,this.productList=[],this.getProdct()},getCategory(){let t=this;t.type_active,t._get("plus.bargain.product/active",{param:{}},(function(a){t.categorys=a.data.list,t.categorys.length>0&&(t.bargain_activity_id=t.categorys[0].bargain_activity_id),t.getProdct()}))},getProdct(){let t=this;a({title:"載入中"});let i=t.bargain_activity_id;t.loading=!0,t._get("plus.bargain.product/product",{bargain_activity_id:i},(function(a){t.listData=a.data,t.countdownConfig.endstamp=a.data.detail.end_time,t.countdownConfig.startstamp=a.data.detail.start_time,s(),t.loading=!1}))},gotoDetail(t){this.$refs.countdown.clear();let a="pages/plus/bargain/detail/detail?bargain_product_id="+t.bargain_product_id;this.gotoPage(a)},gotoSearch(){this.page=1,this.getData()},returnValFunc(t){console.log(t)}}},[["render",function(t,a,s,w,C,k){const x=c,D=_,F=p,j=f("Countdown"),P=m,S=h;return i(),e(x,{class:"bargain-container"},{default:l((()=>[o(x,{class:"top-box"},{default:l((()=>[o(x,{class:"inner-tab"},{default:l((()=>[o(D,{"scroll-X":"true","show-scrollbar":"false",class:"scroll-X"},{default:l((()=>[o(x,{class:"tab-list"},{default:l((()=>[(i(!0),d(r,null,n(C.categorys,((t,a)=>(i(),e(x,{class:y(C.bargain_activity_id==t.bargain_activity_id?"item active":"item"),key:a,onClick:s=>k.tabTypeFunc(a,t.bargain_activity_id)},{default:l((()=>[g(b(t.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),C.listData.detail&&C.categorys.length>0?(i(),e(x,{key:0,class:"banner-image d-c-c"},{default:l((()=>[o(F,{src:C.listData.detail.file_path,mode:"widthFix"},null,8,["src"])])),_:1})):u("",!0),C.listData.detail&&C.categorys.length>0?(i(),e(x,{key:1,class:"ad-datetime p-30-0 d-c-c pb20"},{default:l((()=>[o(j,{ref:"countdown",config:C.countdownConfig,onReturnVal:k.returnValFunc},null,8,["config","onReturnVal"])])),_:1})):(i(),e(x,{key:2,class:"p30 pt200 d-c-c d-c gray6 f26"},{default:l((()=>[o(F,{style:{width:"532rpx","margin-bottom":"80rpx"},src:v,mode:"widthFix"}),o(x,{class:"tc gray9"},{default:l((()=>[g("暫無活動~~")])),_:1})])),_:1}))])),_:1}),C.loading?u("",!0):(i(),e(x,{key:0,class:"bargain-list"},{default:l((()=>[o(x,{class:"list d-s-c f-w"},{default:l((()=>[(i(!0),d(r,null,n(C.listData.list,((t,a)=>(i(),e(x,{class:"item d-s-s d-stretch",key:a},{default:l((()=>[o(x,{class:"product-cover pr"},{default:l((()=>[o(F,{src:t.product.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024),o(x,{class:"product-info d-b-c d-c"},{default:l((()=>[o(x,{class:"product-title text-ellipsis-2 f26 gray3"},{default:l((()=>[g(b(t.product.product_name),1)])),_:2},1024),o(x,{class:"people-num price"},{default:l((()=>[o(P,{class:"f24"},{default:l((()=>[g("￥")])),_:1}),o(P,{class:"f36 fb"},{default:l((()=>[g(b(t.bargain_price),1)])),_:2},1024),o(P,{class:"ml10 text-d-line gray9 f24"},{default:l((()=>[g("￥"+b(t.product_price),1)])),_:2},1024)])),_:2},1024),o(x,{class:"d-b-c ww100"},{default:l((()=>[o(x,{class:"f24"}),o(x,{class:"right-btn"},{default:l((()=>[o(S,{type:"primary",onClick:a=>k.gotoDetail(t)},{default:l((()=>[g("去砍價")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-c7bd2421"]]);export{C as default};
