import{_ as e,x as t,y as a,o as s,c as l,w as o,g as r,b as d,f as i,r as c,F as n,d as u,q as _,j as g,k as f,S as h,n as p,t as m,e as b,i as y}from"./index-6e5c77a7.js";import{u as w}from"./uni-load-more.58b2601d.js";const v=e({components:{uniLoadMore:w},data:()=>({phoneHeight:0,scrollviewHigh:0,state_active:-1,tableData:[],settled:-1,page:1,no_more:!1,loading:!0,tableList:[],list_rows:15,user_id:0}),computed:{loadingType(){return this.loading?1:0!=this.tableData.length&&this.no_more?2:0}},mounted(){this.init(),this.user_id=this.getUserId(),this.getData()},methods:{init(){let e=this;t({success(t){e.phoneHeight=t.windowHeight,a().select(".top-tabbar").boundingClientRect((t=>{let a=e.phoneHeight-t.height;e.scrollviewHigh=a})).exec()}})},getData(){let e=this;e.loading=!0,e._get("plus.agent.order/lists",{settled:e.state_active,page:e.page||1,list_rows:e.list_rows},(function(t){e.loading=!1,e.tableList=[{value:-1,text:t.data.words.order.words.all.value},{value:0,text:t.data.words.order.words.unsettled.value},{value:1,text:t.data.words.order.words.settled.value}],e.tableData=e.tableData.concat(t.data.list.data),e.last_page=t.data.list.last_page,e.last_page<=1&&(e.no_more=!0)}))},stateFunc(e){let t=this;e!=t.state_active&&(t.tableData=[],t.page=1,t.state_active=e,t.getData())},scrolltolowerFunc(){let e=this;e.no_more||(e.page++,e.page<=e.last_page?e.getData():e.no_more=!0)}}},[["render",function(e,t,a,w,v,k){const x=r,D=g,H=y,F=f("uni-load-more"),j=h;return s(),l(x,null,{default:o((()=>[d(x,{class:"top-tabbar"},{default:o((()=>[(s(!0),i(n,null,c(v.tableList,((e,t)=>(s(),l(x,{class:p(v.state_active==e.value?"tab-item active":"tab-item"),onClick:t=>k.stateFunc(e.value),key:t},{default:o((()=>[u(m(e.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),d(j,{"scroll-y":"true",class:"scroll-Y",style:_("height:"+v.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:k.scrolltolowerFunc},{default:o((()=>[d(x,{class:""},{default:o((()=>[(s(!0),i(n,null,c(v.tableData,((e,t)=>(s(),l(x,{class:"border-b p-0-30 bg-white pt10 mt20",key:t},{default:o((()=>[d(x,{class:"d-b-c f24 item-top"},{default:o((()=>[d(D,null,{default:o((()=>[u("訂單號"+m(e.order_master.order_no),1)])),_:2},1024),1==e.is_settled?(s(),l(D,{key:0,class:"blue"},{default:o((()=>[u(" 已結算")])),_:1})):(s(),l(D,{key:1,class:"green"},{default:o((()=>[u("未結算")])),_:1}))])),_:2},1024),d(x,{class:"d-b-c item-center"},{default:o((()=>[d(x,{class:"agent-order-photo"},{default:o((()=>[d(H,{src:e.user.avatarUrl,mode:"aspectFill"},null,8,["src"])])),_:2},1024),d(x,{class:"flex-1 ml20 f24"},{default:o((()=>[d(x,{class:"d-b-c"},{default:o((()=>[d(D,{class:"gray3 f28"},{default:o((()=>[u(m(e.user.nickName),1)])),_:2},1024),e.first_user_id==v.user_id?(s(),l(D,{key:0,class:"gray3 f28"},{default:o((()=>[u("+￥"+m(e.first_money),1)])),_:2},1024)):b("",!0),e.second_user_id==v.user_id?(s(),l(D,{key:1,class:"gray3 f28"},{default:o((()=>[u("+￥"+m(e.second_money),1)])),_:2},1024)):b("",!0),e.third_user_id==v.user_id?(s(),l(D,{key:2,class:"gray3 f28"},{default:o((()=>[u("+￥"+m(e.third_money),1)])),_:2},1024)):b("",!0)])),_:2},1024),d(x,{class:"d-b-c"},{default:o((()=>[d(D,{class:"gray9 f22"},{default:o((()=>[u("消費金額：￥"+m(e.order_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(x,{class:"item-bottom"},{default:o((()=>[d(D,{class:"gray9"},{default:o((()=>[u(m(e.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),0!=v.tableData.length||v.loading?(s(),l(F,{key:1,loadingType:k.loadingType},null,8,["loadingType"])):(s(),l(x,{key:0,class:"d-c-c p30"},{default:o((()=>[d(D,{class:"iconfont icon-wushuju"}),d(D,{class:"cont"},{default:o((()=>[u("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1})])),_:1},8,["style","onScrolltolower"])])),_:1})}],["__scopeId","data-v-047f6c99"]]);export{v as default};
