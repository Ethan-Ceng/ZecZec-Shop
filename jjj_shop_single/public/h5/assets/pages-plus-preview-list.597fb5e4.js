import{_ as t,x as a,o as e,c as s,w as o,n as l,g as i,b as r,f as n,r as d,F as c,d as u,q as p,k as g,j as _,S as h,t as f,i as m}from"./index-6e5c77a7.js";import{u as w}from"./uni-load-more.58b2601d.js";import{C as y}from"./countdown-act.34a2c1ec.js";const D=t({components:{uniLoadMore:w,Countdown:y},data:()=>({phoneHeight:0,scrollviewHigh:0,topRefresh:!1,loading:!0,no_more:!1,listData:[],page:1,list_rows:10,last_page:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onLoad(t){},mounted(){this.init(),this.getData()},onPullDownRefresh(){this.restoreData(),this.getData()},onShareAppMessage(){return{title:"全部分類",path:"/pages/product/category?"+this.getShareUrlParams()}},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,t.scrollviewHigh=a.windowHeight}})},restoreData(){this.listData=[],this.no_more=!1,this.page=1},getData(){let t=this,a=t.page,e=t.list_rows;t.loading=!0,t._get("product.product/previewProduct",{page:a||1,list_rows:e},(function(a){t.loading=!1,t.listData=t.listData.concat(a.data.list.data),t.last_page=a.data.list.last_page,a.data.list.last_page<=1&&(t.no_more=!0)}))},gotoList(t){let a="pages/product/detail/detail?product_id="+t;this.gotoPage(a)},scrolltolowerFunc(){let t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getData()}}},[["render",function(t,a,w,y,D,b){const v=m,k=i,H=g("Countdown"),j=_,x=g("uni-load-more"),C=h;return e(),s(k,{"data-theme":t.theme(),class:l(t.theme()||"")},{default:o((()=>[r(C,{"scroll-y":"true",class:"scroll-Y",style:p("height:"+D.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:b.scrolltolowerFunc},{default:o((()=>[r(k,{class:"shop_body"},{default:o((()=>[(e(!0),n(c,null,d(D.listData,((t,a)=>(e(),s(k,{class:"product-item",key:a,onClick:a=>b.gotoList(t.product_id)},{default:o((()=>[r(k,null,{default:o((()=>[r(v,{src:t.product_image,mode:""},null,8,["src"])])),_:2},1024),r(k,{class:"product-info"},{default:o((()=>[r(k,null,{default:o((()=>[r(k,{class:"product-name gray3 f24 mb10"},{default:o((()=>[u(f(t.product_name),1)])),_:2},1024),r(H,{ref_for:!0,ref:"countdown",config:{startstamp:(new Date).valueOf()/1e3,endstamp:t.preview_time,title:" "},start_name:"距開始僅剩",end_name:"距開始僅剩"},null,8,["config"])])),_:2},1024),r(k,{class:"d-b-c pb10"},{default:o((()=>[r(k,{class:"product-price"},{default:o((()=>[r(k,{class:"f24 theme-price"},{default:o((()=>[u(" ¥ "),r(j,{class:"f32 fb"},{default:o((()=>[u(f(t.product_price),1)])),_:2},1024)])),_:2},1024),r(k,{class:"f20 gray9 old-price"},{default:o((()=>[u("¥"+f(t.product_sku.line_price),1)])),_:2},1024)])),_:2},1024),r(k,{class:"dis-btn"},{default:o((()=>[u("未開始")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),0!=D.listData.length||D.loading?(e(),s(x,{key:1,loadingType:b.loadingType},null,8,["loadingType"])):(e(),s(k,{key:0,class:"d-c-c p30"},{default:o((()=>[r(j,{class:"iconfont icon-wushuju"}),r(j,{class:"cont"},{default:o((()=>[u("親，暫無相關記錄哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-abcab8ea"]]);export{D as default};
