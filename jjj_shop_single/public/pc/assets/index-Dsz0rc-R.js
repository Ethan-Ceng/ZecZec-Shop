/* empty css             *//* empty css                  *//* empty css               *//* empty css                 *//* empty css              */import{d as R,e as x,u as j,f as w,g as z,o as M,c as N,a as s,b as t,h as a,w as l,F as U,i as L,j as $,k as T,E as y,r as A,l as D,m as G,p as H,n as J,q as K,s as O,t as P,v as Q,x as W,_ as X}from"./index-BWcYl31F.js";import{F as Y}from"./index-TDlUl9zq.js";import{u as Z}from"./loading-DZi2qnJz.js";import{g as p}from"./get-Bnx5vrHs.js";const u=i=>(H("data-v-9982bb71"),i=i(),J(),i),ee={class:"login-wrapper"},se=u(()=>s("div",{class:"gallery flex-1 invisible sm:visible relative overflow-hidden"},null,-1)),te={class:"sm:max-w-xl flex items-center justify-center bg-white px-8 md:px-16 w-full sm:w-4/5"},oe={class:"max-w-sm w-full py-16"},ae={class:"whitespace-nowrap flex items-center mb-16",href:"/"},le={class:"inline-block mr-6 relative after:absolute after:w-px after:h-6 after:m-auto after:bg-gray-500 after:inset-y-0 after:right-0"},re=u(()=>s("h3",{class:"inline-block"},"一起讓美好的事物發生",-1)),ne=u(()=>s("h1",{class:"font-bold text-3xl mb-4"},"登入",-1)),ie={class:"mb-8"},ce={class:"flex justify-between items-center mb-6"},me=u(()=>s("a",{class:"text-sm text-gray-800 hover:text-blue-600 underline",href:"/password"},"忘記密碼？",-1)),ue={class:"text-center text-gray-800 text-sm"},de=R({__name:"index",setup(i){const d=L(),v=$(),_=x(""),{loading:k,setLoading:c}=Z(),E=j(),f=x(),r=w({email:"",password:""}),V=w({email:[{required:!0,type:"email",message:"請輸入正確郵箱",trigger:"change"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"},{min:6,max:20,message:"密碼長度 6 至 20",trigger:"blur"}]}),S=async o=>{o&&await o.validate((e,n)=>{e?(console.log("submit!"),F({...r})):console.log("error submit!",n)})},F=async o=>{c(!0);try{await E.login(o),y.success("登入成功"),await v.replace("/")}catch{_.value=err.msg}finally{c(!1)}},I=async o=>{c(!0);try{const{msg:e}=await T(o);y.success(e||"success")}catch{_.value=err.msg}finally{c(!1)}};return z(()=>{const o=p(d,"query.app_id"),e=p(d,"query.email"),n=p(d,"query.code");n&&I({appId:o,email:e,code:n})}),(o,e)=>{const n=K,g=A("router-link"),b=O,h=P,q=Q,B=W,C=D;return M(),N(U,null,[s("div",ee,[se,s("div",te,[s("div",oe,[s("a",ae,[s("h2",le,[t(n,{class:"mr-6 h-16",name:"logo",size:"80px"})]),re]),ne,s("h4",ie,[a(" 尚未成為會員？ "),t(g,{class:"text-blue-600 font-bold underline",to:"/register"},{default:l(()=>[a("註冊帳號 ")]),_:1}),a(" 。 ")]),t(C,{ref_key:"formStateRef",ref:f,size:"large",model:r,rules:V,"label-width":"auto","label-position":"top"},{default:l(()=>[t(h,{label:"電子信箱",prop:"email"},{default:l(()=>[t(b,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=m=>r.email=m)},null,8,["modelValue"])]),_:1}),t(h,{label:"密碼",prop:"password"},{default:l(()=>[t(b,{type:"password",modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=m=>r.password=m),"show-password":""},null,8,["modelValue"])]),_:1}),s("div",ce,[t(q,null,{default:l(()=>[a("記住我")]),_:1}),me]),t(B,{loading:G(k),type:"success",round:"",size:"large",class:"w-full mb-8",onClick:e[2]||(e[2]=m=>S(f.value))},{default:l(()=>[a(" 登入 ")]),_:1},8,["loading"]),s("p",ue,[a(" 繼續進行代表你同意 "),t(g,{class:"text-blue-600",target:"_blank",to:"/agreement"},{default:l(()=>[a("服務條款 ")]),_:1}),a(" 。 ")])]),_:1},8,["model","rules"])])])]),t(Y)],64)}}}),ve=X(de,[["__scopeId","data-v-9982bb71"]]);export{ve as default};
