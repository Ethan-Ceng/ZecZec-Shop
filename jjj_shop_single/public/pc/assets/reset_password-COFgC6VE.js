/* empty css             *//* empty css                  *//* empty css               *//* empty css                 *//* empty css              */import{d as q,e as b,u as I,f as h,g as P,o as C,c as R,a as s,b as o,h as r,w as l,F as B,i as j,j as z,r as M,l as N,p as U,n as L,A as $,E as A,q as T,s as D,t as G,v as H,x as J,_ as K}from"./index-BWcYl31F.js";import{F as O}from"./index-TDlUl9zq.js";import{u as Q}from"./loading-DZi2qnJz.js";import{g as m}from"./get-Bnx5vrHs.js";const u=i=>(U("data-v-4321038b"),i=i(),L(),i),W={class:"login-wrapper"},X=u(()=>s("div",{class:"gallery flex-1 invisible sm:visible relative overflow-hidden"},null,-1)),Y={class:"sm:max-w-xl flex items-center justify-center bg-white px-8 md:px-16 w-full sm:w-4/5"},Z={class:"max-w-sm w-full py-16"},ee={class:"whitespace-nowrap flex items-center mb-16",href:"/"},se={class:"inline-block mr-6 relative after:absolute after:w-px after:h-6 after:m-auto after:bg-gray-500 after:inset-y-0 after:right-0"},oe=u(()=>s("h3",{class:"inline-block"},"一起讓美好的事物發生",-1)),te=u(()=>s("h1",{class:"font-bold text-3xl mb-4"},"設定新密碼",-1)),ae={class:"mb-8"},re={class:"mb-4"},le={class:"mb-4"},ne={class:"flex justify-between items-center mb-6"},ie=q({__name:"reset_password",setup(i){const d=j(),x=z(),v=b(""),{loading:ce,setLoading:p}=Q();I();const _=b(),t=h({app_id:"",email:"",code:"",password:"",confirmPassword:""}),y=h({password:[{required:!0,message:"請輸入密碼",trigger:"blur"},{min:6,max:20,message:"密碼長度 6 至 20",trigger:"blur"}],confirmPassword:[{required:!0,message:"請輸入確認密碼",trigger:"blur"},{min:6,max:20,message:"密碼長度 6 至 20",trigger:"blur"}]}),k=async a=>{a&&await a.validate((e,n)=>{e?(console.log("submit!"),V({...t})):console.log("error submit!",n)})},V=async a=>{p(!0);try{const{msg:e}=await $(a);A.success(e||"操作成功"),await x.replace("/login")}catch{v.value=err.msg}finally{p(!1)}};return P(()=>{const a=m(d,"query.app_id"),e=m(d,"query.email"),n=m(d,"query.code");(a||e||n)&&(t.app_id=a,t.email=e,t.code=n)}),(a,e)=>{const n=T,f=M("router-link"),g=D,w=G,E=H,F=J,S=N;return C(),R(B,null,[s("div",W,[X,s("div",Y,[s("div",Z,[s("a",ee,[s("h2",se,[o(n,{class:"mr-6 h-16",name:"logo",size:"80px"})]),oe]),te,s("h4",ae,[r(" 回到 "),o(f,{class:"text-blue-600 font-bold underline",to:"/login"},{default:l(()=>[r("登入")]),_:1}),r(" 或 "),o(f,{class:"text-blue-600 font-bold underline",to:"/register"},{default:l(()=>[r("註冊帳號")]),_:1}),r(" 。 ")]),o(S,{ref_key:"formStateRef",ref:_,size:"large",model:t,rules:y,"label-width":"auto","label-position":"top"},{default:l(()=>[s("div",re,[o(w,{label:"新密碼（至少六碼）",prop:"password"},{default:l(()=>[o(g,{type:"password",modelValue:t.password,"onUpdate:modelValue":e[0]||(e[0]=c=>t.password=c),"show-password":""},null,8,["modelValue"])]),_:1})]),s("div",le,[o(w,{label:"再次確認密碼",prop:"confirmPassword"},{default:l(()=>[o(g,{type:"password",modelValue:t.confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=c=>t.confirmPassword=c),"show-password":""},null,8,["modelValue"])]),_:1})]),s("div",ne,[o(E,null,{default:l(()=>[r("記住我")]),_:1})]),o(F,{type:"success",round:"",size:"large",class:"w-full mb-8",onClick:e[2]||(e[2]=c=>k(_.value))},{default:l(()=>[r(" 更改密碼 ")]),_:1})]),_:1},8,["model","rules"])])])]),o(O)],64)}}}),he=K(ie,[["__scopeId","data-v-4321038b"]]);export{he as default};
