import{u as e,r as n,_ as t}from"./index-bb8b9786.js";import{u as i}from"./vue-router-feb6ca35.js";import{E as s,J as a,w as c,K as o,o as l,c as r,a as u,L as m,P as h,a8 as d,W as p,X as v,O as f,ad as g}from"./@vue-5c89b57d.js";import{E as x,f as j}from"./element-plus-4e26fc63.js";import"./pinia-3964e703.js";import"./vue-demi-71ba0ef2.js";import"./@element-plus-9b3bb84c.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-e57ebffb.js";import"./dayjs-342c85a3.js";import"./call-bind-0966096f.js";import"./get-intrinsic-ccd8a43d.js";import"./has-symbols-456daba2.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";const I=s({setup(n,{emit:t}){const s=i(),{bus_emit:l}=e(),r=a({route:s,active_menu:null,active_child:0,menuList:[{name:"外掛",icon:"icon-chajian",path:"/plugs",redirect:"/plugs/plugs/Index",children:[{name:"全部外掛",icon:null,path:"/plugs/plugs/Index"}]},{name:"許可權",icon:"icon-quanxianguanli",path:"/access",redirect:"/access/Index",children:[{name:"許可權列表",icon:null,path:"/access/Index"}]},{name:"相簿",icon:"icon-tupian11",path:"/SystemPicture",redirect:"/SystemPicture/Index",children:[{name:"相簿列表",icon:null,path:"/SystemPicture/Index"}]},{name:"商城",icon:"icon-fenqifenqishangcheng2",path:"/shop",redirect:"/shop/Index",children:[{name:"商城列表",icon:null,path:"/shop/Index"}]},{name:"訊息",icon:"icon-xiaoxi2",path:"/message",redirect:"/message/Index",children:[{name:"訊息列表",icon:null,path:"/message/Index"}]},{name:"地區",icon:"icon-diqu",path:"/region",redirect:"/region/Index",children:[{name:"地區列表",icon:null,path:"/region/Index"}]},{name:"設定",icon:"icon-icon-test1",path:"/setting",redirect:"/setting/Index",children:[{name:"設定",icon:null,path:"/setting/Index"}]},{name:"密碼",icon:"icon-authority1",path:"/password",redirect:"/password/Index",children:[{name:"修改密碼",icon:null,path:"/password/Index"}]}]}),u=async e=>{let n="首頁",i="/"+e.path.split("/")[1];for(let t=0;t<r.menuList.length;t++){if(i==r.menuList[t].path){n=r.menuList[t].name,r.active_menu=t;let i=e.path;if(r.menuList[t].children){let e=r.menuList[t].children;for(let t=0;t<e.length;t++){if(i==e[t].path){n=e[t].name,r.active_child=t;break}r.active_child=0}}break}r.active_menu=null}l("MenuName",n),t("selectMenu",r.active_menu)};return c((()=>s),((e,n)=>{const t=e.path.split("/").length,i=n?n.path.split("/").length:0;r.transitionName=t<i?"slide-right":"slide-left",u(e)}),{deep:!0,immediate:!0}),{...o(r),selectMenu:u,route:s}},mounted(){this.$nextTick((()=>{this.selectMenu(this.$route)}))},methods:{choseMenu(e){if(null!=e){let t=e.redirect||e.path;n.push(t)}else n.push("/Home")}}}),b={class:"left-menu-wrapper"},_={class:"menu-wrapper"},k={class:"home-login"},M=[u("span",{class:"icon iconfont icon-tubiaozhizuomoban-"},null,-1)],w={class:"nav-wrapper"},y={class:"first-menu-content"},L={class:"nav-ul"},C=["onClick"],S={class:"item-box"},$={class:"child-menu-wrapper"},q={class:"child-menu right-animation"},N={key:0},P=["onClick"],z={class:"name"};const H=t(I,[["render",function(e,n,t,i,s,a){return l(),r("div",b,[u("div",_,[u("div",k,[u("div",{class:m(null!=e.active_menu?"home-icon":"home-icon router-link-active"),onClick:n[0]||(n[0]=n=>e.choseMenu(null))},M,2)]),u("div",w,[u("div",y,[u("ul",L,[(l(!0),r(h,null,d(e.menuList,((n,t)=>(l(),r("li",{class:m(e.active_menu==t?"menu-item router-link-active":"menu-item"),key:t,onClick:t=>e.choseMenu(n)},[u("div",S,[u("span",{class:m("icon iconfont menu-item-icon "+n.icon)},null,2),u("span",null,p(n.name),1)])],10,C)))),128))])])])]),u("div",$,[u("div",q,[null!=e.active_menu?(l(),r("ul",N,[(l(!0),r(h,null,d(e.menuList[e.active_menu].children,((n,t)=>(l(),r("li",{class:m(e.active_child==t?"router-link router-link-active":"router-link"),key:t,onClick:t=>e.choseMenu(n)},[u("span",z,p(n.name),1)],10,P)))),128))])):v("",!0)])])])}]]),{userInfo:T,bus_on:B,afterLogout:E}=e(),F=s({setup(){const e=a({menu_title:"首頁",userInfo:T});return B("MenuName",(n=>{e.menu_title=n})),{...o(e),userInfo:T,afterLogout:E}},methods:{exit(){x.confirm("此操作將退出登入, 是否繼續?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.logout()})).catch((()=>{j({type:"info",message:"已取消退出"})}))},async logout(){await this.afterLogout(),this.$router.push("/login")}}}),R={class:"common-header"},J={class:"breadcrumb"},K={class:"baseInfo-left-base"},O={class:"name"},W={class:"header-navbar"},X={class:"header-navbar-icon"},A=u("span",{class:"ml4 icon iconfont icon-geren9"},null,-1),D={class:"text ml4"},G=[u("span",{class:"icon iconfont icon-tuichu"},null,-1),u("span",{class:"text ml4"},"退出",-1)];const Q=s({components:{Heads:t(F,[["render",function(e,n,t,i,s,a){return l(),r("div",R,[u("div",J,[u("div",K,[u("span",O,p(e.menu_title),1)]),u("div",W,[u("div",X,[A,u("span",D,p(e.userInfo&&e.userInfo.userName)+"，歡迎您！",1)]),u("div",{class:"header-navbar-icon",onClick:n[0]||(n[0]=n=>e.exit())},G)])])])}]])}}),U={class:"right-content"},V={class:"right-content-box"},Y={class:"subject-wrap"};const Z=t(s({setup(){const e=a({hasChild:null});return{...o(e)}},components:{LeftMenu:H,RightContent:t(Q,[["render",function(e,n,t,i,s,a){const c=g("Heads"),o=g("router-view");return l(),r("div",U,[f(c),u("div",V,[u("div",Y,[f(o)])])])}]])},watch:{$route(e,n){n.path!=e.path&&this.$router.go(0)}},methods:{selectMenuFunc(e){this.hasChild=e}}}),[["render",function(e,n,t,i,s,a){const c=g("LeftMenu"),o=g("RightContent");return l(),r("div",{class:m((e.hasChild,"main right-big"))},[f(c,{onSelectMenu:e.selectMenuFunc},null,8,["onSelectMenu"]),f(o)],2)}]]);export{Z as default};
