import{a as e}from"./axios-85bcd05e.js";import{l as t}from"./qs-9a0be292.js";import{u as s,r,o}from"./index-bb8b9786.js";import{f as a}from"./element-plus-4e26fc63.js";let{baseURL:n,tokenName:p,contentType:d,withCredentials:i,responseType:m}=o;e.defaults.headers["Content-Type"]=d,e.defaults.baseURL=n,e.defaults.withCredentials=i,e.defaults.responseType=m,e.interceptors.request.use((e=>{const r=s(),{token:o,userInfo:a}=r;return e.headers[p]=o,e.headers.AppID=a&&a.AppID,"post"!==e.method||e.headers.uploadImg||(e.data=t.stringify(e.data)),e}),(e=>Promise.reject(e))),e.interceptors.response.use((e=>{if(1===e.data.code)return e.data;if(0===e.data.code)return a({showClose:!0,message:e.data.msg,type:"error"}),Promise.reject(e.data);if(e.data.code){const e=s(),{afterLogout:t}=e;t(),r.push({path:"/login"})}}),(e=>(a({showClose:!0,message:"介面請求異常，請稍後再試~",type:"error"}),Promise.reject(e))));const u={_post:function(t,s,r){return new Promise(((o,a)=>{e.post(t,s).then((e=>{o(e)})).catch((e=>{r&&a(e)}))}))},_get:function(t,s,r){return new Promise(((o,a)=>{e.get(t,{params:s}).then((e=>{o(e)})).catch((e=>{r&&a(e)}))}))},_upload:function(t,s,r){return new Promise(((r,o)=>{e.post(t,s,{headers:{"Content-Type":"multipart/form-data",uploadImg:!0}}).then((e=>{r(e)})).catch((e=>{o(e)}))}))}};export{u as r};
